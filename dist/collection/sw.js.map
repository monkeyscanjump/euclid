{"version":3,"file":"sw.js","sourceRoot":"","sources":["../src/sw.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,gBAAgB,EAAE,qBAAqB,EAAE,MAAM,oBAAoB,CAAC;AAC7E,OAAO,EAAE,aAAa,EAAE,MAAM,iBAAiB,CAAC;AAChD,OAAO,EAAE,UAAU,EAAE,oBAAoB,EAAE,YAAY,EAAE,MAAM,oBAAoB,CAAC;AACpF,OAAO,EAAE,gBAAgB,EAAE,MAAM,oBAAoB,CAAC;AAOtD,wCAAwC;AACxC,qBAAqB,EAAE,CAAC;AAExB,6BAA6B;AAC7B,gBAAgB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;AAErC,kDAAkD;AAClD,aAAa,CACX,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,UAAU,CAAC,OAAO,CAAC,EAC7C,IAAI,YAAY,CAAC;IACf,SAAS,EAAE,kBAAkB;IAC7B,OAAO,EAAE;QACP,IAAI,gBAAgB,CAAC;YACnB,UAAU,EAAE,EAAE;YACd,aAAa,EAAE,CAAC,GAAG,EAAE,EAAE,YAAY;SACpC,CAAC;KACH;CACF,CAAC,CACH,CAAC;AAEF,yCAAyC;AACzC,aAAa,CACX,CAAC,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,OAAO,CAAC,WAAW,KAAK,OAAO,EAChD,IAAI,UAAU,CAAC;IACb,SAAS,EAAE,eAAe;IAC1B,OAAO,EAAE;QACP,IAAI,gBAAgB,CAAC;YACnB,UAAU,EAAE,EAAE;YACd,aAAa,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,UAAU;SAC7C,CAAC;KACH;CACF,CAAC,CACH,CAAC;AAEF,wCAAwC;AACxC,aAAa,CACX,CAAC,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,OAAO,CAAC,WAAW,KAAK,MAAM,EAC/C,IAAI,UAAU,CAAC;IACb,SAAS,EAAE,cAAc;IACzB,OAAO,EAAE;QACP,IAAI,gBAAgB,CAAC;YACnB,UAAU,EAAE,EAAE;YACd,aAAa,EAAE,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,SAAS;SAC7C,CAAC;KACH;CACF,CAAC,CACH,CAAC;AAEF,+CAA+C;AAC/C,aAAa,CACX,CAAC,EAAE,OAAO,EAAE,EAAE,EAAE,CACd,OAAO,CAAC,WAAW,KAAK,OAAO;IAC/B,OAAO,CAAC,WAAW,KAAK,QAAQ,EAClC,IAAI,oBAAoB,CAAC;IACvB,SAAS,EAAE,yBAAyB;CACrC,CAAC,CACH,CAAC;AAEF,yEAAyE;AACzE,aAAa,CACX,CAAC,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,OAAO,CAAC,IAAI,KAAK,UAAU,EAC5C,IAAI,YAAY,CAAC;IACf,SAAS,EAAE,cAAc;IACzB,OAAO,EAAE;QACP,IAAI,gBAAgB,CAAC;YACnB,UAAU,EAAE,EAAE;YACd,aAAa,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,QAAQ;SACtC,CAAC;KACH;CACF,CAAC,CACH,CAAC;AAEF,OAAO,CAAC,GAAG,CAAC,uCAAuC,CAAC,CAAC","sourcesContent":["import { precacheAndRoute, cleanupOutdatedCaches } from 'workbox-precaching';\nimport { registerRoute } from 'workbox-routing';\nimport { CacheFirst, StaleWhileRevalidate, NetworkFirst } from 'workbox-strategies';\nimport { ExpirationPlugin } from 'workbox-expiration';\n\n// Declare the Workbox manifest type for TypeScript\ndeclare const self: ServiceWorkerGlobalScope & {\n  __WB_MANIFEST: unknown;\n};\n\n// Clean up any previous precached files\ncleanupOutdatedCaches();\n\n// Precache all static assets\nprecacheAndRoute(self.__WB_MANIFEST);\n\n// Cache API responses with network-first strategy\nregisterRoute(\n  ({ url }) => url.pathname.startsWith('/api/'),\n  new NetworkFirst({\n    cacheName: 'euclid-api-cache',\n    plugins: [\n      new ExpirationPlugin({\n        maxEntries: 50,\n        maxAgeSeconds: 5 * 60, // 5 minutes\n      }),\n    ],\n  })\n);\n\n// Cache images with cache-first strategy\nregisterRoute(\n  ({ request }) => request.destination === 'image',\n  new CacheFirst({\n    cacheName: 'euclid-images',\n    plugins: [\n      new ExpirationPlugin({\n        maxEntries: 60,\n        maxAgeSeconds: 30 * 24 * 60 * 60, // 30 days\n      }),\n    ],\n  })\n);\n\n// Cache fonts with cache-first strategy\nregisterRoute(\n  ({ request }) => request.destination === 'font',\n  new CacheFirst({\n    cacheName: 'euclid-fonts',\n    plugins: [\n      new ExpirationPlugin({\n        maxEntries: 10,\n        maxAgeSeconds: 365 * 24 * 60 * 60, // 1 year\n      }),\n    ],\n  })\n);\n\n// Cache CSS and JS with stale-while-revalidate\nregisterRoute(\n  ({ request }) =>\n    request.destination === 'style' ||\n    request.destination === 'script',\n  new StaleWhileRevalidate({\n    cacheName: 'euclid-static-resources',\n  })\n);\n\n// Handle navigation requests with network-first, fallback to cached HTML\nregisterRoute(\n  ({ request }) => request.mode === 'navigate',\n  new NetworkFirst({\n    cacheName: 'euclid-pages',\n    plugins: [\n      new ExpirationPlugin({\n        maxEntries: 50,\n        maxAgeSeconds: 24 * 60 * 60, // 1 day\n      }),\n    ],\n  })\n);\n\nconsole.log('Euclid Protocol Service Worker loaded');\n"]}