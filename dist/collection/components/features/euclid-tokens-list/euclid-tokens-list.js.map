{"version":3,"file":"euclid-tokens-list.js","sourceRoot":"","sources":["../../../../src/components/features/euclid-tokens-list/euclid-tokens-list.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Prop, h, State, Event, EventEmitter, Watch } from '@stencil/core';\nimport type { TokenMetadata } from '../../../utils/types/api.types';\nimport { marketStore } from '../../../store/market.store';\n\nexport interface TokenFilters {\n  search: string;\n  sortBy: 'name' | 'price' | 'volume' | 'marketCap';\n  sortOrder: 'asc' | 'desc';\n  showFavorites: boolean;\n  chainFilter: string;\n}\n\n@Component({\n  tag: 'euclid-tokens-list',\n  styleUrl: 'euclid-tokens-list.css',\n  shadow: true,\n})\nexport class EuclidTokensList {\n  /**\n   * Available tokens data (gets from market store automatically)\n   * @deprecated Use store instead\n   */\n  @Prop() tokens: TokenMetadata[] = [];\n\n  /**\n   * Whether the component is in loading state (overrides store loading)\n   */\n  @Prop() loading: boolean = false;\n\n  /**\n   * Items per page for pagination\n   */\n  @Prop() itemsPerPage: number = 20;\n\n  /**\n   * Card title\n   */\n  @Prop() cardTitle: string = 'Available Tokens';\n\n  // Internal state\n  @State() filteredTokens: TokenMetadata[] = [];\n  @State() currentPage: number = 1;\n  @State() totalPages: number = 1;\n  @State() filters: TokenFilters = {\n    search: '',\n    sortBy: 'name',\n    sortOrder: 'asc',\n    showFavorites: false,\n    chainFilter: '',\n  };\n\n  // Store data (automatically synced)\n  @State() storeTokens: TokenMetadata[] = [];\n  @State() storeLoading: boolean = false;\n\n  // Events\n  @Event() tokenSelected: EventEmitter<TokenMetadata>;\n  @Event() filtersChanged: EventEmitter<TokenFilters>;\n\n  componentWillLoad() {\n    // Connect to market store for automatic data updates\n    this.syncWithStore();\n\n    // Listen for store changes\n    marketStore.onChange('tokens', () => {\n      this.syncWithStore();\n      this.applyFilters();\n    });\n\n    // Initialize filters\n    this.applyFilters();\n  }\n\n  private syncWithStore() {\n    // Use store data if available, fallback to props\n    this.storeTokens = marketStore.state.tokens.length > 0 ? marketStore.state.tokens : this.tokens;\n    this.storeLoading = marketStore.state.loading;\n\n    // Debug logging\n    console.log('🔄 Tokens store sync:', {\n      storeTokens: this.storeTokens.length,\n      storeLoading: this.storeLoading,\n      marketStoreTokens: marketStore.state.tokens.length,\n      marketStoreLoading: marketStore.state.loading\n    });\n  }\n\n  @Watch('tokens')\n  watchTokensChange() {\n    this.applyFilters();\n  }\n\n  private applyFilters() {\n    // Use store data first, fallback to props for backward compatibility\n    const activeTokens = this.storeTokens.length > 0 ? this.storeTokens : this.tokens;\n    let filtered = [...activeTokens];\n\n    // Apply search filter\n    if (this.filters.search) {\n      const searchLower = this.filters.search.toLowerCase();\n      filtered = filtered.filter(token =>\n        token.displayName.toLowerCase().includes(searchLower) ||\n        token.tokenId.toLowerCase().includes(searchLower) ||\n        token.description?.toLowerCase().includes(searchLower)\n      );\n    }\n\n    // Apply chain filter\n    if (this.filters.chainFilter) {\n      filtered = filtered.filter(token =>\n        token.chain_uids?.includes(this.filters.chainFilter)\n      );\n    }\n\n    // Apply sorting\n    filtered.sort((a, b) => {\n      let aValue: string | number, bValue: string | number;\n\n      switch (this.filters.sortBy) {\n        case 'name':\n          aValue = a.displayName.toLowerCase();\n          bValue = b.displayName.toLowerCase();\n          break;\n        case 'price':\n          aValue = parseFloat(a.price || '0');\n          bValue = parseFloat(b.price || '0');\n          break;\n        case 'volume':\n          aValue = a.total_volume_24h || 0;\n          bValue = b.total_volume_24h || 0;\n          break;\n        case 'marketCap':\n          aValue = parseFloat(a.price || '0'); // Simplified - would be price * supply\n          bValue = parseFloat(b.price || '0');\n          break;\n        default:\n          aValue = a.displayName.toLowerCase();\n          bValue = b.displayName.toLowerCase();\n      }\n\n      if (typeof aValue === 'string') {\n        if (this.filters.sortOrder === 'asc') {\n          return aValue.localeCompare(bValue as string);\n        } else {\n          return (bValue as string).localeCompare(aValue);\n        }\n      } else {\n        if (this.filters.sortOrder === 'asc') {\n          return aValue - (bValue as number);\n        } else {\n          return (bValue as number) - aValue;\n        }\n      }\n    });\n\n    // Update state only if changed\n    const newFilteredLength = filtered.length;\n    const currentFilteredLength = this.filteredTokens.length;\n    const hasChanged = newFilteredLength !== currentFilteredLength ||\n      !filtered.every((token, index) => this.filteredTokens[index]?.tokenId === token.tokenId);\n\n    if (hasChanged) {\n      this.filteredTokens = filtered;\n    }\n\n    const newTotalPages = Math.ceil(filtered.length / this.itemsPerPage);\n    if (this.totalPages !== newTotalPages) {\n      this.totalPages = newTotalPages;\n    }\n\n    // Reset to first page if current page is out of bounds\n    if (this.currentPage > this.totalPages && this.totalPages > 0) {\n      this.currentPage = 1;\n    }\n\n    this.filtersChanged.emit(this.filters);\n  }\n\n  private getPaginatedTokens(): TokenMetadata[] {\n    const startIndex = (this.currentPage - 1) * this.itemsPerPage;\n    const endIndex = startIndex + this.itemsPerPage;\n    return this.filteredTokens.slice(startIndex, endIndex);\n  }\n\n  private getUniqueChains(): string[] {\n    const activeTokens = this.storeTokens.length > 0 ? this.storeTokens : this.tokens;\n    const chains = new Set<string>();\n\n    activeTokens.forEach(token => {\n      token.chain_uids?.forEach(chain => chains.add(chain));\n    });\n\n    return Array.from(chains).sort();\n  }\n\n  private handleFiltersChanged = (event: CustomEvent<TokenFilters>) => {\n    this.filters = event.detail;\n    this.currentPage = 1;\n    this.applyFilters();\n  };\n\n  private handlePageChange = (page: number) => {\n    if (page >= 1 && page <= this.totalPages) {\n      this.currentPage = page;\n    }\n  };\n\n  private handleTokenClick = (token: TokenMetadata) => {\n    this.tokenSelected.emit(token);\n  };\n\n  private formatPrice(price: string | undefined): string {\n    if (!price || price === '0') return '$0.00';\n    const numPrice = parseFloat(price);\n    if (numPrice < 0.01) return `$${numPrice.toFixed(6)}`;\n    if (numPrice < 1) return `$${numPrice.toFixed(4)}`;\n    return `$${numPrice.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;\n  }\n\n  private formatVolume(volume: number): string {\n    if (volume >= 1e9) return `$${(volume / 1e9).toFixed(2)}B`;\n    if (volume >= 1e6) return `$${(volume / 1e6).toFixed(2)}M`;\n    if (volume >= 1e3) return `$${(volume / 1e3).toFixed(2)}K`;\n    return `$${volume.toFixed(2)}`;\n  }\n\n  render() {\n    const activeTokens = this.storeTokens.length > 0 ? this.storeTokens : this.tokens;\n    const isLoading = (this.storeLoading || this.loading) && activeTokens.length === 0;\n    const paginatedTokens = this.getPaginatedTokens();\n    const uniqueChains = this.getUniqueChains();\n\n    console.log('🎨 Tokens render state:', {\n      activeTokens: activeTokens.length,\n      filteredTokens: this.filteredTokens.length,\n      paginatedTokens: paginatedTokens.length,\n      isLoading,\n      storeLoading: this.storeLoading,\n      loading: this.loading\n    });\n\n    return (\n      <div class=\"tokens-list\">\n        {/* Header */}\n        <div class=\"tokens-header\">\n          <h3 class=\"tokens-title\">{this.cardTitle}</h3>\n        </div>\n\n        {/* Filters */}\n        <tokens-filters\n          filters={this.filters}\n          chains={uniqueChains}\n          onFiltersChanged={this.handleFiltersChanged}\n        />\n\n        {/* Stats */}\n        <div class=\"tokens-stats\">\n          <div class=\"stat-item\">\n            <span class=\"stat-label\">Total Tokens</span>\n            <span class=\"stat-value\">{activeTokens.length}</span>\n          </div>\n          <div class=\"stat-item\">\n            <span class=\"stat-label\">Filtered</span>\n            <span class=\"stat-value\">{this.filteredTokens.length}</span>\n          </div>\n          <div class=\"stat-item\">\n            <span class=\"stat-label\">Chains</span>\n            <span class=\"stat-value\">{uniqueChains.length}</span>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div class=\"tokens-content\">\n          {isLoading ? (\n            <tokens-loading count={6} />\n          ) : paginatedTokens.length === 0 ? (\n            <div class=\"empty-state\">\n              <svg viewBox=\"0 0 64 64\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M31.968,0c-1.9626667,28.448-3.552,29.984-32,32c28.448,1.9626667,29.984,3.552,32,32c1.9626667-28.448,3.552-29.984,32-32C35.52,29.984,33.9306667,28.448,31.968,0z\"/>\n              </svg>\n              <span>No tokens found matching your criteria</span>\n            </div>\n          ) : (\n            <div class=\"tokens-grid\">\n              {paginatedTokens.map(token => (\n                <token-item\n                  key={token.tokenId}\n                  token={token}\n                  onClick={() => this.handleTokenClick(token)}\n                />\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* Pagination */}\n        {this.totalPages > 1 && (\n          <div class=\"pagination\">\n            <button\n              class=\"pagination-btn\"\n              onClick={() => this.handlePageChange(this.currentPage - 1)}\n              disabled={this.currentPage === 1}\n              type=\"button\"\n            >\n              Previous\n            </button>\n\n            <div class=\"pagination-pages\">\n              {Array.from({ length: this.totalPages }, (_, i) => i + 1).map(page => (\n                <button\n                  key={page}\n                  class={{\n                    'pagination-page': true,\n                    'pagination-page--active': page === this.currentPage,\n                  }}\n                  onClick={() => this.handlePageChange(page)}\n                  type=\"button\"\n                >\n                  {page}\n                </button>\n              ))}\n            </div>\n\n            <button\n              class=\"pagination-btn\"\n              onClick={() => this.handlePageChange(this.currentPage + 1)}\n              disabled={this.currentPage === this.totalPages}\n              type=\"button\"\n            >\n              Next\n            </button>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n"]}