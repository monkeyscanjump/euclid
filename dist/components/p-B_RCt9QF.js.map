{"file":"p-B_RCt9QF.js","mappings":"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","names":["__stencil_proxyCustomElement","HTMLElement"],"sources":["src/components/ui/euclid-modal/euclid-modal.css?tag=euclid-modal&encapsulation=shadow","src/components/ui/euclid-modal/euclid-modal.tsx"],"sourcesContent":[":host {\n  display: contents;\n}\n\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: var(--euclid-z-modal-backdrop);\n  background: var(--euclid-surface-overlay);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: var(--euclid-space-4);\n  animation: fadeIn var(--euclid-transition-base);\n  /* Ensure modal is above everything */\n  isolation: isolate;\n}\n\n.modal-container {\n  background: var(--euclid-surface);\n  border-radius: var(--euclid-radius-2xl);\n  box-shadow: var(--euclid-shadow-2xl);\n  border: var(--euclid-border-1) solid var(--euclid-border);\n  max-width: var(--euclid-modal-max-width-base);\n  width: 100%;\n  max-height: 90vh;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  animation: slideUp var(--euclid-transition-base);\n  /* Focus management */\n  outline: none;\n  /* Ensure proper stacking */\n  position: relative;\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: var(--euclid-space-6);\n  border-bottom: var(--euclid-border-1) solid var(--euclid-border);\n}\n\n.modal-title {\n  margin: 0;\n  font-size: var(--euclid-text-lg);\n  font-weight: var(--euclid-font-semibold);\n  color: var(--euclid-text-primary);\n}\n\n.close-button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: var(--euclid-space-8);\n  height: var(--euclid-space-8);\n  background: transparent;\n  border: none;\n  border-radius: var(--euclid-radius-lg);\n  color: var(--euclid-text-tertiary);\n  cursor: pointer;\n  transition: all var(--euclid-transition-fast);\n}\n\n.close-button:hover {\n  background: var(--euclid-surface-secondary);\n  color: var(--euclid-text-secondary);\n}\n\n.close-button svg {\n  width: var(--euclid-space-4);\n  height: var(--euclid-space-4);\n}\n\n.modal-content {\n  padding: var(--euclid-space-6);\n  overflow-y: auto;\n  flex: 1;\n}\n\n/* Animations */\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n@keyframes slideUp {\n  from {\n    opacity: 0;\n    transform: translateY(var(--euclid-space-8));\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n/* Responsive Design */\n@media (max-width: 640px) {\n  .modal-overlay {\n    padding: var(--euclid-space-2);\n  }\n\n  .modal-container {\n    max-width: 100%;\n  }\n\n  .modal-header,\n  .modal-content {\n    padding: var(--euclid-space-4);\n  }\n}\n\n@media (max-width: 480px) {\n  .modal-container {\n    width: 100%;\n    height: 100%;\n    max-height: 100vh;\n    border-radius: 0;\n  }\n\n  .modal-header {\n    padding: var(--euclid-space-3) var(--euclid-space-4);\n  }\n\n  .modal-title {\n    font-size: var(--euclid-text-base);\n  }\n\n  .modal-content {\n    padding: var(--euclid-space-3) var(--euclid-space-4);\n  }\n}\n\n/* Focus visible support */\n.close-button:focus-visible {\n  outline: 2px solid var(--euclid-border-focus);\n  outline-offset: 2px;\n}\n\n/* Accessibility */\n@media (prefers-reduced-motion: reduce) {\n  .modal-overlay,\n  .modal-container {\n    animation: none;\n  }\n}\n","import { Component, h, State, Listen, Element } from '@stencil/core';\nimport { appStore } from '../../../store/app.store';\n\n@Component({\n  tag: 'euclid-modal',\n  styleUrl: 'euclid-modal.css',\n  shadow: true,\n})\nexport class EuclidModal {\n  @Element() el!: HTMLElement;\n\n  @State() private appState = appStore.state;\n\n  private previousActiveElement: Element | null = null;\n  private previousBodyOverflow: string = '';\n  private previousBodyPaddingRight: string = '';\n  private scrollBarWidth: number = 0;\n\n  componentWillLoad() {\n    console.log('🚀 Modal componentWillLoad');\n    console.log('📊 Initial appState:', this.appState);\n    console.log('📊 Initial store state:', appStore.state);\n\n    // Calculate scrollbar width for body scroll prevention\n    this.scrollBarWidth = this.getScrollBarWidth();\n    console.log('📏 Scrollbar width:', this.scrollBarWidth);\n\n    appStore.onChange('walletModalOpen', () => {\n      console.log('👛 Wallet modal state changed:', appStore.state.walletModalOpen);\n      const wasOpen = this.appState.walletModalOpen || this.appState.tokenModalOpen;\n      const newState = { ...appStore.state };\n      const isNowOpen = newState.walletModalOpen || newState.tokenModalOpen;\n\n      this.appState = newState;\n\n      console.log('👛 Wallet modal state transition:', { wasOpen, isNowOpen });\n      this.handleModalStateChange(wasOpen, isNowOpen);\n    });\n\n    appStore.onChange('tokenModalOpen', () => {\n      console.log('🪙 Token modal state changed:', appStore.state.tokenModalOpen);\n      const wasOpen = this.appState.walletModalOpen || this.appState.tokenModalOpen;\n      const newState = { ...appStore.state };\n      const isNowOpen = newState.walletModalOpen || newState.tokenModalOpen;\n\n      this.appState = newState;\n\n      console.log('🪙 Token modal state transition:', { wasOpen, isNowOpen });\n      this.handleModalStateChange(wasOpen, isNowOpen);\n    });\n  }\n\n  componentDidLoad() {\n    console.log('🎬 componentDidLoad called');\n    // Handle initial state if modal is already open\n    const isOpen = this.appState.walletModalOpen || this.appState.tokenModalOpen;\n    console.log('🎬 componentDidLoad isOpen:', isOpen);\n    if (isOpen) {\n      console.log('🎬 componentDidLoad calling onModalOpen');\n      this.onModalOpen();\n    }\n  }\n\n  disconnectedCallback() {\n    // Cleanup when component is removed\n    this.onModalClose();\n  }\n\n  @Listen('keydown', { target: 'document' })\n  handleKeyDown(event: KeyboardEvent) {\n    const isOpen = this.appState.walletModalOpen || this.appState.tokenModalOpen;\n\n    if (!isOpen) return;\n\n    if (event.key === 'Escape') {\n      this.closeModal();\n    }\n\n    // Focus trapping\n    if (event.key === 'Tab') {\n      this.handleTabKey(event);\n    }\n  }\n\n  private closeModal() {\n    appStore.closeWalletModal();\n    appStore.closeTokenModal();\n  }\n\n  /**\n   * Calculate scrollbar width for cross-framework compatibility\n   */\n  private getScrollBarWidth(): number {\n    if (typeof window === 'undefined') return 0;\n\n    const outer = document.createElement('div');\n    outer.style.visibility = 'hidden';\n    outer.style.overflow = 'scroll';\n    document.body.appendChild(outer);\n\n    const inner = document.createElement('div');\n    outer.appendChild(inner);\n\n    const scrollbarWidth = outer.offsetWidth - inner.offsetWidth;\n    document.body.removeChild(outer);\n\n    return scrollbarWidth;\n  }\n\n  /**\n   * Handle modal state changes (opening/closing)\n   */\n  private handleModalStateChange(wasOpen: boolean, isNowOpen: boolean) {\n    console.log('🔄 handleModalStateChange:', { wasOpen, isNowOpen });\n\n    if (!wasOpen && isNowOpen) {\n      console.log('▶️ Opening modal');\n      this.onModalOpen();\n    } else if (wasOpen && !isNowOpen) {\n      console.log('⏹️ Closing modal');\n      this.onModalClose();\n    } else {\n      console.log('➡️ No state change needed');\n    }\n  }\n\n  /**\n   * SIMPLE AS FUCK body scroll prevention\n   */\n  private onModalOpen() {\n    console.log('🔒 onModalOpen called');\n\n    if (typeof window === 'undefined') {\n      console.log('❌ No window, returning');\n      return;\n    }\n\n    try {\n      // Store current active element\n      this.previousActiveElement = document.activeElement;\n      console.log('💾 Stored active element:', this.previousActiveElement);\n\n      // SIMPLE: Just lock the fucking body scroll\n      const body = document.body;\n      this.previousBodyOverflow = body.style.overflow || '';\n\n      body.style.overflow = 'hidden';\n\n      console.log('🔒 BODY SCROLL LOCKED!', {\n        previousOverflow: this.previousBodyOverflow,\n        newOverflow: body.style.overflow\n      });\n\n      // Focus the modal container\n      requestAnimationFrame(() => {\n        const modalContainer = this.el.shadowRoot?.querySelector('.modal-container') as HTMLElement;\n        if (modalContainer) {\n          modalContainer.focus();\n          console.log('🎯 Modal focused');\n        }\n      });\n\n    } catch (error) {\n      console.error('❌ Error in onModalOpen:', error);\n    }\n  }\n\n  /**\n   * SIMPLE AS FUCK restore body scroll\n   */\n  private onModalClose() {\n    console.log('🔓 onModalClose called');\n\n    if (typeof window === 'undefined') {\n      console.log('❌ No window, returning');\n      return;\n    }\n\n    try {\n      // SIMPLE: Just restore the fucking body scroll\n      const body = document.body;\n      body.style.overflow = this.previousBodyOverflow;\n\n      console.log('🔓 BODY SCROLL RESTORED!', {\n        restoredOverflow: this.previousBodyOverflow,\n        currentOverflow: body.style.overflow\n      });\n\n      // Restore focus to previous element\n      if (this.previousActiveElement && typeof (this.previousActiveElement as HTMLElement).focus === 'function') {\n        (this.previousActiveElement as HTMLElement).focus();\n        console.log('🎯 Focus restored to:', this.previousActiveElement);\n      }\n\n      this.previousActiveElement = null;\n\n    } catch (error) {\n      console.error('❌ Error in onModalClose:', error);\n    }\n  }\n\n  /**\n   * Focus trapping for accessibility\n   */\n  private handleTabKey(event: KeyboardEvent) {\n    const shadowRoot = this.el.shadowRoot;\n    if (!shadowRoot) return;\n\n    const modal = shadowRoot.querySelector('.modal-container');\n    if (!modal) return;\n\n    // Get all focusable elements within the modal (including shadow DOM elements)\n    const focusableElements = modal.querySelectorAll(\n      'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n    );\n\n    if (focusableElements.length === 0) return;\n\n    const firstElement = focusableElements[0] as HTMLElement;\n    const lastElement = focusableElements[focusableElements.length - 1] as HTMLElement;\n\n    // Check if current active element is within our shadow DOM\n    const activeElement = shadowRoot.activeElement || document.activeElement;\n\n    if (event.shiftKey) {\n      // Shift + Tab (backwards)\n      if (activeElement === firstElement || !modal.contains(activeElement)) {\n        lastElement?.focus();\n        event.preventDefault();\n      }\n    } else {\n      // Tab (forwards)\n      if (activeElement === lastElement || !modal.contains(activeElement)) {\n        firstElement?.focus();\n        event.preventDefault();\n      }\n    }\n  }\n\n  private handleOverlayClick = (event: MouseEvent) => {\n    if (event.target === event.currentTarget) {\n      this.closeModal();\n    }\n  };\n\n  render() {\n    const isOpen = this.appState.walletModalOpen || this.appState.tokenModalOpen;\n\n    console.log('🎭 Modal render called:', {\n      isOpen,\n      walletOpen: this.appState.walletModalOpen,\n      tokenOpen: this.appState.tokenModalOpen\n    });\n\n    if (!isOpen) {\n      console.log('🚫 Modal not open, returning null');\n      // Make sure scroll is restored if modal is closed\n      if (document.body.style.overflow === 'hidden') {\n        console.log('🔓 FORCE restoring scroll on closed modal');\n        document.body.style.overflow = this.previousBodyOverflow || '';\n      }\n      return null;\n    }\n\n    // FORCE scroll lock if modal is open (backup safety net)\n    if (document.body.style.overflow !== 'hidden') {\n      console.log('🔒 FORCE locking scroll in render');\n      this.previousBodyOverflow = document.body.style.overflow || '';\n      document.body.style.overflow = 'hidden';\n    }\n\n    let title = '';\n    let content = null;\n\n    if (this.appState.walletModalOpen) {\n      title = 'Connect Wallet';\n      content = <euclid-wallet-content />;\n      console.log('👛 Rendering wallet modal');\n    } else if (this.appState.tokenModalOpen) {\n      title = 'Select Token';\n      content = <euclid-token-content />;\n      console.log('🪙 Rendering token modal');\n    }\n\n    return (\n      <div\n        class=\"modal-overlay\"\n        onClick={this.handleOverlayClick}\n        role=\"dialog\"\n        aria-modal=\"true\"\n        aria-hidden=\"false\"\n      >\n        <div\n          class=\"modal-container\"\n          role=\"document\"\n          tabindex=\"-1\"\n          aria-labelledby=\"modal-title\"\n          aria-describedby=\"modal-content\"\n        >\n          <div class=\"modal-header\">\n            <h2\n              id=\"modal-title\"\n              class=\"modal-title\"\n            >\n              {title}\n            </h2>\n            <button\n              class=\"close-button\"\n              onClick={() => this.closeModal()}\n              type=\"button\"\n              aria-label=\"Close modal\"\n            >\n              <svg viewBox=\"0 0 24 24\" fill=\"currentColor\" aria-hidden=\"true\">\n                <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z\"/>\n              </svg>\n            </button>\n          </div>\n\n          <div\n            id=\"modal-content\"\n            class=\"modal-content\"\n          >\n            {content}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n"],"version":3}