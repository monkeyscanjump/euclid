import{r as e,c as t,h as i,H as a,d as s}from"./p-KvMX95QM.js";import{a as o,w as r,b as n,m as l,D as c,E as d,l as u,c as h,s as p,d as f,e as v}from"./p-BxhOwSSQ.js";import{m}from"./p-BZ6fXqkj.js";const b=":host{display:block;width:100%}.address-book{background:var(--euclid-surface);border:var(--euclid-border-1) solid var(--euclid-border);border-radius:var(--euclid-radius-lg);overflow:hidden}.address-book-header{display:flex;justify-content:space-between;align-items:center;padding:var(--euclid-space-4);border-bottom:var(--euclid-border-1) solid var(--euclid-border);background:var(--euclid-surface-secondary)}.address-book-header h2{margin:0;font-size:var(--euclid-text-lg);font-weight:var(--euclid-font-semibold);color:var(--euclid-text-primary)}.address-form{background:var(--euclid-surface-tertiary);border-bottom:var(--euclid-border-1) solid var(--euclid-border);padding:var(--euclid-space-4)}.form-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--euclid-space-4)}.form-header h3{margin:0;font-size:var(--euclid-text-base);font-weight:var(--euclid-font-medium);color:var(--euclid-text-primary)}.close-btn{background:transparent;border:none;font-size:var(--euclid-text-lg);color:var(--euclid-text-tertiary);cursor:pointer;padding:var(--euclid-space-1);border-radius:var(--euclid-radius-sm);transition:all var(--euclid-transition-fast)}.close-btn:hover{background:var(--euclid-surface-secondary);color:var(--euclid-text-secondary)}.form-fields{display:grid;gap:var(--euclid-space-3);margin-bottom:var(--euclid-space-4)}.field{display:flex;flex-direction:column;gap:var(--euclid-space-1)}.field label{font-size:var(--euclid-text-sm);font-weight:var(--euclid-font-medium);color:var(--euclid-text-secondary)}.field input,.field select{padding:var(--euclid-space-2) var(--euclid-space-3);border:var(--euclid-border-1) solid var(--euclid-border);border-radius:var(--euclid-radius-md);background:var(--euclid-surface);color:var(--euclid-text-primary);font-size:var(--euclid-text-sm);transition:border-color var(--euclid-transition-fast)}.field input:focus,.field select:focus{outline:none;border-color:var(--euclid-border-focus)}.form-actions{display:flex;gap:var(--euclid-space-2);justify-content:flex-end}.address-list{max-height:400px;overflow-y:auto}.chain-group{margin-bottom:var(--euclid-space-4)}.chain-group:last-child{margin-bottom:0}.chain-header{display:flex;justify-content:space-between;align-items:center;padding:var(--euclid-space-3) var(--euclid-space-4);background:var(--euclid-surface-secondary);border-bottom:var(--euclid-border-1) solid var(--euclid-border);position:sticky;top:0;z-index:1}.chain-info{display:flex;align-items:center;gap:var(--euclid-space-3)}.chain-logo{width:2rem;height:2rem;border-radius:var(--euclid-radius-md);object-fit:cover}.chain-logo-placeholder{width:2rem;height:2rem;display:flex;align-items:center;justify-content:center;background:var(--euclid-surface-tertiary);border-radius:var(--euclid-radius-md);font-size:var(--euclid-text-sm)}.chain-details{display:flex;flex-direction:column;gap:var(--euclid-space-1)}.chain-name{font-weight:var(--euclid-font-semibold);color:var(--euclid-text-primary);font-size:var(--euclid-text-sm)}.chain-type{font-size:var(--euclid-text-xs);color:var(--euclid-text-tertiary);text-transform:uppercase;letter-spacing:0.5px}.chain-count{font-size:var(--euclid-text-xs);color:var(--euclid-text-tertiary);background:var(--euclid-surface-tertiary);padding:var(--euclid-space-1) var(--euclid-space-2);border-radius:var(--euclid-radius-full);font-weight:var(--euclid-font-medium)}.chain-addresses{background:var(--euclid-surface)}.address-item{display:flex;justify-content:space-between;align-items:center;padding:var(--euclid-space-3) var(--euclid-space-4);border-bottom:var(--euclid-border-1) solid var(--euclid-border-subtle);cursor:pointer;transition:background-color var(--euclid-transition-fast)}.address-item:hover{background:var(--euclid-surface-secondary)}.address-item--active{background:var(--euclid-primary-50);border-left:3px solid var(--euclid-primary-500)}.address-item:last-child{border-bottom:none}.address-main{display:flex;justify-content:space-between;align-items:center;flex:1}.address-info{display:flex;flex-direction:column;gap:var(--euclid-space-1)}.address-label{display:flex;align-items:center;gap:var(--euclid-space-2);font-weight:var(--euclid-font-medium);color:var(--euclid-text-primary);font-size:var(--euclid-text-sm)}.active-badge{background:var(--euclid-success-100);color:var(--euclid-success-700);padding:2px var(--euclid-space-1);border-radius:var(--euclid-radius-sm);font-size:var(--euclid-text-xs);font-weight:var(--euclid-font-medium)}.address-value{font-family:var(--euclid-font-mono);font-size:var(--euclid-text-sm);color:var(--euclid-text-secondary)}.address-meta{display:flex;gap:var(--euclid-space-2);font-size:var(--euclid-text-xs);color:var(--euclid-text-tertiary)}.address-meta span{padding:2px var(--euclid-space-1);background:var(--euclid-surface-tertiary);border-radius:var(--euclid-radius-sm)}.address-balance{text-align:right}.balance-value{font-weight:var(--euclid-font-medium);color:var(--euclid-text-primary);font-size:var(--euclid-text-sm)}.address-actions{display:flex;gap:var(--euclid-space-1);margin-left:var(--euclid-space-2)}.action-btn{background:transparent;border:none;padding:var(--euclid-space-1);border-radius:var(--euclid-radius-sm);cursor:pointer;font-size:var(--euclid-text-sm);color:var(--euclid-text-tertiary);transition:all var(--euclid-transition-fast)}.action-btn:hover{background:var(--euclid-surface-secondary);color:var(--euclid-text-secondary)}.action-btn--danger:hover{background:var(--euclid-error-100);color:var(--euclid-error-700)}.empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--euclid-space-8);text-align:center;color:var(--euclid-text-tertiary)}.empty-state svg{width:var(--euclid-space-12);height:var(--euclid-space-12);margin-bottom:var(--euclid-space-4);opacity:0.5}.empty-state span{font-size:var(--euclid-text-base);margin-bottom:var(--euclid-space-4)}.address-book-footer{padding:var(--euclid-space-3) var(--euclid-space-4);border-top:var(--euclid-border-1) solid var(--euclid-border-subtle);background:var(--euclid-surface-secondary)}.stats{font-size:var(--euclid-text-xs);color:var(--euclid-text-tertiary);text-align:center}@media (max-width: 640px){.address-item{flex-direction:column;align-items:flex-start;gap:var(--euclid-space-2)}.address-main{width:100%}.address-actions{margin-left:0;align-self:flex-end}.form-actions{flex-direction:column}.form-actions euclid-button{width:100%}}";const g=class{constructor(i){e(this,i);this.addressSelected=t(this,"addressSelected");this.addressAdded=t(this,"addressAdded");this.addressUpdated=t(this,"addressUpdated");this.addressRemoved=t(this,"addressRemoved");this.savedAddresses=[];this.isEditing=false;this.editingAddress=null;this.newAddressForm={};this.showActiveOnly=false;this.allowEditing=true;this.showBalances=true;this.handleAddAddress=()=>{this.isEditing=true;this.editingAddress=null;this.newAddressForm={address:"",chainUID:"",walletType:"manual",label:""}};this.handleEditAddress=e=>{this.isEditing=true;this.editingAddress=e;this.newAddressForm={...e}};this.handleSaveAddress=()=>{if(!this.newAddressForm.address||!this.newAddressForm.label){return}if(this.editingAddress){const e=this.savedAddresses.findIndex((e=>e.id===this.editingAddress.id));if(e!==-1){this.savedAddresses[e]={...this.editingAddress,...this.newAddressForm};this.addressUpdated.emit(this.savedAddresses[e])}}else{const e={id:`manual-${Date.now()}`,address:this.newAddressForm.address,chainUID:this.newAddressForm.chainUID||"ethereum",walletType:this.newAddressForm.walletType||"manual",label:this.newAddressForm.label,isActive:false,addedAt:new Date};this.savedAddresses=[...this.savedAddresses,e];this.addressAdded.emit(e)}this.saveAddresses();this.handleCancelEdit()};this.handleCancelEdit=()=>{this.isEditing=false;this.editingAddress=null;this.newAddressForm={}};this.handleRemoveAddress=e=>{this.savedAddresses=this.savedAddresses.filter((t=>t.id!==e.id));this.saveAddresses();this.addressRemoved.emit(e)};this.handleSelectAddress=e=>{e.lastUsed=new Date;this.saveAddresses();this.addressSelected.emit(e)};this.handleConnectWallet=()=>{console.log("📇 Opening wallet connection modal...");o.openWalletModal()};this.handleSyncClick=()=>{console.log("🔄 Manual sync triggered");this.syncWithConnectedWallets()};this.debugWalletStore=()=>{console.log("🔍 DEBUG: Wallet Store State");console.log("- isConnected:",r.state.isConnected);console.log("- connectedWallets:",r.state.connectedWallets);console.log("- connectedWallets type:",typeof r.state.connectedWallets);console.log("- connectedWallets instanceof Map:",r.state.connectedWallets instanceof Map);if(r.state.connectedWallets instanceof Map){console.log("- Map size:",r.state.connectedWallets.size);console.log("- Map entries:",Array.from(r.state.connectedWallets.entries()))}else{console.log("- Object keys:",Object.keys(r.state.connectedWallets||{}));console.log("- Object entries:",Object.entries(r.state.connectedWallets||{}))}console.log("- Full state:",r.state)};this.debugMarketStore=()=>{console.log("🌐 DEBUG: Market Store - Available Chains");console.log("- chains:",m.state.chains);console.log("- chains count:",m.state.chains.length);console.log("- tokens count:",m.state.tokens.length);console.log("- loading:",m.state.loading);m.state.chains.forEach(((e,t)=>{console.log(`Chain ${t+1}:`,{chainUID:e.chain_uid,displayName:e.display_name,chainId:e.chain_id,logo:e.logo,type:e.type})}))}}componentWillLoad(){this.loadSavedAddresses();this.syncWithConnectedWallets();r.onChange("connectedWallets",(()=>{console.log("📇 Address book detected connectedWallets change, syncing...");this.syncWithConnectedWallets()}));r.onChange("isConnected",(()=>{console.log("📇 Address book detected isConnected state change");this.syncWithConnectedWallets()}));r.onChange("wallets",(()=>{console.log("📇 Address book detected wallets map change, syncing...");this.syncWithConnectedWallets()}))}handleWalletConnectSuccess(){console.log("📇 Address book received wallet connect success event, syncing...");this.syncWithConnectedWallets()}async loadSavedAddresses(){try{const e=await n.getAddressBook();this.savedAddresses=e.map((e=>({...e,addedAt:new Date(e.addedAt),lastUsed:e.lastUsed?new Date(e.lastUsed):undefined})))}catch(e){console.error("Failed to load saved addresses from IndexedDB:",e);try{const e=localStorage.getItem("euclid-address-book");if(e){this.savedAddresses=JSON.parse(e).map((e=>({...e,addedAt:new Date(e.addedAt),lastUsed:e.lastUsed?new Date(e.lastUsed):undefined})));await this.saveAddresses();localStorage.removeItem("euclid-address-book");console.log("📇 Migrated address book from localStorage to IndexedDB")}}catch(e){console.error("Failed to load addresses from localStorage:",e);this.savedAddresses=[]}}}async saveAddresses(){try{await n.setAddressBook(this.savedAddresses)}catch(e){console.error("Failed to save addresses to IndexedDB:",e);try{localStorage.setItem("euclid-address-book",JSON.stringify(this.savedAddresses));console.warn("📇 Fallback: Saved addresses to localStorage instead")}catch(e){console.error("Failed to save addresses to localStorage fallback:",e)}}}syncWithConnectedWallets(){const e=r.state.connectedWallets;let t=false;console.log("📇 Address Book - Full wallet store state:",{isConnected:r.state.isConnected,address:r.state.address,connectedWallets:e,connectedWalletsType:typeof e,isMap:e instanceof Map,mapSize:e instanceof Map?e.size:"N/A"});let i=[];if(e instanceof Map){i=Array.from(e.entries())}else if(typeof e==="object"&&e!==null){i=Object.entries(e)}if(r.state.isConnected&&r.state.address&&i.length===0){console.log("📇 Found primary wallet connection, adding to entries");i.push([r.state.chainUID||"primary",{address:r.state.address,walletType:r.state.walletType||"unknown",name:r.state.walletType||"Primary Wallet"}])}console.log("📇 Syncing with connected wallets:",i.length,"found",i);i.forEach((([e,i])=>{const a=this.savedAddresses.find((t=>t.address===i.address&&t.chainUID===e));if(!a){const a={id:`${e}-${i.address}-${Date.now()}`,address:i.address,chainUID:e,walletType:i.walletType||i.type||"unknown",label:`${i.name||i.walletType||"Wallet"} (${e})`,isActive:true,addedAt:new Date,lastUsed:new Date};this.savedAddresses=[...this.savedAddresses,a];t=true;console.log("📝 Auto-saved new wallet address:",a);this.addressAdded.emit(a)}else{if(!a.isActive||!a.lastUsed){a.isActive=true;a.lastUsed=new Date;t=true}}}));this.savedAddresses.forEach((e=>{const a=i.some((([t,i])=>i.address===e.address&&t===e.chainUID));if(!a&&e.isActive){e.isActive=false;t=true}}));if(t){this.saveAddresses();this.savedAddresses=[...this.savedAddresses]}}formatAddress(e){return`${e.slice(0,6)}...${e.slice(-4)}`}getDisplayedAddresses(){let e=this.savedAddresses;if(this.showActiveOnly){e=e.filter((e=>e.isActive))}return e.sort(((e,t)=>{if(e.isActive!==t.isActive){return t.isActive?1:-1}if(e.lastUsed&&t.lastUsed){return t.lastUsed.getTime()-e.lastUsed.getTime()}if(e.lastUsed&&!t.lastUsed)return-1;if(!e.lastUsed&&t.lastUsed)return 1;return t.addedAt.getTime()-e.addedAt.getTime()}))}getChainInfo(e){return m.state.chains.find((t=>t.chain_uid===e))}getGroupedAddresses(){const e=this.getDisplayedAddresses();const t={};e.forEach((e=>{if(!t[e.chainUID]){t[e.chainUID]=[]}t[e.chainUID].push(e)}));return t}renderAddressForm(){return i("div",{class:"address-form"},i("div",{class:"form-header"},i("h3",null,this.editingAddress?"Edit Address":"Add Address"),i("button",{class:"close-btn",onClick:this.handleCancelEdit,type:"button"},"✕")),i("div",{class:"form-fields"},i("div",{class:"field"},i("label",null,"Label"),i("input",{type:"text",placeholder:"e.g., My Main Wallet",value:this.newAddressForm.label||"",onInput:e=>{this.newAddressForm={...this.newAddressForm,label:e.target.value}}})),i("div",{class:"field"},i("label",null,"Address"),i("input",{type:"text",placeholder:"0x... or cosmos...",value:this.newAddressForm.address||"",onInput:e=>{this.newAddressForm={...this.newAddressForm,address:e.target.value}}})),i("div",{class:"field"},i("label",null,"Chain"),i("select",{onInput:e=>{this.newAddressForm={...this.newAddressForm,chainUID:e.target.value}}},i("option",{value:"ethereum"},"Ethereum"),i("option",{value:"polygon"},"Polygon"),i("option",{value:"arbitrum"},"Arbitrum"),i("option",{value:"bsc"},"BSC"),i("option",{value:"cosmoshub-4"},"Cosmos Hub"),i("option",{value:"osmosis-1"},"Osmosis")))),i("div",{class:"form-actions"},i("euclid-button",{variant:"secondary",onClick:this.handleCancelEdit},"Cancel"),i("euclid-button",{variant:"primary",onClick:this.handleSaveAddress,disabled:!this.newAddressForm.address||!this.newAddressForm.label},this.editingAddress?"Update":"Add"," Address")))}render(){return i("div",{key:"c8e33fd1b6761957540d44356cfc515f1e65c4df",class:"address-book"},i("div",{key:"399ecaad3c85b5e05a51a36222082a7c5465379b",class:"address-book-header"},i("h2",{key:"08ebf051e16553f8fbadbe60ae260c23dddabb7a"},"Address Book"),i("div",{key:"3e485cfe3500de4ee441e3f96d1edfe28e497209",class:"header-actions"},i("euclid-button",{key:"fdfedb42303c823ca68c3f62e50102f84c458931",variant:"ghost",size:"sm",onClick:()=>this.syncWithConnectedWallets()},"🔄 Sync"),i("euclid-button",{key:"c208c5401890f54070d24a01f94483556c03e16a",variant:"ghost",size:"sm",onClick:this.debugWalletStore},"🔍 Wallet Debug"),i("euclid-button",{key:"1a87fe30ca4f561912bca3d6bb88885e0b9251da",variant:"ghost",size:"sm",onClick:this.debugMarketStore},"🌐 Chains Debug"),i("euclid-button",{key:"8450e0ec69e74d2e8cafa0d8018b3dc92e02e719",variant:"secondary",size:"sm",onClick:this.handleConnectWallet},"🔗 Connect Wallet"),this.allowEditing&&i("euclid-button",{key:"2b669a3099270e6f85f8b061308e639f7f1d9ed8",variant:"primary",size:"sm",onClick:this.handleAddAddress},"+ Add Address"))),this.isEditing&&this.renderAddressForm(),i("div",{key:"d2c259f84ebcf20aa1076e27661049d556d907fb",class:"address-list"},this.getDisplayedAddresses().length===0?i("div",{class:"empty-state"},i("svg",{viewBox:"0 0 24 24",fill:"currentColor"},i("path",{d:"M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,17A1.5,1.5 0 0,0 13.5,15.5A1.5,1.5 0 0,0 12,14A1.5,1.5 0 0,0 10.5,15.5A1.5,1.5 0 0,0 12,17M12,10.5C12.8,10.5 13.5,9.8 13.5,9C13.5,8.2 12.8,7.5 12,7.5C11.2,7.5 10.5,8.2 10.5,9C10.5,9.8 11.2,10.5 12,10.5Z"})),i("span",null,"No addresses saved yet"),i("div",{class:"empty-actions"},i("euclid-button",{variant:"primary",onClick:this.handleConnectWallet},"🔗 Connect Wallet"),this.allowEditing&&i("euclid-button",{variant:"ghost",onClick:this.handleAddAddress},"Or add manually"))):Object.entries(this.getGroupedAddresses()).map((([e,t])=>{const a=this.getChainInfo(e);return i("div",{key:e,class:"chain-group"},i("div",{class:"chain-header"},i("div",{class:"chain-info"},a?i("img",{src:a.logo,alt:a.display_name,class:"chain-logo"}):i("div",{class:"chain-logo-placeholder"},"⛓️"),i("div",{class:"chain-details"},i("div",{class:"chain-name"},a?a.display_name:e),i("div",{class:"chain-type"},a?a.type.toUpperCase():"UNKNOWN"))),i("div",{class:"chain-count"},t.length," wallet",t.length!==1?"s":"")),i("div",{class:"chain-addresses"},t.map((e=>i("div",{key:e.id,class:{"address-item":true,"address-item--active":e.isActive},onClick:()=>this.handleSelectAddress(e)},i("div",{class:"address-main"},i("div",{class:"address-info"},i("div",{class:"address-label"},e.label,e.isActive&&i("span",{class:"active-badge"},"Active")),i("div",{class:"address-value"},this.formatAddress(e.address)),i("div",{class:"address-meta"},i("span",{class:"wallet-type"},e.walletType),e.lastUsed&&i("span",{class:"last-used"},"Last used ",e.lastUsed.toLocaleDateString()))),this.showBalances&&e.balance&&i("div",{class:"address-balance"},i("span",{class:"balance-value"},e.balance))),this.allowEditing&&i("div",{class:"address-actions"},i("button",{class:"action-btn",onClick:t=>{t.stopPropagation();this.handleEditAddress(e)},type:"button",title:"Edit address"},"✎"),i("button",{class:"action-btn action-btn--danger",onClick:t=>{t.stopPropagation();this.handleRemoveAddress(e)},type:"button",title:"Remove address"},"🗑")))))))}))),i("div",{key:"7b939494865b5abff02410e26977d9873abcb015",class:"address-book-footer"},i("div",{key:"af3a4c338a70e50e212164f9329d838aeda84701",class:"stats"},i("span",{key:"ace081e98a672d2df93e8305d0edf4eb87215b14"},this.getDisplayedAddresses().length," addresses"),this.getDisplayedAddresses().filter((e=>e.isActive)).length>0&&i("span",{key:"cc15bfb32367559465db9f2e3db269f868590bae"},"• ",this.getDisplayedAddresses().filter((e=>e.isActive)).length," active"))))}};g.style=b;const y=":host{display:inline-block}.euclid-button{display:inline-flex;align-items:center;justify-content:center;gap:var(--euclid-space-2);font-family:var(--euclid-font-sans);font-weight:var(--euclid-button-font-weight);text-decoration:none;cursor:pointer;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;transition:var(--euclid-button-transition);border:var(--euclid-border-1) solid transparent;border-radius:var(--euclid-button-border-radius);position:relative;overflow:hidden;outline:none;vertical-align:middle}.euclid-button:focus-visible{outline:2px solid var(--euclid-interactive-primary);outline-offset:2px}.euclid-button--sm{padding:var(--euclid-space-2) var(--euclid-space-3);font-size:var(--euclid-text-sm);min-height:var(--euclid-space-8);line-height:var(--euclid-leading-tight)}.euclid-button--md{padding:var(--euclid-space-3) var(--euclid-space-4);font-size:var(--euclid-text-base);min-height:var(--euclid-space-10);line-height:var(--euclid-leading-normal)}.euclid-button--lg{padding:var(--euclid-space-4) var(--euclid-space-6);font-size:var(--euclid-text-lg);min-height:var(--euclid-space-12);line-height:var(--euclid-leading-normal)}.euclid-button--primary{background-color:var(--euclid-interactive-primary);color:var(--euclid-text-inverse);box-shadow:var(--euclid-button-shadow)}.euclid-button--primary:hover:not(.euclid-button--disabled):not(.euclid-button--loading){background-color:var(--euclid-interactive-primary-hover);box-shadow:var(--euclid-button-shadow-hover);transform:translateY(-1px)}.euclid-button--primary:active:not(.euclid-button--disabled):not(.euclid-button--loading){background-color:var(--euclid-interactive-primary-active);transform:translateY(0);box-shadow:var(--euclid-button-shadow)}.euclid-button--secondary{background-color:var(--euclid-surface);color:var(--euclid-text-primary);border-color:var(--euclid-border);box-shadow:var(--euclid-button-shadow)}.euclid-button--secondary:hover:not(.euclid-button--disabled):not(.euclid-button--loading){background-color:var(--euclid-surface-secondary);border-color:var(--euclid-border-hover);box-shadow:var(--euclid-button-shadow-hover);transform:translateY(-1px)}.euclid-button--secondary:active:not(.euclid-button--disabled):not(.euclid-button--loading){background-color:var(--euclid-background-secondary);transform:translateY(0)}.euclid-button--danger{background-color:var(--euclid-danger-600);color:var(--euclid-text-inverse);box-shadow:var(--euclid-button-shadow)}.euclid-button--danger:hover:not(.euclid-button--disabled):not(.euclid-button--loading){background-color:var(--euclid-danger-700);box-shadow:var(--euclid-button-shadow-hover);transform:translateY(-1px)}.euclid-button--danger:active:not(.euclid-button--disabled):not(.euclid-button--loading){background-color:var(--euclid-danger-700);transform:translateY(0);box-shadow:var(--euclid-button-shadow)}.euclid-button--ghost{background-color:transparent;color:var(--euclid-text-secondary);border-color:transparent}.euclid-button--ghost:hover:not(.euclid-button--disabled):not(.euclid-button--loading){background-color:var(--euclid-surface-secondary);color:var(--euclid-text-primary)}.euclid-button--ghost:active:not(.euclid-button--disabled):not(.euclid-button--loading){background-color:var(--euclid-background-secondary)}.euclid-button--disabled{opacity:0.5;cursor:not-allowed;transform:none !important;box-shadow:none !important}.euclid-button--loading{cursor:default;pointer-events:none}.euclid-button--full-width{width:100%}.euclid-button__content{display:flex;align-items:center;justify-content:center;gap:var(--euclid-space-2);transition:opacity var(--euclid-transition-fast)}.euclid-button__content--hidden{opacity:0}.euclid-button__spinner{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);display:flex;align-items:center;justify-content:center}.euclid-button__spinner-icon{width:1rem;height:1rem;animation:euclid-spin 1s linear infinite;border:2px solid currentColor;border-top-color:transparent;border-radius:var(--euclid-radius-full)}.euclid-button--sm .euclid-button__spinner-icon{width:0.875rem;height:0.875rem}.euclid-button--lg .euclid-button__spinner-icon{width:1.25rem;height:1.25rem}@media (prefers-contrast: high){.euclid-button{border-width:var(--euclid-border-2)}.euclid-button--primary{border-color:var(--euclid-interactive-primary)}.euclid-button--secondary{border-color:var(--euclid-text-primary)}.euclid-button--danger{border-color:var(--euclid-danger-600)}}@media (prefers-reduced-motion: reduce){.euclid-button{transition:none}.euclid-button:hover{transform:none}.euclid-button__spinner-icon{animation:none}}@media (pointer: coarse){.euclid-button--sm{min-height:var(--euclid-space-10);padding:var(--euclid-space-2_5) var(--euclid-space-4)}.euclid-button--md{min-height:var(--euclid-space-12);padding:var(--euclid-space-3_5) var(--euclid-space-5)}.euclid-button--lg{min-height:var(--euclid-space-16);padding:var(--euclid-space-5) var(--euclid-space-7)}}";const x=class{constructor(t){e(this,t);this.variant="primary";this.size="md";this.loading=false;this.disabled=false;this.fullWidth=false;this.type="button";this.handleClick=e=>{if(this.disabled||this.loading){e.preventDefault();e.stopPropagation();return}}}render(){const e={"euclid-button":true,[`euclid-button--${this.variant}`]:true,[`euclid-button--${this.size}`]:true,"euclid-button--loading":this.loading,"euclid-button--disabled":this.disabled,"euclid-button--full-width":this.fullWidth};const t={class:e,disabled:this.disabled||this.loading,onClick:this.handleClick,"aria-busy":this.loading?"true":"false"};if(this.href&&!this.disabled&&!this.loading){return i(a,null,i("a",{href:this.href,class:e,role:"button","aria-busy":this.loading?"true":"false"},this.loading&&i("span",{class:"euclid-button__spinner","aria-hidden":"true"},i("svg",{viewBox:"0 0 24 24",class:"euclid-button__spinner-icon"},i("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2",fill:"none","stroke-linecap":"round","stroke-dasharray":"60","stroke-dashoffset":"60"}))),i("span",{class:{"euclid-button__content":true,"euclid-button__content--hidden":this.loading}},i("slot",null))))}return i(a,null,i("button",{type:this.type,...t},this.loading&&i("span",{class:"euclid-button__spinner","aria-hidden":"true"},i("svg",{viewBox:"0 0 24 24",class:"euclid-button__spinner-icon"},i("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2",fill:"none","stroke-linecap":"round","stroke-dasharray":"60","stroke-dashoffset":"60"}))),i("span",{class:{"euclid-button__content":true,"euclid-button__content--hidden":this.loading}},i("slot",null))))}};x.style=y;const k=class{constructor(t){e(this,t);this.environment="testnet"}componentWillLoad(){this.euclidConfig=this.computeConfiguration();this.provideConfigToChildren()}computeConfiguration(){let e={...c};if(this.environment&&d[this.environment]){e=l(e,d[this.environment])}const t={};if(this.graphqlEndpoint)t.graphqlEndpoint=this.graphqlEndpoint;if(this.restEndpoint)t.restEndpoint=this.restEndpoint;if(this.apiTimeout!==undefined)t.apiTimeout=this.apiTimeout;if(this.defaultChain)t.defaultChain=this.defaultChain;if(this.defaultWallet)t.defaultWallet=this.defaultWallet;if(this.supportedChains){t.supportedChains=this.supportedChains.split(",").map((e=>e.trim()))}if(this.supportedWallets){t.supportedWallets=this.supportedWallets.split(",").map((e=>e.trim()))}if(this.defaultSlippage!==undefined){t.ui={...e.ui,defaultSlippage:this.defaultSlippage}}if(this.refreshIntervals){try{t.refreshIntervals=JSON.parse(this.refreshIntervals)}catch(e){console.warn("Invalid refreshIntervals JSON, using defaults:",e)}}if(this.featureFlags){try{t.features=JSON.parse(this.featureFlags)}catch(e){console.warn("Invalid featureFlags JSON, using defaults:",e)}}return l(e,t)}provideConfigToChildren(){globalThis.__euclidConfig=this.euclidConfig;window.dispatchEvent(new CustomEvent("euclid:config-updated",{detail:{config:this.euclidConfig}}))}render(){return i(a,{key:"4aaa60cd43122cab9a62a683f8db399974e019db"},i("div",{key:"6d6d008b2784a61ab97d8fa643205351af9e7130",class:"euclid-config-provider"},i("slot",{key:"9373ee84c00964388e132473e4642675e607d3a8"})))}};const w={CONNECT_REQUEST:"euclid:wallet:connect-request",CONNECT_SUCCESS:"euclid:wallet:connect-success",CONNECT_FAILED:"euclid:wallet:connect-failed",DISCONNECT_SUCCESS:"euclid:wallet:disconnect-success"};const C={EXECUTE_REQUEST:"euclid:swap:execute-request",EXECUTE_SUCCESS:"euclid:swap:execute-success",EXECUTE_FAILED:"euclid:swap:execute-failed"};const S={ADD_REQUEST:"euclid:liquidity:add-request",ADD_SUCCESS:"euclid:liquidity:add-success",ADD_FAILED:"euclid:liquidity:add-failed",REMOVE_REQUEST:"euclid:liquidity:remove-request",REMOVE_SUCCESS:"euclid:liquidity:remove-success",REMOVE_FAILED:"euclid:liquidity:remove-failed",POSITIONS_REFRESH:"euclid:liquidity:positions-refresh"};const z={SUBMITTED:"euclid:transaction:submitted",FINALIZED:"euclid:transaction:finalized",TIMEOUT:"euclid:transaction:timeout",STATS_RESPONSE:"euclid:transaction:stats-response"};const T={LOAD_INITIAL:"euclid:market:load-initial",TOKEN_DETAILS_SUCCESS:"euclid:market:token-details-success",TOKEN_DETAILS_FAILED:"euclid:market:token-details-failed",CHAIN_DETAILS_SUCCESS:"euclid:market:chain-details-success",CHAIN_DETAILS_FAILED:"euclid:market:chain-details-failed",ESCROWS_LOADED:"euclid:market:escrows-loaded"};const A={REFRESH_DATA:"euclid:user:refresh-data",CONTROLLER_READY:"euclid:user:controller-ready",BALANCES_REFRESH:"euclid:user:balances-refresh"};const M={TOKEN_SELECTED:"euclid:ui:token-selected"};const _={WALLET:w,SWAP:C,LIQUIDITY:S,TRANSACTION:z,MARKET:T,USER:A,UI:M};function I(e,t){return new CustomEvent(e,{detail:t})}function D(e,t){window.dispatchEvent(I(e,t))}const q=":host{display:block;width:100%;height:100%}.euclid-loading{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:200px;padding:var(--euclid-spacing-8);text-align:center;color:var(--euclid-text-secondary);font-family:var(--euclid-font-family-sans)}.loading-spinner{width:var(--euclid-spacing-8);height:var(--euclid-spacing-8);border:3px solid var(--euclid-border);border-top:3px solid var(--euclid-interactive-primary);border-radius:50%;animation:euclid-spin 1s linear infinite;margin-bottom:var(--euclid-spacing-4)}.euclid-loading p{margin:0;font-size:var(--euclid-text-size-sm);font-weight:var(--euclid-font-weight-medium)}.euclid-provider-content{width:100%;height:100%}euclid-wallet-controller,euclid-market-data-controller,euclid-user-data-controller{display:none}";const P=class{constructor(t){e(this,t);this.isInitialized=false;this.environment="testnet";this.handleWalletConnectFromModal=e=>{const{provider:t,chainId:i}=e.detail;console.log("🔗 Wallet connection request from modal:",t.type,i);D(_.WALLET.CONNECT_REQUEST,{chainUID:i||"ethereum",walletType:t.type});o.closeWalletModal()};this.handleTokenSelectFromModal=e=>{const{token:t}=e.detail;console.log("🪙 Token selection from modal:",t.symbol);D(_.UI.TOKEN_SELECTED,{tokenId:t.id,data:t});o.closeTokenModal()}}async componentWillLoad(){this.euclidConfig=this.computeConfiguration()}async componentDidLoad(){await this.initialize()}computeConfiguration(){let e={...c};if(this.environment&&d[this.environment]){e=l(e,d[this.environment])}const t={};if(this.graphqlEndpoint)t.graphqlEndpoint=this.graphqlEndpoint;if(this.restEndpoint)t.restEndpoint=this.restEndpoint;if(this.apiTimeout!==undefined)t.apiTimeout=this.apiTimeout;if(this.defaultChain)t.defaultChain=this.defaultChain;if(this.defaultWallet)t.defaultWallet=this.defaultWallet;if(this.supportedChains){t.supportedChains=this.supportedChains.split(",").map((e=>e.trim()))}if(this.supportedWallets){t.supportedWallets=this.supportedWallets.split(",").map((e=>e.trim()))}if(this.defaultSlippage!==undefined){t.ui={...e.ui,defaultSlippage:this.defaultSlippage}}if(this.refreshIntervals){try{t.refreshIntervals=JSON.parse(this.refreshIntervals)}catch(e){console.warn("Invalid refreshIntervals JSON, using defaults:",e)}}if(this.featureFlags){try{t.features=JSON.parse(this.featureFlags)}catch(e){console.warn("Invalid featureFlags JSON, using defaults:",e)}}return l(e,t)}async initialize(){console.log("🌌 Initializing Euclid Protocol Core Provider...");o.initialize();r.initialize();await this.loadInitialMarketData();this.isInitialized=true;console.log("✅ Euclid Protocol Core Provider initialized successfully")}async loadInitialMarketData(){console.log("📊 Delegating initial market data loading to Market Data Controller...");D(_.MARKET.LOAD_INITIAL)}handleWalletConnect(e){console.log("🔗 Wallet connection event received:",e.detail)}handleWalletDisconnect(e){console.log("🔌 Wallet disconnection event received:",e.detail)}render(){return i(a,{key:"2c33ecefde8433d7880895b58a7b25cfa6f3cbab"},!this.isInitialized&&i("div",{key:"ac6a2201411d9d72d1a911d6e4a715a8dce4feaf",class:"euclid-loading"},i("div",{key:"e9ece2a40248b94e27e9b0c84a823622c46f1eb7",class:"loading-spinner"}),i("p",{key:"9947aa2136d16d1d8cf2d045d98363ed52f8d6a1"},"Initializing Euclid Protocol...")),i("euclid-wallet-controller",{key:"3e6dd274e650a3f5b083670674f7135ecc70028b",config:JSON.stringify(this.euclidConfig)}),i("euclid-market-data-controller",{key:"7547b29a0ec85f22e31ba159368b8f17a9543ad4",config:JSON.stringify(this.euclidConfig)}),i("euclid-user-data-controller",{key:"e8a19dfbb4e5f489e18d88de0f676284d804a898",config:JSON.stringify(this.euclidConfig)}),i("euclid-swap-controller",{key:"b15d3207743906ceed9ace7fad7f69daa8cd9cea",config:JSON.stringify(this.euclidConfig)}),i("euclid-liquidity-controller",{key:"e58ff1aa7d9bf0e13d90eb6fec18336aca33577d",config:JSON.stringify(this.euclidConfig)}),i("euclid-tx-tracker-controller",{key:"0a3db17187b197f8f0d0eb4325b39beaccf263b8",config:JSON.stringify(this.euclidConfig)}),i("euclid-modal",{key:"7c5e0403c14d10b74f3d8cea46650bd35f420296"}),i("div",{key:"5600bbbc665bbaac083b00f4016268ed96f19bca",class:"euclid-provider-content"},i("slot",{key:"1b26071e08b2a4ee37cc4000ad2c906aa999c96b"})))}};P.style=q;class E{constructor(e,t,i){this.triggerElements=new Set;this.state={displayedItemsCount:0,hasMoreData:true,isLoadingMore:false,isComponentVisible:true};this.hostElement=e;this.config=t;this.callbacks=i}initialize(e){this.contentElement=e;this.setupIntersectionObservers()}updateState(e){this.state={...this.state,...e};this.callbacks.onStateChange(this.state)}updateTriggerElements(){if(!this.itemObserver)return;this.triggerElements.forEach((e=>{this.itemObserver?.unobserve(e)}));this.triggerElements.clear();const e=this.hostElement?.shadowRoot?.querySelector(".data-content");if(!e)return;const t=e.querySelectorAll(".data-item");const i=Math.min(this.config.triggerItems,t.length);for(let e=t.length-i;e<t.length;e++){if(e>=0&&t[e]){this.triggerElements.add(t[e]);this.itemObserver.observe(t[e])}}}findScrollContainer(e){let t=e.parentElement;while(t&&t!==document.documentElement){const e=window.getComputedStyle(t);const i=e.overflowY==="auto"||e.overflowY==="scroll";const a=e.overflow==="auto"||e.overflow==="scroll";const s=t.scrollHeight>t.clientHeight;const o=s&&(i||a||t.tagName==="BODY"||t.classList.contains("container")||t.classList.contains("scroll")||t.classList.contains("scrollable"));if(o){return t}t=t.parentElement}const i=document.body;if(i&&i.scrollHeight>i.clientHeight){return i}return null}setupIntersectionObservers(){let e=null;if(this.config.useParentScroll){e=this.findScrollContainer(this.hostElement)}else{e=this.contentElement||null}this.componentObserver=new IntersectionObserver((e=>{e.forEach((e=>{const t=e.isIntersecting;this.updateState({isComponentVisible:t});if(!t){this.pauseItemObserver()}else{this.resumeItemObserver()}}))}),{root:this.config.useParentScroll?e:null,rootMargin:"50px",threshold:.1});if(this.hostElement){this.componentObserver.observe(this.hostElement)}this.itemObserver=new IntersectionObserver((e=>{if(!this.state.isComponentVisible||this.state.isLoadingMore||!this.state.hasMoreData)return;e.forEach((e=>{if(e.isIntersecting&&this.triggerElements.has(e.target)){this.handleLoadMore()}}))}),{root:e,rootMargin:"20px",threshold:this.config.threshold})}handleLoadMore(){if(this.state.isLoadingMore||!this.state.hasMoreData)return;if(this.loadMoreDebounceTimer){clearTimeout(this.loadMoreDebounceTimer)}this.loadMoreDebounceTimer=setTimeout((()=>{this.callbacks.onLoadMore()}),this.config.debounceTime)}pauseItemObserver(){if(this.itemObserver){this.triggerElements.forEach((e=>{this.itemObserver?.unobserve(e)}))}}resumeItemObserver(){if(this.itemObserver&&this.triggerElements.size>0){this.triggerElements.forEach((e=>{this.itemObserver?.observe(e)}))}}destroy(){if(this.componentObserver){this.componentObserver.disconnect();this.componentObserver=undefined}if(this.itemObserver){this.itemObserver.disconnect();this.itemObserver=undefined}this.triggerElements.clear();if(this.loadMoreDebounceTimer){clearTimeout(this.loadMoreDebounceTimer)}}}class F{constructor(e={}){this.worker=null;this.messageId=0;this.pendingMessages=new Map;this.debounceTimers=new Map;this.retryCount=0;this.maxRetries=3;this.workerDisabled=false;this.config={workerPath:"./build/workers/data-list.worker.js",batchSize:50,debounceTime:200,timeout:5e3,...e};this.initializeWorker()}initializeWorker(){if(!this.worker&&!this.workerDisabled){try{this.worker=new Worker(this.config.workerPath);this.worker.addEventListener("message",this.handleWorkerMessage.bind(this));this.worker.addEventListener("error",this.handleWorkerError.bind(this));console.log("🚀 DataListWorker initialized successfully");this.retryCount=0}catch(e){console.error("❌ Failed to initialize DataListWorker:",e);this.handleWorkerFailure()}}}handleWorkerMessage(e){const{id:t,type:i,payload:a}=e.data;const s=this.pendingMessages.get(t);if(!s){console.warn("⚠️ Received response for unknown message ID:",t);return}clearTimeout(s.timeout);this.pendingMessages.delete(t);if(i==="ERROR"){s.reject(new Error(a.error||"Unknown worker error"))}else{if(a.processingTime!==undefined){console.log(`⚡ Worker processing time: ${a.processingTime.toFixed(2)}ms`)}s.resolve(a)}}handleWorkerError(e){console.error("❌ Worker error:",e);this.pendingMessages.forEach((t=>{clearTimeout(t.timeout);t.reject(new Error("Worker error: "+e.message))}));this.pendingMessages.clear();this.handleWorkerFailure()}handleWorkerFailure(){this.retryCount++;console.warn(`⚠️ Worker failure ${this.retryCount}/${this.maxRetries}`);this.terminateWorker();if(this.retryCount>=this.maxRetries){console.error("❌ Worker failed too many times, disabling worker permanently");this.workerDisabled=true;return}const e=Math.min(1e3*Math.pow(2,this.retryCount-1),1e4);setTimeout((()=>{if(!this.workerDisabled){this.initializeWorker()}}),e)}sendMessage(e){if(!this.worker||this.workerDisabled){return Promise.reject(new Error("Worker not available"))}const t=`msg_${++this.messageId}`;const i={id:t,...e};return new Promise(((e,a)=>{const s=setTimeout((()=>{this.pendingMessages.delete(t);a(new Error("Worker timeout"))}),1e4);this.pendingMessages.set(t,{resolve:t=>e(t),reject:a,timeout:s});this.worker.postMessage(i)}))}async processData(e,t,i,a){const s=await this.sendMessage({type:"PROCESS_DATA",payload:{data:e,dataType:t,filterState:i,walletAddress:a}});return{filteredData:s.filteredData||[],totalCount:s.totalCount||0,processingTime:s.processingTime||0}}async getBatch(e,t){const i=await this.sendMessage({type:"GET_BATCH",payload:{startIndex:e,batchSize:t||this.config.batchSize}});return{batchData:i.batchData||[],totalCount:i.totalCount||0,hasMore:i.hasMore||false,processingTime:i.processingTime||0}}async searchDebounced(e,t,i="default"){return new Promise(((t,a)=>{const s=this.debounceTimers.get(i);if(s){clearTimeout(s)}const o=setTimeout((async()=>{try{this.debounceTimers.delete(i);const a=await this.sendMessage({type:"SEARCH",payload:{filterState:{search:e,sortBy:"",sortOrder:"asc"}}});t({filteredData:a.filteredData||[],totalCount:a.totalCount||0,processingTime:a.processingTime||0})}catch(e){a(e)}}),this.config.debounceTime);this.debounceTimers.set(i,o)}))}async sort(e,t){const i=await this.sendMessage({type:"SORT",payload:{filterState:{search:"",sortBy:e,sortOrder:t}}});return{filteredData:i.filteredData||[],totalCount:i.totalCount||0,processingTime:i.processingTime||0}}isWorkerAvailable(){return!this.workerDisabled&&this.worker!==null&&this.worker.constructor===Worker}getMetrics(){return{pendingMessages:this.pendingMessages.size,activeDebounceTimers:this.debounceTimers.size}}terminateWorker(){if(this.worker){this.pendingMessages.forEach((e=>{clearTimeout(e.timeout);e.reject(new Error("Worker terminated"))}));this.pendingMessages.clear();this.debounceTimers.forEach((e=>clearTimeout(e)));this.debounceTimers.clear();this.worker.terminate();this.worker=null;console.log("🔄 DataListWorker terminated")}}destroy(){this.terminateWorker()}}class L{constructor(e,t,i){this.dataType=e;this.config=t;this.callbacks=i;if(t.enableWorker){this.initializeWorker()}}initializeWorker(){this.workerManager=new F({batchSize:50,debounceTime:this.config.debounceTime})}async processData(e,t,i){const a=performance.now();const s=this.config.enableWorker&&this.workerManager?.isWorkerAvailable()&&e.length>this.config.workerThreshold;if(s){try{this.callbacks.onWorkerStateChange(true);const a=await this.workerManager.processData(e,this.dataType,t,i);this.callbacks.onFilterComplete(a.filteredData,a.processingTime);this.callbacks.onPerformanceMetric({processingTime:a.processingTime,operation:"filter_sort",itemCount:e.length})}catch(s){console.error("❌ Worker processing failed, falling back to main thread:",s);const o=this.processDataSync(e,t,i);const r=performance.now()-a;this.callbacks.onFilterComplete(o,r)}finally{this.callbacks.onWorkerStateChange(false)}}else{const s=this.processDataSync(e,t,i);const o=performance.now()-a;this.callbacks.onFilterComplete(s,o)}}processDataSync(e,t,i){let a=[...e];if(t.search){const e=t.search.toLowerCase();a=a.filter((t=>this.searchInItem(t,e)))}a=this.applyTypeSpecificFilters(a,t,i);if(t.sortBy){a=this.applySorting(a,t)}return a}searchInItem(e,t){const i=this.getSearchFields();return i.some((i=>{const a=this.getItemValue(e,i);return a&&a.toString().toLowerCase().includes(t)}))}getSearchFields(){switch(this.dataType){case"tokens":return["displayName","tokenId","name"];case"chains":return["display_name","chain_id","chain_uid"];case"pools":return["token_1","token_2","pool_id"];default:return["name"]}}applyTypeSpecificFilters(e,t,i){switch(this.dataType){case"tokens":return this.applyTokenFilters(e,t);case"chains":return this.applyChainFilters(e,t);case"pools":return this.applyPoolFilters(e,t,i);default:return e}}applyTokenFilters(e,t){let i=[...e];if(t.chainFilter){i=i.filter((e=>e.chain_uids?.includes(t.chainFilter)))}return i}applyChainFilters(e,t){let i=[...e];if(t.typeFilter){i=i.filter((e=>e.type===t.typeFilter))}return i}applyPoolFilters(e,t,i){const a=[...e];return a}applySorting(e,t){return[...e].sort(((e,i)=>{let a,s;switch(this.dataType){case"tokens":({aValue:a,bValue:s}=this.getTokenSortValues(e,i,t.sortBy));break;case"chains":({aValue:a,bValue:s}=this.getChainSortValues(e,i,t.sortBy));break;case"pools":({aValue:a,bValue:s}=this.getPoolSortValues(e,i,t.sortBy));break;default:a=s=0}if(typeof a==="string"&&typeof s==="string"){const e=a.localeCompare(s);return t.sortOrder==="asc"?e:-e}const o=(a||0)-(s||0);return t.sortOrder==="asc"?o:-o}))}getTokenSortValues(e,t,i){switch(i){case"name":return{aValue:e.displayName,bValue:t.displayName};case"price":return{aValue:parseFloat(e.price||"0"),bValue:parseFloat(t.price||"0")};case"volume":return{aValue:e.total_volume_24h||0,bValue:t.total_volume_24h||0};case"marketCap":return{aValue:0,bValue:0};default:return{aValue:e.displayName,bValue:t.displayName}}}getChainSortValues(e,t,i){switch(i){case"name":return{aValue:e.display_name,bValue:t.display_name};case"type":return{aValue:e.type,bValue:t.type};case"chain_id":return{aValue:e.chain_id,bValue:t.chain_id};default:return{aValue:e.display_name,bValue:t.display_name}}}getPoolSortValues(e,t,i){switch(i){case"apr":return{aValue:parseFloat(e.apr?.replace("%","")||"0"),bValue:parseFloat(t.apr?.replace("%","")||"0")};case"tvl":return{aValue:parseFloat(e.total_liquidity||"0"),bValue:parseFloat(t.total_liquidity||"0")};case"volume":return{aValue:parseFloat(e.volume_24h||"0"),bValue:parseFloat(t.volume_24h||"0")};case"fees":return{aValue:parseFloat(e.fees_24h||"0"),bValue:parseFloat(t.fees_24h||"0")};default:return{aValue:e.token_1,bValue:t.token_1}}}getItemValue(e,t){const i=t.split(".");let a=e;for(const e of i){if(a&&typeof a==="object"&&e in a){a=a[e]}else{return null}}return a}async searchDebounced(e){if(this.config.enableWorker&&this.workerManager?.isWorkerAvailable()){try{this.callbacks.onWorkerStateChange(true);const t=await this.workerManager.searchDebounced(e,this.dataType);this.callbacks.onFilterComplete(t.filteredData,t.processingTime);this.callbacks.onPerformanceMetric({processingTime:t.processingTime,operation:"search",itemCount:t.totalCount})}catch(e){console.error("❌ Worker search failed:",e)}finally{this.callbacks.onWorkerStateChange(false)}}}destroy(){if(this.workerManager){this.workerManager.destroy()}}}class W{constructor(e,t){this.filteredData=[];this.state={currentPage:1,totalPages:1,displayedItemsCount:0,hasMoreData:true};this.config=e;this.callbacks=t;if(e.infiniteScroll){this.state.displayedItemsCount=e.itemsPerPage}}updateData(e){this.filteredData=e;this.updatePagination()}getPaginatedData(){if(this.config.infiniteScroll){return this.filteredData.slice(0,this.state.displayedItemsCount)}if(this.config.itemsPerPage<=0){return this.filteredData}const e=(this.state.currentPage-1)*this.config.itemsPerPage;const t=e+this.config.itemsPerPage;return this.filteredData.slice(e,t)}loadMore(){if(!this.config.infiniteScroll){return{newDisplayedCount:this.state.displayedItemsCount,hasMore:false}}const e=this.state.displayedItemsCount;const t=this.filteredData.length;const i=Math.min(this.config.itemsPerPage,t-e);if(i<=0){this.state.hasMoreData=false;this.callbacks.onStateChange(this.state);return{newDisplayedCount:e,hasMore:false}}const a=Math.min(e+i,t,this.config.maxItems);this.state.displayedItemsCount=a;this.state.hasMoreData=a<t&&a<this.config.maxItems;this.callbacks.onStateChange(this.state);this.callbacks.onInfiniteScrollStateChange(false,this.state.hasMoreData,a);return{newDisplayedCount:a,hasMore:this.state.hasMoreData}}goToPage(e){if(this.config.infiniteScroll){return false}if(e>=1&&e<=this.state.totalPages){this.state.currentPage=e;this.callbacks.onStateChange(this.state);this.callbacks.onPageChange(e,this.state.totalPages,this.config.itemsPerPage);return true}return false}resetToFirstPage(){this.state.currentPage=1;if(this.config.infiniteScroll){this.state.displayedItemsCount=Math.min(this.config.itemsPerPage,this.filteredData.length);this.state.hasMoreData=this.state.displayedItemsCount<this.filteredData.length&&this.state.displayedItemsCount<this.config.maxItems}this.callbacks.onStateChange(this.state)}updatePagination(){if(this.config.infiniteScroll){this.state.displayedItemsCount=Math.min(this.state.displayedItemsCount,this.filteredData.length,this.config.maxItems);this.state.hasMoreData=this.state.displayedItemsCount<this.filteredData.length&&this.state.displayedItemsCount<this.config.maxItems;this.state.totalPages=1;this.state.currentPage=1}else{if(this.config.itemsPerPage>0){this.state.totalPages=Math.ceil(this.filteredData.length/this.config.itemsPerPage);if(this.state.currentPage>this.state.totalPages&&this.state.totalPages>0){this.state.currentPage=1}}else{this.state.totalPages=1;this.state.currentPage=1}}this.callbacks.onStateChange(this.state)}getState(){return{...this.state}}}const O=":host{display:block;width:100%;font-family:var(--euclid-font-family, 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif)}.data-list{background:var(--euclid-surface);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-2xl);overflow:visible;box-shadow:var(--euclid-shadow-sm)}.data-header{padding:24px;border-bottom:1px solid var(--euclid-border);background:var(--euclid-surface-secondary)}.data-title{margin:0;font-size:20px;font-weight:600;color:var(--euclid-text-primary)}.data-controls{display:flex;flex-wrap:wrap;gap:16px;padding:20px;background:var(--euclid-surface);border-bottom:1px solid var(--euclid-border);align-items:center}.search-input-container{position:relative;flex:1;min-width:200px}.search-icon{position:absolute;left:12px;top:50%;transform:translateY(-50%);width:18px;height:18px;color:var(--euclid-text-secondary);pointer-events:none;z-index:1}.search-input{width:100%;padding:12px 16px 12px 44px;border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-lg);background:var(--euclid-surface);color:var(--euclid-text-primary);font-size:14px;transition:border-color 0.2s ease, box-shadow 0.2s ease}.search-input:focus{outline:none;border-color:var(--euclid-interactive-primary);box-shadow:0 0 0 3px var(--euclid-interactive-primary-focus)}.search-input::placeholder{color:var(--euclid-text-secondary)}.filters-container{display:flex;flex-wrap:wrap;gap:12px;align-items:center}.filter-item{display:flex;align-items:center}.filter-select,.sort-select{padding:8px 12px;border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-md);background:var(--euclid-surface);color:var(--euclid-text-primary);font-size:14px;min-width:120px;cursor:pointer}.filter-select:focus,.sort-select:focus{outline:none;border-color:var(--euclid-interactive-primary);box-shadow:0 0 0 2px var(--euclid-interactive-primary-focus)}.filter-input{padding:8px 12px;border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-md);background:var(--euclid-surface);color:var(--euclid-text-primary);font-size:14px;min-width:150px}.filter-input:focus{outline:none;border-color:var(--euclid-interactive-primary);box-shadow:0 0 0 2px var(--euclid-interactive-primary-focus)}.filter-checkbox{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:14px;color:var(--euclid-text-primary)}.filter-checkbox input[type=\"checkbox\"]{width:16px;height:16px;accent-color:var(--euclid-interactive-primary)}.checkbox-label{user-select:none}.data-stats{display:flex;flex-wrap:wrap;gap:24px;padding:20px 24px;background:var(--euclid-surface-secondary);border-bottom:1px solid var(--euclid-border)}.stat-item{display:flex;flex-direction:column;gap:4px}.stat-label{font-size:12px;color:var(--euclid-text-secondary);text-transform:uppercase;letter-spacing:0.5px;font-weight:500}.stat-value{font-size:18px;font-weight:700;color:var(--euclid-text-primary)}.data-grid{display:grid;grid-template-columns:repeat(auto-fill, minmax(300px, 1fr));gap:16px;padding:24px}.data-list-container{display:flex;flex-direction:column;gap:12px;padding:24px}.data-compact-container{display:flex;flex-wrap:wrap;gap:8px;padding:20px}.data-content--infinite{max-height:60vh;overflow-y:auto;scroll-behavior:smooth}.data-content--parent-scroll{max-height:none;overflow-y:visible}.data-item{position:relative;transition:opacity 0.2s ease-in-out, transform 0.2s ease-in-out}.data-container--transitioning .data-item{transition:opacity 0.15s ease-in-out}.data-item--updating{opacity:0.8}.data-container--transitioning{min-height:inherit}.worker-badge{font-size:0.8em;background:linear-gradient(45deg, #667eea, #764ba2);color:white;padding:2px 6px;border-radius:4px;margin-left:8px;font-weight:normal}.search-processing{position:absolute;right:8px;top:50%;transform:translateY(-50%)}.loading-spinner-small{width:16px;height:16px;border:2px solid #f3f3f3;border-top:2px solid #667eea;border-radius:50%;animation:spin 1s linear infinite}.data-content--processing{opacity:0.8;transition:opacity 0.2s ease}.infinite-scroll-footer{padding:16px 24px;display:flex;justify-content:center;align-items:center;border-top:1px solid var(--euclid-border);background:var(--euclid-surface-secondary)}.infinite-scroll-loading{display:flex;flex-direction:column;align-items:center;gap:12px;color:var(--euclid-text-secondary)}.infinite-scroll-loading .loading-spinner{width:24px;height:24px;border:2px solid var(--euclid-border);border-top-color:var(--euclid-interactive-primary);border-radius:50%;animation:spin 1s linear infinite}.infinite-scroll-loading span{font-size:14px;font-weight:500}.infinite-scroll-end{display:flex;align-items:center;justify-content:center;padding:8px 0}.infinite-scroll-end span{font-size:14px;color:var(--euclid-text-tertiary);font-style:italic}.loading-state{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:16px;padding:60px 24px;text-align:center;color:var(--euclid-text-secondary)}.loading-spinner{width:32px;height:32px;border:3px solid var(--euclid-border);border-top-color:var(--euclid-interactive-primary);border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:16px;padding:60px 24px;text-align:center;color:var(--euclid-text-secondary)}.empty-state svg{width:48px;height:48px;opacity:0.5}.empty-state span{font-size:16px;font-weight:500}.clear-filters-btn{padding:12px 24px;background:var(--euclid-interactive-primary);color:white;border:none;border-radius:var(--euclid-radius-lg);font-size:14px;font-weight:500;cursor:pointer;transition:background-color 0.2s ease}.clear-filters-btn:hover{background:var(--euclid-interactive-primary-hover)}.pagination{display:flex;justify-content:center;align-items:center;gap:8px;padding:20px 24px;border-top:1px solid var(--euclid-border);background:var(--euclid-surface)}.pagination-btn{padding:8px 16px;border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-md);background:var(--euclid-surface);color:var(--euclid-text-primary);font-size:14px;font-weight:500;cursor:pointer;transition:all 0.2s ease}.pagination-btn:hover:not(:disabled){border-color:var(--euclid-interactive-primary);background:var(--euclid-interactive-primary-focus)}.pagination-btn:disabled{opacity:0.5;cursor:not-allowed}.pagination-pages{display:flex;gap:4px;align-items:center}.pagination-page{display:flex;align-items:center;justify-content:center;width:36px;height:36px;border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-md);background:var(--euclid-surface);color:var(--euclid-text-primary);font-size:14px;font-weight:500;cursor:pointer;transition:all 0.2s ease}.pagination-page:hover{border-color:var(--euclid-interactive-primary);background:var(--euclid-interactive-primary-focus)}.pagination-page--active{background:var(--euclid-interactive-primary);border-color:var(--euclid-interactive-primary);color:white}.pagination-page--active:hover{background:var(--euclid-interactive-primary-hover)}.pagination-ellipsis{padding:0 8px;color:var(--euclid-text-secondary);font-weight:500}@media (max-width: 768px){.data-header{padding:16px}.data-title{font-size:18px}.data-controls{flex-direction:column;align-items:stretch;gap:12px;padding:16px}.search-input-container{min-width:unset}.filters-container{justify-content:space-between}.data-stats{flex-direction:column;gap:16px;padding:16px}.data-grid{grid-template-columns:1fr;gap:12px;padding:16px}.data-list-container{gap:8px;padding:16px}.pagination{flex-direction:column;gap:12px;padding:16px}.pagination-pages{order:-1}}@media (max-width: 640px){.data-stats{text-align:center}.stat-item{align-items:center}.filter-select,.sort-select,.filter-input{min-width:unset;width:100%}.filters-container{flex-direction:column;align-items:stretch}}";const R=class{constructor(i){e(this,i);this.itemSelected=t(this,"itemSelected");this.itemHover=t(this,"itemHover");this.filtersChanged=t(this,"filtersChanged");this.pageChanged=t(this,"pageChanged");this.loadMoreRequested=t(this,"loadMoreRequested");this.infiniteScrollStateChanged=t(this,"infiniteScrollStateChanged");this.workerPerformance=t(this,"workerPerformance");this.displayMode="card";this.cardTitle="";this.itemsPerPage=10;this.infiniteScroll=false;this.useParentScroll=false;this.infiniteScrollTriggerItems=3;this.infiniteScrollThreshold=.1;this.maxItems=1e3;this.showFields="";this.searchable=true;this.filterable=true;this.sortable=true;this.showStats=true;this.selectable=true;this.loading=false;this.enableWorker=false;this.walletAddress="";this.showEndMessage=true;this.filteredData=[];this.currentPage=1;this.totalPages=1;this.selectedItemId="";this.filterState={search:"",sortBy:"",sortOrder:"asc"};this.displayedItemsCount=0;this.hasMoreData=true;this.isLoadingMore=false;this.isComponentVisible=true;this.storeData=[];this.storeLoading=false;this.storeError=null;this.isWorkerProcessing=false;this.workerProcessingTime=0;this.componentPoolVersion=0;this.isTransitioning=false;this.memoizedItems=new Map;this.lastRenderHash="";this.updateTimeout=null;this.isConnected=true;this.handleSearch=async e=>{const t=e.target;const i=t.value||"";this.filterState={...this.filterState,search:i};this.paginationManager?.resetToFirstPage();this.applyFilters()};this.handleSortChange=async e=>{const t=e.target;const[i,a]=t.value.split("_");this.filterState={...this.filterState,sortBy:i,sortOrder:a};this.applyFilters()};this.handleFilterChange=(e,t)=>{this.filterState={...this.filterState,[e]:t};this.paginationManager?.resetToFirstPage();this.applyFilters()};this.clearFilters=()=>{const e=this.getDefaultSort();this.filterState={search:"",sortBy:e.key,sortOrder:e.order};this.paginationManager?.resetToFirstPage();this.applyFilters()};this.handleItemSelect=e=>{if(!this.isConnected)return;const t=e.detail;const i=this.getItemId(t);this.selectedItemId=i;try{this.itemSelected.emit({item:t,id:i})}catch(e){console.warn("Failed to emit itemSelected event:",e)}};this.handleItemHover=e=>{if(!this.isConnected)return;const t=e.detail;const i=this.getItemId(t);try{this.itemHover.emit({item:t,id:i})}catch(e){console.warn("Failed to emit itemHover event:",e)}};this.handlePageChange=e=>{this.paginationManager?.goToPage(e)}}get storeKey(){return this.dataType}get itemComponent(){switch(this.dataType){case"tokens":return"euclid-token-item";case"chains":return"euclid-chain-item";case"pools":return"euclid-pool-item";default:return"div"}}get showFieldsArray(){return this.showFields?this.showFields.split(",").map((e=>e.trim())):this.getDefaultFields()}get effectiveCardTitle(){return this.cardTitle||null}componentWillLoad(){this.initializeFilterState();this.syncWithStore();this.initializeManagers();if(this.infiniteScroll){this.displayedItemsCount=this.itemsPerPage;this.hasMoreData=true}m.onChange(this.storeKey,(()=>{this.scheduleDataUpdate()}));m.onChange("loading",(()=>{this.storeLoading=m.state.loading}));m.onChange("error",(()=>{this.storeError=m.state.error}))}scheduleDataUpdate(){if(!this.isConnected)return;if(this.updateTimeout){clearTimeout(this.updateTimeout)}this.updateTimeout=window.setTimeout((()=>{if(!this.isConnected)return;if(this.isTransitioning){this.scheduleDataUpdate();return}this.isTransitioning=true;requestAnimationFrame((()=>{if(!this.isConnected){this.isTransitioning=false;return}this.syncWithStore();this.applyFilters();setTimeout((()=>{this.isTransitioning=false;this.updateTimeout=null}),50)}))}),100)}componentDidLoad(){if(this.infiniteScroll){this.infiniteScrollManager?.initialize(this.contentElement)}}componentDidUpdate(){if(this.infiniteScroll){this.infiniteScrollManager?.updateTriggerElements()}}disconnectedCallback(){this.isConnected=false;this.filterManager?.destroy();this.infiniteScrollManager?.destroy();if(this.updateTimeout){clearTimeout(this.updateTimeout);this.updateTimeout=null}}getDefaultFields(){switch(this.dataType){case"tokens":return["logo","name","price","change","volume24h","chains","verified"];case"chains":return["logo","name","type","chain_id"];case"pools":return[];default:return[]}}initializeFilterState(){const e=this.getDefaultSort();this.filterState={search:"",sortBy:e.key,sortOrder:e.order}}initializeManagers(){const e={enableWorker:this.enableWorker||this.infiniteScroll,workerThreshold:this.infiniteScroll?25:50,debounceTime:200};this.filterManager=new L(this.dataType,e,{onFilterComplete:(e,t)=>{if(!this.isConnected)return;this.filteredData=e;this.workerProcessingTime=t||0;this.paginationManager?.updateData(e);try{this.filtersChanged.emit({filters:{...this.filterState},resultCount:e.length})}catch(e){console.warn("Failed to emit filtersChanged event:",e)}},onWorkerStateChange:e=>{if(!this.isConnected)return;this.isWorkerProcessing=e},onPerformanceMetric:e=>{if(!this.isConnected)return;try{this.workerPerformance.emit(e)}catch(e){console.warn("Failed to emit workerPerformance event:",e)}}});const t={itemsPerPage:this.itemsPerPage,maxItems:this.maxItems,infiniteScroll:this.infiniteScroll};this.paginationManager=new W(t,{onStateChange:e=>{if(!this.isConnected)return;if(!this.infiniteScroll){this.currentPage=e.currentPage;this.totalPages=e.totalPages}},onPageChange:(e,t,i)=>{if(!this.isConnected)return;try{this.pageChanged.emit({page:e,totalPages:t,itemsPerPage:i})}catch(e){console.warn("Failed to emit pageChanged event:",e)}},onInfiniteScrollStateChange:(e,t,i)=>{if(!this.isConnected)return;try{this.infiniteScrollStateChanged.emit({isLoading:e,hasMore:t,displayedCount:i})}catch(e){console.warn("Failed to emit infiniteScrollStateChanged event:",e)}}});if(this.infiniteScroll){const e={useParentScroll:this.useParentScroll,triggerItems:this.infiniteScrollTriggerItems,threshold:this.infiniteScrollThreshold,debounceTime:100};this.infiniteScrollManager=new E(this.el,e,{onLoadMore:()=>{this.handleLoadMore()},onStateChange:e=>{this.isComponentVisible=e.isComponentVisible;this.isLoadingMore=e.isLoadingMore}})}this.applyFilters()}getDefaultSort(){switch(this.dataType){case"tokens":return{key:"name",order:"asc"};case"chains":return{key:"name",order:"asc"};case"pools":return{key:"apr",order:"desc"};default:return{key:"name",order:"asc"}}}syncWithStore(){const e=m.state[this.storeKey]||[];this.storeData=Array.isArray(e)?e:[];this.storeLoading=m.state.loading;this.storeError=m.state.error}watchPropsChange(){this.syncWithStore();this.initializeFilterState();this.initializeManagers();if(this.infiniteScroll){this.displayedItemsCount=this.itemsPerPage;this.hasMoreData=true}else{this.currentPage=1;this.displayedItemsCount=0;this.hasMoreData=false}this.selectedItemId="";this.applyFilters()}async applyFilters(){if(this.filterManager&&this.storeData.length>0){await this.filterManager.processData(this.storeData,this.filterState,this.walletAddress)}else if(this.storeData.length===0){this.filteredData=[];this.paginationManager?.updateData([])}if(!this.infiniteScroll&&this.filteredData.length>0){const e=Math.ceil(this.filteredData.length/this.itemsPerPage);if(this.totalPages!==e){this.totalPages=e;if(this.currentPage>e){this.currentPage=1}}}}getStableKey(e){switch(this.dataType){case"tokens":{const t=e;return`token-${t.symbol||t.name||"unknown"}`}case"chains":{const t=e;return`chain-${t.chain_uid||t.chain_id||"unknown"}`}case"pools":{const t=e;return`pool-${t.pool_id||"unknown"}`}default:return`item-${JSON.stringify(e).slice(0,50)}`}}createItemHash(e){return JSON.stringify({item:e,selected:this.selectedItemId===this.getItemId(e),displayMode:this.displayMode,showFields:this.showFieldsArray})}shouldRenderItem(e,t){const i=this.createItemHash(t);const a=this.memoizedItems.get(e);if(!a||a.hash!==i){this.memoizedItems.set(e,{item:t,props:this.getItemProps(t),hash:i});return true}return false}getItemProps(e){const t=this.getItemId(e);const i=this.selectedItemId===t;const a={[this.dataType.slice(0,-1)]:e,selected:i,displayMode:this.displayMode,showFields:this.showFieldsArray,selectable:this.selectable};return this.dataType==="pools"?{...a,tokens:m.state.tokens||[],walletAddress:this.walletAddress}:a}getPaginatedData(){if(this.infiniteScroll){return this.filteredData.slice(0,this.displayedItemsCount)}if(this.itemsPerPage<=0){return this.filteredData}const e=(this.currentPage-1)*this.itemsPerPage;const t=e+this.itemsPerPage;return this.filteredData.slice(e,t)}getItemId(e){switch(this.dataType){case"tokens":return e.tokenId;case"chains":return e.chain_uid;case"pools":return e.pool_id;default:return"unknown"}}handleLoadMore(){if(!this.isConnected||this.isLoadingMore||!this.hasMoreData)return;const e=this.displayedItemsCount;const t=this.filteredData.length;const i=Math.min(this.itemsPerPage,t-e);if(i<=0){this.hasMoreData=false;this.emitInfiniteScrollState();return}this.isLoadingMore=true;this.emitInfiniteScrollState();try{this.loadMoreRequested.emit({currentCount:e,requestedCount:i})}catch(e){console.warn("Failed to emit loadMoreRequested event:",e)}setTimeout((()=>{const a=Math.min(e+i,t,this.maxItems);this.displayedItemsCount=a;this.hasMoreData=a<t&&a<this.maxItems;this.isLoadingMore=false;this.emitInfiniteScrollState();requestAnimationFrame((()=>{this.infiniteScrollManager?.updateTriggerElements()}))}),200)}emitInfiniteScrollState(){if(!this.isConnected)return;try{this.infiniteScrollStateChanged.emit({isLoading:this.isLoadingMore,hasMore:this.hasMoreData,displayedCount:this.displayedItemsCount})}catch(e){console.warn("Failed to emit infiniteScrollStateChanged event:",e)}}renderSearch(){if(!this.searchable)return null;return i("div",{class:"search-input-container"},i("svg",{class:"search-icon",viewBox:"0 0 24 24",fill:"currentColor"},i("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})),i("input",{type:"text",class:"search-input",placeholder:`Search ${this.dataType}...`,value:this.filterState.search,onInput:this.handleSearch}),this.isWorkerProcessing&&i("div",{class:"search-processing"},i("div",{class:"loading-spinner-small"})))}renderFilters(){if(!this.filterable)return null;const e=[];if(this.dataType==="tokens"){e.push(i("label",{class:"filter-checkbox"},i("input",{type:"checkbox",checked:Boolean(this.filterState.showFavorites),onChange:e=>this.handleFilterChange("showFavorites",e.target.checked)}),i("span",{class:"checkbox-label"},"Show Favorites")))}if(this.dataType==="chains"){e.push(i("select",{class:"filter-select",onChange:e=>this.handleFilterChange("typeFilter",e.target.value)},i("option",{value:""},"All Types"),i("option",{value:"EVM"},"EVM"),i("option",{value:"Cosmwasm"},"CosmWasm")))}if(this.dataType==="pools"&&this.walletAddress){e.push(i("label",{class:"filter-checkbox"},i("input",{type:"checkbox",checked:Boolean(this.filterState.showMyPools),onChange:e=>this.handleFilterChange("showMyPools",e.target.checked)}),i("span",{class:"checkbox-label"},"My Pools Only")))}return e.length>0?i("div",{class:"filters-container"},e):null}renderSorting(){if(!this.sortable)return null;const e=this.getSortOptions();return i("select",{class:"sort-select",onChange:this.handleSortChange},e.flatMap((e=>[i("option",{key:`${e.key}_asc`,value:`${e.key}_asc`,selected:this.filterState.sortBy===e.key&&this.filterState.sortOrder==="asc"},e.label," (A-Z)"),i("option",{key:`${e.key}_desc`,value:`${e.key}_desc`,selected:this.filterState.sortBy===e.key&&this.filterState.sortOrder==="desc"},e.label," (Z-A)")])))}getSortOptions(){switch(this.dataType){case"tokens":return[{key:"name",label:"Name"},{key:"price",label:"Price"},{key:"volume",label:"Volume"},{key:"marketCap",label:"Market Cap"}];case"chains":return[{key:"name",label:"Name"},{key:"type",label:"Type"},{key:"chain_id",label:"Chain ID"}];case"pools":return[{key:"apr",label:"APR"},{key:"tvl",label:"TVL"},{key:"volume",label:"Volume"},{key:"fees",label:"Fees"}];default:return[]}}renderStats(){if(!this.showStats)return null;const e=this.getStats();return i("div",{class:"data-stats"},e.map((e=>i("div",{key:e.key,class:"stat-item"},i("div",{class:"stat-label"},e.label),i("div",{class:"stat-value"},e.value)))))}getStats(){const e=this.storeData.length;const t=this.filteredData.length;const i=[{key:"total",label:`Total ${this.dataType}`,value:e.toString()},{key:"filtered",label:"Filtered",value:t.toString()}];if(this.dataType==="tokens"){const e=this.storeData;const t=new Set(e.flatMap((e=>e.chain_uids||[]))).size;i.push({key:"chains",label:"Chains",value:t.toString()})}if((this.enableWorker||this.infiniteScroll)&&this.workerProcessingTime>0){i.push({key:"performance",label:"Processing",value:`${this.workerProcessingTime.toFixed(1)}ms (worker)`})}return i}renderPagination(){if(this.infiniteScroll||this.totalPages<=1)return null;return i("div",{class:"pagination"},i("button",{class:"pagination-btn",onClick:()=>this.handlePageChange(this.currentPage-1),disabled:this.currentPage===1,type:"button"},"Previous"),i("div",{class:"pagination-pages"},Array.from({length:Math.min(this.totalPages,5)},((e,t)=>{const a=t+1;return i("button",{key:a,class:{"pagination-page":true,"pagination-page--active":a===this.currentPage},onClick:()=>this.handlePageChange(a),type:"button"},a)})),this.totalPages>5&&i("span",{class:"pagination-ellipsis"},"...")),i("button",{class:"pagination-btn",onClick:()=>this.handlePageChange(this.currentPage+1),disabled:this.currentPage===this.totalPages,type:"button"},"Next"))}renderInfiniteScrollLoader(){if(!this.infiniteScroll)return null;if(!this.showEndMessage&&!this.isLoadingMore)return null;return i("div",{class:"infinite-scroll-footer"},this.isLoadingMore&&i("div",{class:"infinite-scroll-loading"},i("div",{class:"loading-spinner"}),i("span",null,"Loading more ",this.dataType,"...")),!this.hasMoreData&&this.displayedItemsCount>0&&this.showEndMessage&&i("div",{class:"infinite-scroll-end"},i("span",null,"All ",this.dataType," loaded (",this.displayedItemsCount," of ",this.filteredData.length,")")))}render(){const e=(this.storeLoading||this.loading)&&this.storeData.length===0;const t=this.getPaginatedData();const a=this.itemComponent;return i("div",{key:"37f999258b4b371506ea02a63e5e743a46dd3f23",class:"data-list"},this.effectiveCardTitle&&i("div",{key:"56ea96116f74908bff741e9edb64a565047d024b",class:"data-header"},i("h3",{key:"10a4d25864d68aa1d7147aa66d420e4f627bb3de",class:"data-title"},this.effectiveCardTitle,(this.enableWorker||this.infiniteScroll)&&i("span",{key:"e3a32e9d025edce2565e8d4b028fd49d9ba2c4a1",class:"worker-badge"},"⚡ Worker",this.infiniteScroll&&!this.enableWorker?" (auto)":""))),(this.searchable||this.filterable||this.sortable)&&i("div",{key:"48a11cfe88881958fd28978539520a382c273107",class:"data-controls"},this.renderSearch(),this.renderFilters(),this.renderSorting()),this.renderStats(),i("div",{key:"28650e70a4a001cd9b89321c4cde13ad9d31c8b9",class:{"data-content":true,"data-content--infinite":this.infiniteScroll&&!this.useParentScroll,"data-content--parent-scroll":this.infiniteScroll&&this.useParentScroll,"data-content--processing":this.isWorkerProcessing},ref:e=>this.contentElement=e},e||this.isWorkerProcessing?i("div",{class:"loading-state"},i("div",{class:"loading-spinner"}),i("span",null,"Loading ",this.dataType,"...",this.isWorkerProcessing&&" (worker processing)")):t.length===0?i("div",{class:"empty-state"},i("svg",{viewBox:"0 0 64 64",fill:"currentColor"},i("path",{d:"M31.968,0c-1.9626667,28.448-3.552,29.984-32,32c28.448,1.9626667,29.984,3.552,32,32c1.9626667-28.448,3.552-29.984,32-32C35.52,29.984,33.9306667,28.448,31.968,0z"})),i("span",null,"No ",this.dataType," found"),i("button",{class:"clear-filters-btn",onClick:this.clearFilters,type:"button"},"Clear Filters")):i("div",{class:{"data-grid":this.displayMode==="card"||this.displayMode==="grid","data-list-container":this.displayMode==="list-item","data-compact-container":this.displayMode==="compact","data-container--transitioning":this.isTransitioning}},t.map((e=>{const t=this.getStableKey(e);const s=this.getItemProps(e);const o={};if(this.selectable){o.onTokenClick=this.handleItemSelect;o.onChainSelect=this.handleItemSelect;o.onPoolSelect=this.handleItemSelect;o.onItemSelect=this.handleItemSelect}o.onTokenHover=this.handleItemHover;o.onChainHover=this.handleItemHover;o.onPoolHover=this.handleItemHover;o.onItemHover=this.handleItemHover;return i(a,{key:t,class:{"data-item":true,"data-item--updating":this.isTransitioning},...s,...o})}))),this.renderInfiniteScrollLoader()),this.renderPagination())}get el(){return s(this)}static get watchers(){return{dataType:["watchPropsChange"],showFields:["watchPropsChange"],infiniteScroll:["watchPropsChange"]}}};R.style=O;const V=':host{display:block;width:100%;height:100%;font-family:var(--euclid-font-sans)}.demo-playground{display:flex;flex-direction:column;height:100%;background:var(--euclid-surface);border:var(--euclid-border-1) solid var(--euclid-border);border-radius:var(--euclid-radius-xl);overflow:hidden;box-shadow:var(--euclid-shadow-lg)}.component-selector{margin-bottom:var(--euclid-space-6);padding:var(--euclid-space-4);background:var(--euclid-primary-50);border:var(--euclid-border-1) solid var(--euclid-primary-200);border-radius:var(--euclid-radius-lg)}.selector-label{display:flex;flex-direction:column;gap:var(--euclid-space-2)}.selector-title{font-weight:var(--euclid-font-semibold);color:var(--euclid-primary-700);font-size:var(--euclid-text-xs);text-transform:uppercase;letter-spacing:0.05em}.component-dropdown{padding:var(--euclid-space-3);border:var(--euclid-border-1) solid var(--euclid-border);border-radius:var(--euclid-radius-md);background:var(--euclid-surface);color:var(--euclid-text-primary);font-size:var(--euclid-text-sm);font-family:var(--euclid-font-sans);cursor:pointer;transition:var(--euclid-transition-base)}.component-dropdown:focus{outline:none;border-color:var(--euclid-border-focus);box-shadow:var(--euclid-shadow-focus)}.component-dropdown:hover{border-color:var(--euclid-border-hover)}.playground-content{display:flex;flex:1;min-height:0;}@media (max-width: 1024px){.playground-content{flex-direction:column}}.demo-section{flex:1;padding:var(--euclid-space-8);background:var(--euclid-surface);overflow:auto}@media (max-width: 1024px){.controls-section{flex:0 0 auto;border-right:none;border-bottom:var(--euclid-border-1) solid var(--euclid-border)}}.controls-section{flex:0 0 400px;background:var(--euclid-surface-secondary);padding:var(--euclid-space-6);border-right:var(--euclid-border-1) solid var(--euclid-border);overflow-y:auto;display:flex;flex-direction:column}.controls-panel{display:flex;flex-direction:column;flex:1;width:100%}.controls-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--euclid-space-6)}.controls-actions{display:flex;gap:var(--euclid-space-2);align-items:center}.controls-header h3{margin:0;font-size:var(--euclid-text-lg);font-weight:var(--euclid-font-semibold);color:var(--euclid-text-primary)}.code-toggle{background:var(--euclid-interactive-primary);color:var(--euclid-text-inverse);border:none;padding:var(--euclid-space-3);border-radius:var(--euclid-radius-md);font-size:var(--euclid-text-sm);cursor:pointer;transition:var(--euclid-transition-base);display:flex;align-items:center;justify-content:center;min-width:var(--euclid-button-height-base);height:var(--euclid-button-height-base)}.code-toggle svg{width:16px;height:16px}.code-toggle:hover{background:var(--euclid-interactive-primary-hover)}.code-toggle.active{background:var(--euclid-interactive-success)}.reset-button{background:var(--euclid-surface);color:var(--euclid-text-secondary);border:var(--euclid-border-1) solid var(--euclid-border);padding:var(--euclid-space-3);border-radius:var(--euclid-radius-md);font-size:var(--euclid-text-sm);cursor:pointer;transition:var(--euclid-transition-base);display:flex;align-items:center;justify-content:center;min-width:var(--euclid-button-height-base);height:var(--euclid-button-height-base)}.reset-button svg{width:16px;height:16px}.reset-button:hover{border-color:var(--euclid-border-hover);color:var(--euclid-interactive-primary);background:var(--euclid-primary-50)}.code-display{background:var(--euclid-gray-900);color:var(--euclid-gray-100);padding:var(--euclid-space-4);border-radius:var(--euclid-radius-md);margin-bottom:var(--euclid-space-6);font-family:var(--euclid-font-mono);font-size:var(--euclid-text-sm);overflow-x:auto;border:var(--euclid-border-1) solid var(--euclid-gray-700)}.code-display pre{margin:0;white-space:pre-wrap;word-break:break-word}.code-display code{color:var(--euclid-gray-100)}.controls-grid{display:grid;gap:var(--euclid-space-4);flex:1;overflow-y:auto}.control-item{background:var(--euclid-surface);padding:var(--euclid-space-4);border-radius:var(--euclid-radius-lg);border:var(--euclid-border-1) solid var(--euclid-border);transition:var(--euclid-transition-base)}.control-item:hover{border-color:var(--euclid-border-hover);box-shadow:var(--euclid-shadow-sm)}.control-label{display:flex;flex-direction:column;gap:var(--euclid-space-2);cursor:pointer}.control-name{font-weight:var(--euclid-font-medium);color:var(--euclid-text-primary);font-size:var(--euclid-text-sm);line-height:var(--euclid-leading-snug)}.control-description{font-size:var(--euclid-text-xs);color:var(--euclid-text-secondary);margin-top:var(--euclid-space-1);line-height:var(--euclid-leading-relaxed)}input[type="text"],input[type="number"],select{width:100%;padding:var(--euclid-input-padding-y) var(--euclid-input-padding-x);border:var(--euclid-input-border-width) solid var(--euclid-border);border-radius:var(--euclid-input-border-radius);font-size:var(--euclid-input-font-size);font-family:var(--euclid-font-sans);background:var(--euclid-surface);color:var(--euclid-text-primary);transition:var(--euclid-transition-base);line-height:var(--euclid-input-line-height)}input[type="text"]:focus,input[type="number"]:focus,select:focus{outline:none;border-color:var(--euclid-border-focus);box-shadow:var(--euclid-shadow-focus)}input[type="text"]:hover,input[type="number"]:hover,select:hover{border-color:var(--euclid-border-hover)}input[type="checkbox"]{width:18px;height:18px;border:var(--euclid-border-2) solid var(--euclid-border);border-radius:var(--euclid-radius-base);background:var(--euclid-surface);cursor:pointer;position:relative;appearance:none;transition:var(--euclid-transition-base);flex-shrink:0}input[type="checkbox"]:checked{background:var(--euclid-interactive-primary);border-color:var(--euclid-interactive-primary)}input[type="checkbox"]:checked::after{content:\'✓\';position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);color:var(--euclid-text-inverse);font-size:12px;font-weight:var(--euclid-font-bold)}input[type="checkbox"]:hover{border-color:var(--euclid-border-hover)}input[type="checkbox"]:focus{outline:none;border-color:var(--euclid-border-focus);box-shadow:var(--euclid-shadow-focus)}.control-item:has(input[type="checkbox"]) .control-label{flex-direction:row;align-items:center;gap:var(--euclid-space-3)}.control-item:has(input[type="checkbox"]) .control-text{flex:1;display:flex;flex-direction:column;gap:var(--euclid-space-1)}.control-item:has(input[type="checkbox"]) .control-name{line-height:var(--euclid-leading-snug)}.control-item:has(input[type="checkbox"]) .control-description{margin-top:0}@media (max-width: 768px){.playground-content{grid-template-columns:1fr}.demo-section,.control-item{padding:var(--euclid-space-4)}.controls-section{padding:var(--euclid-space-4)}}.controls-section::-webkit-scrollbar{width:6px}.controls-section::-webkit-scrollbar-track{background:#f1f1f1}.controls-section::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}.controls-section::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.github-link{margin-top:auto;padding-top:var(--euclid-space-6);border-top:var(--euclid-border-1) solid var(--euclid-border)}.github-link-anchor{display:flex;align-items:center;gap:var(--euclid-space-2);padding:var(--euclid-space-3);background:var(--euclid-primary-50);border:var(--euclid-border-1) solid var(--euclid-primary-200);border-radius:var(--euclid-radius-lg);text-decoration:none;color:var(--euclid-text-primary);font-size:var(--euclid-text-sm);transition:var(--euclid-transition-base)}.github-link-anchor:hover{background:var(--euclid-primary-100);border-color:var(--euclid-primary-300);transform:translateY(-1px);box-shadow:var(--euclid-shadow-md)}.github-icon{width:18px;height:18px;color:var(--euclid-primary-600);flex-shrink:0}.github-text{font-family:var(--euclid-font-mono);font-weight:var(--euclid-font-medium);color:var(--euclid-text-secondary)}.core-provider-demo{padding:var(--euclid-spacing-lg);display:flex;flex-direction:column;gap:var(--euclid-spacing-lg)}.provider-info{background:var(--euclid-surface-secondary);padding:var(--euclid-spacing-lg);border-radius:var(--euclid-radius-md);border:1px solid var(--euclid-border-default)}.provider-info h3{color:var(--euclid-text-primary);margin:0 0 var(--euclid-spacing-md) 0;font-size:var(--euclid-text-lg);font-weight:var(--euclid-font-semibold)}.provider-info p{color:var(--euclid-text-secondary);margin:0 0 var(--euclid-spacing-lg) 0;line-height:var(--euclid-line-height-relaxed)}.config-summary{background:var(--euclid-surface-primary);padding:var(--euclid-spacing-md);border-radius:var(--euclid-radius-sm);border:1px solid var(--euclid-border-subtle)}.config-summary h4{color:var(--euclid-text-primary);margin:0 0 var(--euclid-spacing-md) 0;font-size:var(--euclid-text-base);font-weight:var(--euclid-font-medium)}.config-details{display:flex;flex-direction:column;gap:var(--euclid-spacing-xs)}.config-details>div{font-family:var(--euclid-font-mono);font-size:var(--euclid-text-sm);color:var(--euclid-text-secondary)}.config-details strong{color:var(--euclid-text-primary);font-weight:var(--euclid-font-medium)}.provider-children{background:var(--euclid-surface-secondary);padding:var(--euclid-spacing-lg);border-radius:var(--euclid-radius-md);border:1px solid var(--euclid-border-default)}.provider-children h4{color:var(--euclid-text-primary);margin:0 0 var(--euclid-spacing-sm) 0;font-size:var(--euclid-text-base);font-weight:var(--euclid-font-medium)}.provider-children p{color:var(--euclid-text-secondary);margin:0 0 var(--euclid-spacing-md) 0;font-size:var(--euclid-text-sm)}.demo-components{border:1px solid var(--euclid-border-subtle);border-radius:var(--euclid-radius-sm);overflow:hidden}';const N=class{constructor(t){e(this,t);this.selectedDemo="data-list-tokens";this.environment="testnet";this.activeTab="data-list-tokens";this.currentProps={};this.showCode=false;this.componentDemos=[{id:"data-list-tokens",name:"🪙 Token List",description:"Interactive token list with search, filtering, and infinite scroll",category:"Display",tagName:"euclid-data-list",defaultProps:{dataType:"tokens",displayMode:"list-item",cardTitle:"Available Tokens",itemsPerPage:10,infiniteScroll:true,searchable:true,sortable:true,showStats:true,enableWorker:false,filterable:true,selectable:true,loading:false,maxItems:1e3,infiniteScrollTriggerItems:3,infiniteScrollThreshold:.1,useParentScroll:false,showFields:"",walletAddress:""},propDefinitions:[{name:"dataType",type:"select",defaultValue:"tokens",description:"Type of data to display",options:[{value:"tokens",label:"Tokens"},{value:"pools",label:"Pools"},{value:"chains",label:"Chains"}]},{name:"displayMode",type:"select",defaultValue:"list-item",description:"How to display the items",options:[{value:"card",label:"Card View"},{value:"list-item",label:"List Item"},{value:"compact",label:"Compact"}]},{name:"cardTitle",type:"string",defaultValue:"Available Tokens",description:"Title displayed at the top of the component"},{name:"itemsPerPage",type:"number",defaultValue:10,description:"Number of items per page",min:1,max:100},{name:"infiniteScroll",type:"boolean",defaultValue:true,description:"Enable infinite scrolling instead of pagination"},{name:"searchable",type:"boolean",defaultValue:true,description:"Show search input"},{name:"sortable",type:"boolean",defaultValue:true,description:"Enable sorting controls"},{name:"filterable",type:"boolean",defaultValue:true,description:"Enable filtering options"},{name:"showStats",type:"boolean",defaultValue:true,description:"Show statistics and counts"},{name:"enableWorker",type:"boolean",defaultValue:true,description:"Use web worker for data processing"},{name:"selectable",type:"boolean",defaultValue:true,description:"Allow item selection"},{name:"loading",type:"boolean",defaultValue:false,description:"Show loading state"},{name:"useParentScroll",type:"boolean",defaultValue:false,description:"Use parent element for scroll detection"},{name:"maxItems",type:"number",defaultValue:1e3,description:"Maximum number of items to display",min:1,max:1e4},{name:"infiniteScrollTriggerItems",type:"number",defaultValue:3,description:"Items from bottom to trigger load more",min:1,max:20}]},{id:"swap-card",name:"🔄 Token Swap",description:"Token swap interface with advanced options",category:"Trading",tagName:"euclid-swap-card",defaultProps:{cardTitle:"Swap Tokens",showAdvanced:true,loading:false,disabled:false,walletAddress:"",defaultSlippage:.5},propDefinitions:[{name:"cardTitle",type:"string",defaultValue:"Swap Tokens",description:"Title of the swap card"},{name:"showAdvanced",type:"boolean",defaultValue:true,description:"Show advanced trading options"},{name:"loading",type:"boolean",defaultValue:false,description:"Show loading state"},{name:"disabled",type:"boolean",defaultValue:false,description:"Disable the swap interface"},{name:"walletAddress",type:"string",defaultValue:"",description:"Connected wallet address"},{name:"defaultSlippage",type:"number",defaultValue:.5,description:"Default slippage tolerance",min:.1,max:10}]},{id:"liquidity-card",name:"💧 Liquidity Pool",description:"Add/remove liquidity interface",category:"Trading",tagName:"euclid-liquidity-card",defaultProps:{cardTitle:"Manage Liquidity",mode:"add",loading:false,disabled:false,walletAddress:"",defaultSlippage:.5},propDefinitions:[{name:"cardTitle",type:"string",defaultValue:"Manage Liquidity",description:"Title of the liquidity card"},{name:"mode",type:"select",defaultValue:"add",description:"Liquidity operation mode",options:[{value:"add",label:"Add Liquidity"},{value:"remove",label:"Remove Liquidity"}]},{name:"loading",type:"boolean",defaultValue:false,description:"Show loading state"},{name:"disabled",type:"boolean",defaultValue:false,description:"Disable the liquidity interface"},{name:"walletAddress",type:"string",defaultValue:"",description:"Connected wallet address"},{name:"defaultSlippage",type:"number",defaultValue:.5,description:"Default slippage tolerance",min:.1,max:10}]},{id:"portfolio-overview",name:"📊 Portfolio",description:"Portfolio balance and position tracking",category:"Portfolio",tagName:"euclid-portfolio-overview",defaultProps:{cardTitle:"Portfolio Overview",showAnalytics:true,loading:false,walletAddress:"",timePeriod:"1W"},propDefinitions:[{name:"cardTitle",type:"string",defaultValue:"Portfolio Overview",description:"Title of the portfolio card"},{name:"showAnalytics",type:"boolean",defaultValue:true,description:"Show detailed analytics"},{name:"loading",type:"boolean",defaultValue:false,description:"Show loading state"},{name:"walletAddress",type:"string",defaultValue:"",description:"Wallet address to track"},{name:"timePeriod",type:"select",defaultValue:"1W",description:"Time period for analytics",options:[{value:"1D",label:"1 Day"},{value:"1W",label:"1 Week"},{value:"1M",label:"1 Month"},{value:"3M",label:"3 Months"},{value:"1Y",label:"1 Year"},{value:"ALL",label:"All Time"}]}]},{id:"core-provider-config",name:"⚙️ App Settings",description:"Configure app environment, API settings, and feature preferences",category:"Settings",tagName:"euclid-core-provider",defaultProps:{environment:"testnet",graphqlEndpoint:"",restEndpoint:"",apiTimeout:1e4,defaultSlippage:.5,refreshIntervals:JSON.stringify({marketData:3e4,balances:6e4,routes:3e5}),featureFlags:JSON.stringify({darkMode:true,transactionHistory:true,advancedRouting:true}),supportedChains:"cosmoshub-4,osmosis-1,juno-1,stargaze-1,ethereum,polygon",supportedWallets:"keplr,metamask,walletconnect,coinbase",defaultChain:"osmosis-1",defaultWallet:"keplr"},propDefinitions:[{name:"environment",type:"select",defaultValue:"testnet",description:"Environment preset for API endpoints",options:[{value:"mainnet",label:"Mainnet"},{value:"testnet",label:"Testnet"},{value:"devnet",label:"Devnet"}]},{name:"graphqlEndpoint",type:"text",defaultValue:"",description:"Custom GraphQL endpoint (overrides environment preset)"},{name:"restEndpoint",type:"text",defaultValue:"",description:"Custom REST endpoint (overrides environment preset)"},{name:"apiTimeout",type:"number",defaultValue:1e4,description:"API request timeout in milliseconds"},{name:"defaultSlippage",type:"number",defaultValue:.5,description:"Default slippage tolerance percentage"},{name:"defaultChain",type:"select",defaultValue:"osmosis-1",description:"Default blockchain network",options:[{value:"cosmoshub-4",label:"Cosmos Hub"},{value:"osmosis-1",label:"Osmosis"},{value:"juno-1",label:"Juno"},{value:"stargaze-1",label:"Stargaze"},{value:"ethereum",label:"Ethereum"},{value:"polygon",label:"Polygon"}]},{name:"defaultWallet",type:"select",defaultValue:"keplr",description:"Default wallet adapter",options:[{value:"keplr",label:"Keplr"},{value:"metamask",label:"MetaMask"},{value:"walletconnect",label:"WalletConnect"},{value:"coinbase",label:"Coinbase Wallet"}]}]},{id:"address-book",name:"📇 Address Book",description:"Manage and organize saved wallet addresses across multiple chains",category:"Wallet",tagName:"euclid-address-book",defaultProps:{showActiveOnly:false,allowEditing:true,showBalances:true},propDefinitions:[{name:"showActiveOnly",type:"boolean",defaultValue:false,description:"Only show addresses that are currently active/connected"},{name:"allowEditing",type:"boolean",defaultValue:true,description:"Allow editing and managing address entries"},{name:"showBalances",type:"boolean",defaultValue:true,description:"Display wallet balances when available"}]}]}onSelectedDemoChange(e){this.activeTab=e;this.saveActiveTabToStorage();this.initializeProps()}componentWillLoad(){this.activeTab=this.loadActiveTabFromStorage();this.initializeProps()}getStorageKey(e){return`euclid-demo-props-${e}`}getActiveTabStorageKey(){return"euclid-demo-active-tab"}saveActiveTabToStorage(){try{localStorage.setItem(this.getActiveTabStorageKey(),this.activeTab)}catch(e){console.warn("Failed to save active tab to localStorage:",e)}}loadActiveTabFromStorage(){try{const e=localStorage.getItem(this.getActiveTabStorageKey());if(e&&this.componentDemos.find((t=>t.id===e))){return e}}catch(e){console.warn("Failed to load active tab from localStorage:",e)}return this.selectedDemo||this.componentDemos[0]?.id||"data-list-tokens"}savePropsToStorage(){try{const e=this.getStorageKey(this.activeTab);localStorage.setItem(e,JSON.stringify(this.currentProps))}catch(e){console.warn("Failed to save props to localStorage:",e)}}loadPropsFromStorage(e){try{const t=this.getStorageKey(e.id);const i=localStorage.getItem(t);if(i){const t=JSON.parse(i);return{...e.defaultProps,...t}}}catch(e){console.warn("Failed to load props from localStorage:",e)}return{...e.defaultProps}}initializeProps(){const e=this.componentDemos.find((e=>e.id===this.activeTab));if(e){this.currentProps=this.loadPropsFromStorage(e)}}getCurrentDemo(){return this.componentDemos.find((e=>e.id===this.activeTab))}updateProp(e,t){this.currentProps={...this.currentProps,[e]:t};this.savePropsToStorage()}resetToDefaults(){const e=this.getCurrentDemo();if(e){this.currentProps={...e.defaultProps};this.savePropsToStorage()}}generateComponentCode(){const e=this.getCurrentDemo();if(!e)return"";const t=Object.entries(this.currentProps).filter((([e,t])=>t!==""&&t!==null&&t!==undefined)).map((([e,t])=>{if(typeof t==="boolean"){return t?e:`${e}="false"`}return`${e}="${t}"`})).join("\n    ");return`<${e.tagName}\n    ${t}>\n</${e.tagName}>`}renderControlsPanel(){const e=this.getCurrentDemo();if(!e)return null;return i("div",{class:"controls-panel"},i("div",{class:"component-selector"},i("label",{class:"selector-label"},i("span",{class:"selector-title"},"Component"),i("select",{class:"component-dropdown",onChange:e=>{this.activeTab=e.target.value;this.saveActiveTabToStorage();this.initializeProps()}},this.componentDemos.map((e=>i("option",{value:e.id,selected:this.activeTab===e.id},e.name)))))),i("div",{class:"controls-header"},i("h3",null,"Component Properties"),i("div",{class:"controls-actions"},i("button",{class:"reset-button",onClick:()=>this.resetToDefaults(),title:"Reset to default values"},i("svg",{viewBox:"0 0 24 24",fill:"currentColor"},i("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}))),i("button",{class:`code-toggle ${this.showCode?"active":""}`,onClick:()=>this.showCode=!this.showCode,title:this.showCode?"Hide Code":"Show Code"},i("svg",{viewBox:"0 0 24 24",fill:"currentColor"},i("path",{d:"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0L19.2 12l-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"}))))),this.showCode&&i("div",{class:"code-display"},i("pre",null,i("code",null,this.generateComponentCode()))),i("div",{class:"controls-grid"},e.propDefinitions.map((e=>this.renderControl(e)))),i("div",{class:"github-link"},i("a",{href:"https://github.com/monkeyscanjump/euclid",target:"_blank",rel:"noopener noreferrer",class:"github-link-anchor"},i("svg",{class:"github-icon",viewBox:"0 0 24 24",fill:"currentColor"},i("path",{d:"M12 0C5.374 0 0 5.373 0 12 0 17.302 3.438 21.8 8.207 23.387c.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"})),i("span",{class:"github-text"},"/ monkeyscanjump/euclid"))))}renderControl(e){const t=this.currentProps[e.name];switch(e.type){case"boolean":return i("div",{class:"control-item"},i("label",{class:"control-label"},i("input",{type:"checkbox",checked:Boolean(t),onChange:t=>this.updateProp(e.name,t.target.checked)}),i("div",{class:"control-text"},i("span",{class:"control-name"},e.name),e.description&&i("div",{class:"control-description"},e.description))));case"number":return i("div",{class:"control-item"},i("label",{class:"control-label"},i("span",{class:"control-name"},e.name),i("input",{type:"number",min:e.min,max:e.max,value:String(t),onChange:t=>this.updateProp(e.name,parseInt(t.target.value))})),e.description&&i("div",{class:"control-description"},e.description));case"string":return i("div",{class:"control-item"},i("label",{class:"control-label"},i("span",{class:"control-name"},e.name),i("input",{type:"text",value:String(t),onChange:t=>this.updateProp(e.name,t.target.value)})),e.description&&i("div",{class:"control-description"},e.description));case"select":return i("div",{class:"control-item"},i("label",{class:"control-label"},i("span",{class:"control-name"},e.name),i("select",{onChange:t=>this.updateProp(e.name,t.target.value)},e.options?.map((e=>i("option",{value:String(e.value),selected:t===e.value},e.label))))),e.description&&i("div",{class:"control-description"},e.description));default:return null}}renderDemo(){const e=this.getCurrentDemo();if(!e)return null;const t=this.currentProps;let a;switch(e.tagName){case"euclid-data-list":a=i("euclid-data-list",{key:`${e.id}-${JSON.stringify(t)}`,dataType:t.dataType||"tokens",displayMode:t.displayMode||"list-item",cardTitle:String(t.cardTitle||"Available Tokens"),itemsPerPage:Number(t.itemsPerPage||10),infiniteScroll:Boolean(t.infiniteScroll),searchable:Boolean(t.searchable),sortable:Boolean(t.sortable),filterable:Boolean(t.filterable),showStats:Boolean(t.showStats),enableWorker:Boolean(t.enableWorker),selectable:Boolean(t.selectable),loading:Boolean(t.loading),useParentScroll:Boolean(t.useParentScroll),maxItems:Number(t.maxItems||1e3),infiniteScrollTriggerItems:Number(t.infiniteScrollTriggerItems||3),showFields:String(t.showFields||""),walletAddress:String(t.walletAddress||"")});break;case"euclid-swap-card":a=i("euclid-swap-card",{key:`${e.id}-${JSON.stringify(t)}`,cardTitle:String(t.cardTitle||"Swap Tokens"),showAdvanced:Boolean(t.showAdvanced),loading:Boolean(t.loading),disabled:Boolean(t.disabled),walletAddress:String(t.walletAddress||"")});break;case"euclid-liquidity-card":a=i("euclid-liquidity-card",{key:`${e.id}-${JSON.stringify(t)}`,cardTitle:String(t.cardTitle||"Manage Liquidity"),mode:t.mode||"add",loading:Boolean(t.loading),disabled:Boolean(t.disabled),walletAddress:String(t.walletAddress||"")});break;case"euclid-portfolio-overview":a=i("euclid-portfolio-overview",{key:`${e.id}-${JSON.stringify(t)}`,cardTitle:String(t.cardTitle||"Portfolio Overview"),showAnalytics:Boolean(t.showAnalytics),loading:Boolean(t.loading),walletAddress:String(t.walletAddress||""),timePeriod:t.timePeriod||"1W"});break;case"euclid-core-provider":a=i("div",{class:"core-provider-demo"},i("div",{class:"provider-info"},i("h3",null,"⚙️ App Settings Configuration"),i("p",null,"This component provides configuration to all child components. Configure the settings to see how they affect the entire system."),i("div",{class:"config-summary"},i("h4",null,"Current Configuration:"),i("div",{class:"config-details"},i("div",null,i("strong",null,"Environment:")," ",t.environment||"testnet"),i("div",null,i("strong",null,"GraphQL Endpoint:")," ",t.graphqlEndpoint||d[String(t.environment||"testnet")]?.graphqlEndpoint||c.graphqlEndpoint),i("div",null,i("strong",null,"REST Endpoint:")," ",t.restEndpoint||d[String(t.environment||"testnet")]?.restEndpoint||c.restEndpoint),i("div",null,i("strong",null,"API Timeout:")," ",t.apiTimeout||c.apiTimeout,"ms"),i("div",null,i("strong",null,"Default Chain:")," ",t.defaultChain||c.defaultChain),i("div",null,i("strong",null,"Default Wallet:")," ",t.defaultWallet||c.defaultWallet)))),i("euclid-core-provider",{environment:String(t.environment),graphqlEndpoint:String(t.graphqlEndpoint||""),restEndpoint:String(t.restEndpoint||""),apiTimeout:Number(t.apiTimeout),defaultSlippage:Number(t.defaultSlippage),refreshIntervals:String(t.refreshIntervals),featureFlags:String(t.featureFlags),supportedChains:String(t.supportedChains),supportedWallets:String(t.supportedWallets),defaultChain:String(t.defaultChain),defaultWallet:String(t.defaultWallet)},i("div",{class:"provider-children"},i("h4",null,"💡 Configured Components Preview:"),i("p",null,"Here you would see child components using the configuration above."),i("div",{class:"demo-components"},i("euclid-data-list",{dataType:"tokens",displayMode:"compact",cardTitle:"Tokens (using configured endpoints)",itemsPerPage:5,searchable:false})))));break;case"euclid-address-book":a=i("euclid-address-book",{showActiveOnly:Boolean(t.showActiveOnly),allowEditing:Boolean(t.allowEditing),showBalances:Boolean(t.showBalances)});break;default:a=i("div",null,"Component not found")}return a}render(){return i("div",{key:"e451f0c543623b27912db004c54026e9a03dbebc",class:"demo-playground"},i("div",{key:"41b82ccd73459108183478f863e4fa4723c47367",class:"playground-content"},i("div",{key:"fd7943a69340a551e19ad833f1d581fa991cc80c",class:"controls-section"},this.renderControlsPanel()),i("div",{key:"2673508a70ee61c17e9416fa52e087c2471f01d7",class:"demo-section"},i("euclid-config-provider",{key:"c489b2762e9707405c56690fbcb24f0026c03736",environment:this.environment},this.renderDemo()))))}get el(){return s(this)}static get watchers(){return{selectedDemo:["onSelectedDemoChange"]}}};N.style=V;const $=":host{display:contents}.liquidity-card{background:var(--euclid-surface);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-2xl);padding:var(--euclid-spacing-6);max-width:480px;width:100%;box-shadow:var(--euclid-shadow-xl);display:flex;flex-direction:column;gap:var(--euclid-spacing-6)}.liquidity-header{display:flex;justify-content:space-between;align-items:center}.liquidity-title{font-size:var(--euclid-text-size-xl);font-weight:var(--euclid-font-weight-semibold);color:var(--euclid-text-primary);margin:0}.mode-toggle{display:flex;background:var(--euclid-surface-secondary);border-radius:var(--euclid-radius-lg);padding:var(--euclid-spacing-1)}.mode-button{padding:var(--euclid-spacing-2) var(--euclid-spacing-4);border:none;background:transparent;color:var(--euclid-text-secondary);font-size:var(--euclid-text-size-sm);font-weight:var(--euclid-font-weight-medium);cursor:pointer;border-radius:var(--euclid-radius-md);transition:all var(--euclid-transition-duration-fast)}.mode-button--active{background:var(--euclid-surface);color:var(--euclid-text-primary);box-shadow:var(--euclid-shadow-sm)}.mode-button:hover:not(.mode-button--active){color:var(--euclid-text-primary)}.pool-section{display:flex;flex-direction:column;gap:var(--euclid-spacing-4)}.section-header{display:flex;justify-content:space-between;align-items:center}.section-label{font-size:var(--euclid-text-size-sm);font-weight:var(--euclid-font-weight-medium);color:var(--euclid-text-secondary)}.pool-selector{cursor:pointer}.pool-selector:hover{opacity:0.8}.selected-pool{display:flex;align-items:center;gap:var(--euclid-spacing-4);padding:var(--euclid-spacing-4);border:2px solid var(--euclid-border);border-radius:var(--euclid-radius-xl);background:var(--euclid-surface);transition:all var(--euclid-transition-duration-fast)}.select-pool-button{display:flex;align-items:center;justify-content:center;gap:var(--euclid-spacing-2);padding:var(--euclid-spacing-4) var(--euclid-spacing-6);border:2px dashed var(--euclid-border);border-radius:var(--euclid-radius-xl);background:var(--euclid-surface-secondary);color:var(--euclid-text-secondary);font-size:var(--euclid-text-size-base);font-weight:var(--euclid-font-weight-medium);cursor:pointer;transition:all var(--euclid-transition-duration-fast)}.select-pool-button:hover{border-color:var(--euclid-border-hover)}.pool-tokens{display:flex;align-items:center}.token-pair{display:flex;align-items:center}.token-logo{width:2rem;height:2rem;border-radius:50%;background:var(--euclid-surface-secondary);border:2px solid var(--euclid-surface)}.token-logo--overlap{margin-left:-0.5rem}.pool-info{display:flex;flex-direction:column;gap:var(--euclid-spacing-1)}.pool-name{font-size:var(--euclid-text-size-base);font-weight:var(--euclid-font-weight-semibold);color:var(--euclid-text-primary)}.pool-fee{font-size:var(--euclid-text-size-sm);color:var(--euclid-text-secondary)}.pool-stats{display:flex;gap:var(--euclid-spacing-6)}.stat{display:flex;flex-direction:column;gap:var(--euclid-spacing-1)}.stat-label{font-size:var(--euclid-text-size-xs);color:var(--euclid-text-muted)}.stat-value{font-size:var(--euclid-text-size-sm);font-weight:var(--euclid-font-weight-medium);color:var(--euclid-text-primary)}.position-info{padding:var(--euclid-spacing-4);background:var(--euclid-surface-secondary);border-radius:var(--euclid-radius-xl)}.position-header{margin-bottom:var(--euclid-spacing-3)}.position-label{font-size:var(--euclid-text-size-sm);font-weight:var(--euclid-font-weight-medium);color:var(--euclid-text-secondary)}.position-details{display:flex;flex-direction:column;gap:var(--euclid-spacing-3)}.position-row{display:flex;justify-content:space-between;align-items:center}.position-item-label{font-size:var(--euclid-text-size-sm);color:var(--euclid-text-secondary)}.position-item-value{font-size:var(--euclid-text-size-sm);font-weight:var(--euclid-font-weight-medium);color:var(--euclid-text-primary)}.liquidity-inputs{display:flex;flex-direction:column;gap:var(--euclid-spacing-4)}.token-input-section{position:relative}.input-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--euclid-spacing-2)}.input-label{font-size:var(--euclid-text-size-sm);color:var(--euclid-text-secondary)}.balance-label{font-size:var(--euclid-text-size-sm);color:var(--euclid-text-muted);cursor:pointer;transition:color var(--euclid-transition-duration-fast)}.balance-label:hover{color:var(--euclid-text-secondary)}.plus-icon{position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);z-index:10;width:2rem;height:2rem;background:var(--euclid-surface);border:2px solid var(--euclid-border);border-radius:50%;display:flex;align-items:center;justify-content:center;color:var(--euclid-text-secondary)}.plus-icon svg{width:1rem;height:1rem}.token-selector{cursor:pointer}.token-selector:hover{opacity:0.8}.selected-token{display:flex;align-items:center;gap:var(--euclid-spacing-3);padding:var(--euclid-spacing-4);border:2px solid var(--euclid-border);border-radius:var(--euclid-radius-xl);background:var(--euclid-surface)}.select-token-button{display:flex;align-items:center;justify-content:center;gap:var(--euclid-spacing-2);padding:var(--euclid-spacing-4) var(--euclid-spacing-6);border:2px dashed var(--euclid-border);border-radius:var(--euclid-radius-xl);background:var(--euclid-surface-secondary);color:var(--euclid-text-secondary);font-size:var(--euclid-text-size-base);font-weight:var(--euclid-font-weight-medium);cursor:pointer;transition:all var(--euclid-transition-duration-fast)}.select-token-button:hover{border-color:var(--euclid-border-hover)}.token-info{display:flex;flex-direction:column;gap:var(--euclid-spacing-1);flex:1}.token-symbol{font-size:var(--euclid-text-size-base);font-weight:var(--euclid-font-weight-semibold);color:var(--euclid-text-primary)}.token-name{font-size:var(--euclid-text-size-sm);color:var(--euclid-text-secondary)}.dropdown-arrow{color:var(--euclid-text-muted);transition:transform var(--euclid-transition-duration-fast)}.dropdown-arrow--open{transform:rotate(180deg)}.remove-liquidity{display:flex;flex-direction:column;gap:var(--euclid-spacing-4)}.percentage-section{display:flex;flex-direction:column;gap:var(--euclid-spacing-3)}.percentage-label{font-size:var(--euclid-text-size-sm);font-weight:var(--euclid-font-weight-medium);color:var(--euclid-text-secondary)}.percentage-buttons{display:flex;gap:var(--euclid-spacing-2)}.percentage-btn{flex:1;padding:var(--euclid-spacing-3);border:2px solid var(--euclid-border);border-radius:var(--euclid-radius-lg);background:var(--euclid-surface);color:var(--euclid-text-secondary);font-size:var(--euclid-text-size-sm);font-weight:var(--euclid-font-weight-medium);cursor:pointer;transition:all var(--euclid-transition-duration-fast)}.percentage-btn:hover{border-color:var(--euclid-border-hover);color:var(--euclid-text-primary)}.percentage-btn--active{border-color:var(--euclid-interactive-primary);background:var(--euclid-primary-50);color:var(--euclid-primary-700)}.lp-token-display{display:flex;align-items:center;gap:var(--euclid-spacing-3);padding:var(--euclid-spacing-4);border:2px solid var(--euclid-border);border-radius:var(--euclid-radius-xl);background:var(--euclid-surface-secondary)}.lp-token-info{display:flex;flex-direction:column;gap:var(--euclid-spacing-1);flex:1}.lp-symbol{font-size:var(--euclid-text-size-base);font-weight:var(--euclid-font-weight-semibold);color:var(--euclid-text-primary)}.quote-info{padding:var(--euclid-spacing-4);background:var(--euclid-surface-secondary);border-radius:var(--euclid-radius-xl)}.quote-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--euclid-spacing-2)}.quote-row:last-child{margin-bottom:0}.quote-label{font-size:var(--euclid-text-size-sm);color:var(--euclid-text-secondary)}.quote-value{font-size:var(--euclid-text-size-sm);font-weight:var(--euclid-font-weight-medium);color:var(--euclid-text-primary)}.quote-value--warning{color:var(--euclid-warning-600)}.quote-value--danger{color:var(--euclid-danger-600)}.advanced-section{border-top:1px solid var(--euclid-border);padding-top:var(--euclid-spacing-4)}.advanced-toggle{display:flex;align-items:center;gap:var(--euclid-spacing-2);padding:var(--euclid-spacing-2) 0;background:transparent;border:none;color:var(--euclid-text-secondary);font-size:var(--euclid-text-size-sm);cursor:pointer;transition:color var(--euclid-transition-duration-fast)}.advanced-toggle:hover{color:var(--euclid-text-primary)}.advanced-panel{margin-top:var(--euclid-spacing-4);padding:var(--euclid-spacing-4);background:var(--euclid-surface-secondary);border-radius:var(--euclid-radius-lg)}.setting-item{display:flex;flex-direction:column;gap:var(--euclid-spacing-2)}.setting-label{font-size:var(--euclid-text-size-sm);font-weight:var(--euclid-font-weight-medium);color:var(--euclid-text-secondary)}.slippage-controls{display:flex;gap:var(--euclid-spacing-2);align-items:center}.slippage-btn{padding:var(--euclid-spacing-2) var(--euclid-spacing-3);border:2px solid var(--euclid-border);border-radius:var(--euclid-radius-md);background:var(--euclid-surface);color:var(--euclid-text-secondary);font-size:var(--euclid-text-size-sm);cursor:pointer;transition:all var(--euclid-transition-duration-fast)}.slippage-btn:hover{border-color:var(--euclid-border-hover);color:var(--euclid-text-primary)}.slippage-btn--active{border-color:var(--euclid-interactive-primary);background:var(--euclid-primary-50);color:var(--euclid-primary-700)}.slippage-input{padding:var(--euclid-spacing-2) var(--euclid-spacing-3);border:2px solid var(--euclid-border);border-radius:var(--euclid-radius-md);background:var(--euclid-surface);color:var(--euclid-text-primary);font-size:var(--euclid-text-size-sm);width:80px;text-align:center}.slippage-input:focus{outline:none;border-color:var(--euclid-border-focus);box-shadow:0 0 0 3px rgba(37, 99, 235, 0.1)}@media (max-width: 480px){.liquidity-card{padding:var(--euclid-spacing-4);gap:var(--euclid-spacing-4)}.liquidity-header{flex-direction:column;gap:var(--euclid-spacing-3);align-items:flex-start}.mode-toggle{width:100%}.mode-button{flex:1;text-align:center}.pool-stats{flex-direction:column;gap:var(--euclid-spacing-3)}.percentage-buttons{flex-wrap:wrap}.percentage-btn{min-width:calc(50% - var(--euclid-spacing-1))}.slippage-controls{flex-wrap:wrap;gap:var(--euclid-spacing-2)}.selected-pool,.selected-token,.lp-token-display{flex-direction:column;align-items:flex-start;gap:var(--euclid-spacing-2)}.pool-tokens{order:-1}.token-pair{gap:var(--euclid-spacing-2)}.token-logo--overlap{margin-left:0}.pool-info,.token-info,.lp-token-info{width:100%}}@media (prefers-reduced-motion: reduce){.mode-button,.pool-selector,.token-selector,.percentage-btn,.slippage-btn{transition:none}}.token-selector:focus-within,.pool-selector:focus-within{outline:2px solid var(--euclid-border-focus);outline-offset:2px}.mode-button:focus{outline:2px solid var(--euclid-border-focus);outline-offset:2px}.percentage-btn:focus,.slippage-btn:focus{outline:2px solid var(--euclid-border-focus);outline-offset:2px}.quote-info.loading{position:relative;pointer-events:none}.quote-info.loading::after{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);width:1.5rem;height:1.5rem;border:2px solid var(--euclid-border);border-top:2px solid var(--euclid-interactive-primary);border-radius:50%;animation:euclid-spin 1s linear infinite}@media (prefers-contrast: high){.liquidity-card,.selected-pool,.selected-token,.lp-token-display,.position-info,.quote-info,.advanced-panel{border-width:2px;border-color:var(--euclid-text-primary)}.mode-button--active,.percentage-btn--active,.slippage-btn--active{border-color:var(--euclid-text-primary);background:var(--euclid-text-primary);color:var(--euclid-surface)}}";const B=class{constructor(i){e(this,i);this.liquidityAdded=t(this,"liquidityAdded");this.liquidityRemoved=t(this,"liquidityRemoved");this.poolSelected=t(this,"poolSelected");this.quoteRequested=t(this,"quoteRequested");this.tokens=[];this.pools=[];this.positions=[];this.storePools=[];this.storeTokens=[];this.storeLoading=false;this.selectedStorePool=null;this.selectedPool=null;this.mode="add";this.tokenAAmount="";this.tokenBAmount="";this.lpTokenAmount="";this.loading=false;this.disabled=false;this.walletAddress="";this.cardTitle="Manage Liquidity";this.isPoolSelectorOpen=false;this.currentQuote=null;this.removeQuote=null;this.isQuoting=false;this.slippage=.5;this.isAdvancedOpen=false;this.lpPercentage=0;this.quoteTimer=null;this.handleModeChange=e=>{this.mode=e;this.resetAmounts();this.currentQuote=null;this.removeQuote=null};this.resetAmounts=()=>{this.tokenAAmount="";this.tokenBAmount="";this.lpTokenAmount="";this.lpPercentage=0};this.openPoolSelector=()=>{this.isPoolSelectorOpen=true};this.selectStorePool=e=>{this.selectedStorePool=e;this.isPoolSelectorOpen=false;this.resetAmounts();this.poolSelected.emit(e);console.log("🎯 Pool selected:",{poolId:e.pool_id,token1:e.token_1,token2:e.token_2,totalLiquidity:e.total_liquidity,apr:e.apr})};this.handleMaxClick=e=>{if(e==="tokenA"&&this.selectedPool?.tokenA.balance){this.tokenAAmount=this.selectedPool.tokenA.balance;this.calculateTokenBFromA()}else if(e==="tokenB"&&this.selectedPool?.tokenB.balance){this.tokenBAmount=this.selectedPool.tokenB.balance;this.calculateTokenAFromB()}else if(e==="lp"){const e=this.getUserPosition();if(e){this.lpTokenAmount=e.lpTokenBalance;this.startQuoteTimer()}}};this.handlePercentageClick=e=>{this.lpPercentage=e;const t=this.getUserPosition();if(t){const i=(parseFloat(t.lpTokenBalance)*e/100).toFixed(6);this.lpTokenAmount=i;this.startQuoteTimer()}};this.handleLiquidity=()=>{if(!this.isWalletConnectedForLiquidity()){const e=this.getFirstDisconnectedChain();o.openWalletModal(e);return}if(!this.selectedPool)return;const e={pool_id:this.selectedPool.address,id:this.selectedPool.address,token_1:this.selectedPool.tokenA.address,token_2:this.selectedPool.tokenB.address,token1:this.selectedPool.tokenA.address,token2:this.selectedPool.tokenB.address,total_liquidity:this.selectedPool.totalSupply};u.setSelectedPool(e);if(this.mode==="add"&&this.currentQuote){u.setToken1Amount(this.tokenAAmount);u.setToken2Amount(this.tokenBAmount);D(_.LIQUIDITY.ADD_REQUEST);this.liquidityAdded.emit({pool:this.selectedPool,tokenAAmount:this.tokenAAmount,tokenBAmount:this.tokenBAmount,expectedLpTokens:this.currentQuote.lpTokensReceived,slippage:this.slippage})}else if(this.mode==="remove"&&this.removeQuote){D(_.LIQUIDITY.REMOVE_REQUEST,{poolId:this.selectedPool.address,lpTokenAmount:this.lpTokenAmount});this.liquidityRemoved.emit({pool:this.selectedPool,lpTokenAmount:this.lpTokenAmount,expectedTokenA:this.removeQuote.tokenAReceived,expectedTokenB:this.removeQuote.tokenBReceived,slippage:this.slippage})}}}async componentWillLoad(){this.syncWithStore();m.onChange("pools",(()=>{this.syncWithStore()}));m.onChange("tokens",(()=>{this.syncWithStore()}))}componentDidLoad(){this.startQuoteTimer()}disconnectedCallback(){if(this.quoteTimer){clearTimeout(this.quoteTimer)}}syncWithStore(){this.storePools=m.state.pools.length>0?m.state.pools:[];this.storeTokens=m.state.tokens.length>0?m.state.tokens:[];this.storeLoading=m.state.loading;console.log("🔄 Liquidity card store sync:",{storePools:this.storePools.length,storeTokens:this.storeTokens.length,storeLoading:this.storeLoading})}handleInputChange(e){const t=e.target.id;if(t==="token-a-input"){this.tokenAAmount=e.detail.value;this.calculateTokenBFromA()}else if(t==="token-b-input"){this.tokenBAmount=e.detail.value;this.calculateTokenAFromB()}else if(t==="lp-token-input"){this.lpTokenAmount=e.detail.value;this.startQuoteTimer()}}handleModalClose(){this.isPoolSelectorOpen=false}calculateTokenBFromA(){if(!this.selectedPool||!this.tokenAAmount||parseFloat(this.tokenAAmount)<=0){this.tokenBAmount="";return}const e=this.selectedPool;const t=parseFloat(e.reserveA);const i=parseFloat(e.reserveB);const a=parseFloat(this.tokenAAmount);const s=a*i/t;this.tokenBAmount=s.toFixed(6);this.startQuoteTimer()}calculateTokenAFromB(){if(!this.selectedPool||!this.tokenBAmount||parseFloat(this.tokenBAmount)<=0){this.tokenAAmount="";return}const e=this.selectedPool;const t=parseFloat(e.reserveA);const i=parseFloat(e.reserveB);const a=parseFloat(this.tokenBAmount);const s=a*t/i;this.tokenAAmount=s.toFixed(6);this.startQuoteTimer()}startQuoteTimer(){if(this.quoteTimer){clearTimeout(this.quoteTimer)}if(this.shouldRequestQuote()){this.quoteTimer=setTimeout((()=>{this.requestQuote()}),800)}else{this.currentQuote=null;this.removeQuote=null}}shouldRequestQuote(){if(!this.selectedPool)return false;if(this.mode==="add"){return!!(this.tokenAAmount&&this.tokenBAmount&&parseFloat(this.tokenAAmount)>0&&parseFloat(this.tokenBAmount)>0)}else{return!!(this.lpTokenAmount&&parseFloat(this.lpTokenAmount)>0)}}async requestQuote(){if(!this.selectedPool)return;this.isQuoting=true;const e={pool_id:this.selectedPool.address,id:this.selectedPool.address,token_1:this.selectedPool.tokenA.address,token_2:this.selectedPool.tokenB.address,token1:this.selectedPool.tokenA.address,token2:this.selectedPool.tokenB.address,total_liquidity:this.selectedPool.totalSupply};this.quoteRequested.emit({pool:e,tokenAAmount:this.mode==="add"?this.tokenAAmount:undefined,tokenBAmount:this.mode==="add"?this.tokenBAmount:undefined,lpTokenAmount:this.mode==="remove"?this.lpTokenAmount:undefined,mode:this.mode});setTimeout((()=>{if(this.selectedPool){if(this.mode==="add"&&this.tokenAAmount&&this.tokenBAmount){const e=this.selectedPool;const t=parseFloat(e.totalSupply);const i=parseFloat(e.reserveA);const a=parseFloat(this.tokenAAmount);const s=t>0?a/i*t:Math.sqrt(parseFloat(this.tokenAAmount)*parseFloat(this.tokenBAmount));this.currentQuote={tokenAAmount:this.tokenAAmount,tokenBAmount:this.tokenBAmount,lpTokensReceived:s.toFixed(6),shareOfPool:s/(t+s)*100,priceImpact:Math.random()*.5,minimumLpReceived:(s*(1-this.slippage/100)).toFixed(6)}}else if(this.mode==="remove"&&this.lpTokenAmount){const e=this.selectedPool;const t=parseFloat(e.totalSupply);const i=parseFloat(this.lpTokenAmount);const a=i/t*100;const s=i/t*parseFloat(e.reserveA);const o=i/t*parseFloat(e.reserveB);this.removeQuote={lpTokenAmount:this.lpTokenAmount,tokenAReceived:s.toFixed(6),tokenBReceived:o.toFixed(6),shareRemoved:a,minimumTokenAReceived:(s*(1-this.slippage/100)).toFixed(6),minimumTokenBReceived:(o*(1-this.slippage/100)).toFixed(6)}}}this.isQuoting=false}),1e3)}getUserPosition(){if(!this.selectedPool)return null;return this.positions.find((e=>e.poolAddress===this.selectedPool.address))||null}getFirstDisconnectedChain(){if(!this.selectedPool)return"ethereum";const e=r.isWalletConnected(this.selectedPool.tokenA.chainUID);if(!e)return this.selectedPool.tokenA.chainUID;return this.selectedPool.tokenB.chainUID}canExecute(){if(!this.selectedPool||!this.walletAddress||this.loading||this.disabled||this.isQuoting){return false}if(this.mode==="add"){return!!(this.currentQuote&&this.tokenAAmount&&this.tokenBAmount)}else{return!!(this.removeQuote&&this.lpTokenAmount)}}getButtonText(){if(!this.isWalletConnectedForLiquidity()){const e=this.getRequiredChainName();return`Connect ${e}`}if(!this.selectedPool)return"Select Pool";if(this.mode==="add"){if(!this.tokenAAmount||!this.tokenBAmount)return"Enter Amounts";if(this.isQuoting)return"Getting Quote...";if(this.loading)return"Adding Liquidity...";return"Add Liquidity"}else{if(!this.lpTokenAmount)return"Enter LP Amount";if(this.isQuoting)return"Getting Quote...";if(this.loading)return"Removing Liquidity...";return"Remove Liquidity"}}isWalletConnectedForLiquidity(){if(!this.selectedPool)return false;const e=r.isWalletConnected(this.selectedPool.tokenA.chainUID);const t=r.isWalletConnected(this.selectedPool.tokenB.chainUID);return e&&t}getRequiredChainName(){if(!this.selectedPool)return"Wallet";const e=r.isWalletConnected(this.selectedPool.tokenA.chainUID);const t=r.isWalletConnected(this.selectedPool.tokenB.chainUID);if(!e&&!t){return"Wallets"}else if(!e){return this.getChainDisplayName(this.selectedPool.tokenA.chainUID)}else if(!t){return this.getChainDisplayName(this.selectedPool.tokenB.chainUID)}return"Wallet"}getChainDisplayName(e){const t={ethereum:"Ethereum",polygon:"Polygon",arbitrum:"Arbitrum",optimism:"Optimism","cosmoshub-4":"Cosmos Hub","osmosis-1":"Osmosis"};return t[e]||"Wallet"}render(){const e=this.getUserPosition();return i("div",{key:"2eaac1501fd34d5208b4328c188ca4721e04cb8d",class:"liquidity-card"},i("div",{key:"a2b7439f3a446487c850efbeb5a3cee5b2dbea55",class:"liquidity-header"},i("h3",{key:"db2164046abc56c600578087bfd2f6aacf534d99",class:"liquidity-title"},this.cardTitle),i("div",{key:"ab36a9b4b797564fe6b29c828e85ca0067165cfc",class:"mode-toggle"},i("button",{key:"c65e21a889e2b4584d3457296ec439a4e4658cbf",class:{"mode-button":true,"mode-button--active":this.mode==="add"},onClick:()=>this.handleModeChange("add"),type:"button"},"Add"),i("button",{key:"fc6383689139728800474dafff43eb31903cb077",class:{"mode-button":true,"mode-button--active":this.mode==="remove"},onClick:()=>this.handleModeChange("remove"),type:"button"},"Remove"))),i("div",{key:"1b1e9a6853914fdeeb464ae2bcba63c3afa52885",class:"pool-section"},i("div",{key:"bd3189201dccbf5c89b550290ebd550b470f8906",class:"section-header"},i("span",{key:"f1f0fe8c6f8ba279ace2c9aed0917e26fa547cdc",class:"section-label"},"Pool")),i("div",{key:"16a02c65f9b080457c8345dd4111962fb4d35f33",class:"pool-selector",onClick:this.openPoolSelector},this.selectedStorePool?i("div",{class:"selected-pool"},i("div",{class:"pool-tokens"},i("div",{class:"token-pair"}),i("div",{class:"pool-info"},i("span",{class:"pool-name"},this.selectedStorePool.token_1.toUpperCase(),"/",this.selectedStorePool.token_2.toUpperCase()),i("span",{class:"pool-fee"},"Pool Fee"))),i("div",{class:"pool-stats"},i("div",{class:"stat"},i("span",{class:"stat-label"},"APR"),i("span",{class:"stat-value"},this.selectedStorePool.apr||"N/A")),i("div",{class:"stat"},i("span",{class:"stat-label"},"TVL"),i("span",{class:"stat-value"},"$",parseFloat(this.selectedStorePool.total_liquidity||"0").toLocaleString())))):i("div",{class:"select-pool-button"},i("span",null,"Select Pool"),i("svg",{class:"dropdown-arrow",viewBox:"0 0 24 24",fill:"currentColor"},i("path",{d:"M7 10l5 5 5-5z"}))))),this.mode==="remove"&&e&&i("div",{key:"2cff16d189db8a66f7b590115571ba2c66c22516",class:"position-info"},i("div",{key:"a29d606f1d95a0cec21b6954c981381f212e2ed4",class:"position-header"},i("span",{key:"b63343b6b5544858554ace32e9b37ee72a2dcc3b",class:"position-label"},"Your Position")),i("div",{key:"64022cef1d698c2b5e082a9581ff053920bb7839",class:"position-details"},i("div",{key:"8f889cce0925a164e5b37cade67d54866a77e5e5",class:"position-row"},i("span",{key:"1defb38fe07539fa0e33fa2f60625ae0ff7023e1",class:"position-item-label"},"LP Tokens"),i("span",{key:"99d0f8156d98d8d29f34c4fa7dbb5bd976ddfb24",class:"position-item-value"},parseFloat(e.lpTokenBalance).toLocaleString())),i("div",{key:"b029c1e635c4d5beeb1fb81502e1d4e872140981",class:"position-row"},i("span",{key:"c8f491d4eb097dde871d9fd68a1ce4453ca3c43a",class:"position-item-label"},"Pool Share"),i("span",{key:"8309a25d313ed3f04c19756d97486ba03757adba",class:"position-item-value"},e.shareOfPool.toFixed(4),"%")),i("div",{key:"00dd6e8aa530efe9df10112e86da234d9fa54b32",class:"position-row"},i("span",{key:"060b89e91a284256fd14cbf69b6bfa0691d2217c",class:"position-item-label"},this.selectedPool?.tokenA.symbol),i("span",{key:"9718aee33dfdc196c65b21882957d5fb102fc9b9",class:"position-item-value"},parseFloat(e.tokenAAmount).toLocaleString())),i("div",{key:"abf617d1d1bf6c9a8de0e93527ad13eaae904a4c",class:"position-row"},i("span",{key:"c437e9c5e75c65bdd8adb0f7d20654f99a231e91",class:"position-item-label"},this.selectedPool?.tokenB.symbol),i("span",{key:"8acc575c6e1d371d75eb1e553765e9b8f5713762",class:"position-item-value"},parseFloat(e.tokenBAmount).toLocaleString())))),this.mode==="add"?this.renderAddLiquidity():this.renderRemoveLiquidity(),(this.currentQuote||this.removeQuote)&&i("div",{key:"184e1ef7fd7fbbd73503b4c6c8c7f057d0e02833",class:"quote-info"},this.mode==="add"&&this.currentQuote?i("div",null,i("div",{class:"quote-row"},i("span",{class:"quote-label"},"LP Tokens Received"),i("span",{class:"quote-value"},parseFloat(this.currentQuote.lpTokensReceived).toLocaleString())),i("div",{class:"quote-row"},i("span",{class:"quote-label"},"Pool Share"),i("span",{class:"quote-value"},this.currentQuote.shareOfPool.toFixed(4),"%")),this.currentQuote.priceImpact>.1&&i("div",{class:"quote-row"},i("span",{class:"quote-label"},"Price Impact"),i("span",{class:{"quote-value":true,"quote-value--warning":this.currentQuote.priceImpact>1,"quote-value--danger":this.currentQuote.priceImpact>3}},this.currentQuote.priceImpact.toFixed(3),"%"))):this.mode==="remove"&&this.removeQuote?i("div",null,i("div",{class:"quote-row"},i("span",{class:"quote-label"},"Pool Share Removed"),i("span",{class:"quote-value"},this.removeQuote.shareRemoved.toFixed(4),"%")),i("div",{class:"quote-row"},i("span",{class:"quote-label"},this.selectedPool?.tokenA.symbol," Received"),i("span",{class:"quote-value"},parseFloat(this.removeQuote.tokenAReceived).toLocaleString())),i("div",{class:"quote-row"},i("span",{class:"quote-label"},this.selectedPool?.tokenB.symbol," Received"),i("span",{class:"quote-value"},parseFloat(this.removeQuote.tokenBReceived).toLocaleString()))):null),i("div",{key:"d9531c934c1e0c05848c297e1c50ea0649e0a38f",class:"advanced-section"},i("button",{key:"dfef96f9559a919d0f5bd4d7f5e55b829a129c41",class:"advanced-toggle",onClick:()=>this.isAdvancedOpen=!this.isAdvancedOpen,type:"button"},i("span",{key:"52f879345f501bcb6e02e3661f9a8f87ea1477e3"},"Advanced Settings"),i("svg",{key:"a75166827c12cf314ab5d3e1c9712a5f7e50308e",class:{"dropdown-arrow":true,"dropdown-arrow--open":this.isAdvancedOpen},viewBox:"0 0 24 24",fill:"currentColor"},i("path",{key:"6de1af93667a42f0fc17fdc81682823a279f3856",d:"M7 10l5 5 5-5z"}))),this.isAdvancedOpen&&i("div",{key:"a93d4474f5e003bf601959e51b2de24aa82bfa7d",class:"advanced-panel"},i("div",{key:"b68da6f9668ee94c1e430f61a44591c367869466",class:"setting-item"},i("label",{key:"9fde6833afa1c1b403232bc3ac92102ba4d43ef7",class:"setting-label"},"Slippage Tolerance"),i("div",{key:"61a678c99266189e24909faf3953fa8514a04531",class:"slippage-controls"},[.1,.5,1].map((e=>i("button",{class:{"slippage-btn":true,"slippage-btn--active":this.slippage===e},onClick:()=>this.slippage=e,type:"button"},e,"%"))),i("input",{key:"8f86930b49e74818244579990713edc0bb5d133e",class:"slippage-input",type:"number",min:"0",max:"50",step:"0.1",value:this.slippage,onInput:e=>this.slippage=parseFloat(e.target.value),placeholder:"Custom"}))))),i("euclid-button",{key:"8e78f930e9bb0dfa18fd4c45e69876e6d259fa01",variant:"primary",size:"lg","full-width":true,loading:this.loading,disabled:!this.canExecute(),onClick:this.handleLiquidity},this.getButtonText()),this.isPoolSelectorOpen&&i("div",{key:"f0d23b8ceb782c7f0acf22aac0328c7f9da0368a",class:"pool-selector-dropdown"},i("div",{key:"ce6ca515b15032ce8176f62b1534f7da5e450733",class:"dropdown-header"},i("h4",{key:"95536f5cedfe73e880e71b6e56069d63921d87e4"},"Select Pool"),i("button",{key:"ae99185a1c5db53cd3fb159a0d21f92ffd8fda7f",class:"close-button",onClick:()=>this.isPoolSelectorOpen=false},"×")),i("div",{key:"b3ab9d1ddc9bab0618de105f445d8f915cf1911c",class:"pool-list"},this.storePools.length>0?this.storePools.map((e=>i("div",{key:e.pool_id,class:"pool-item",onClick:()=>this.selectStorePool(e)},i("div",{class:"pool-tokens"},i("span",{class:"pool-name"},e.token_1.toUpperCase(),"/",e.token_2.toUpperCase())),i("div",{class:"pool-stats"},i("span",{class:"apr"},"APR: ",e.apr||"0.00%"),i("span",{class:"tvl"},"TVL: $",parseFloat(e.total_liquidity||"0").toLocaleString()))))):i("div",{class:"no-pools"},"No pools available"))))}renderAddLiquidity(){return i("div",{class:"liquidity-inputs"},i("div",{class:"token-input-section"},i("div",{class:"input-header"},i("span",{class:"input-label"},"First Token"),this.selectedPool?.tokenA.balance&&i("span",{class:"balance-label",onClick:()=>this.handleMaxClick("tokenA")},"Balance: ",parseFloat(this.selectedPool.tokenA.balance).toLocaleString())),i("euclid-token-input",{id:"token-a-input",value:this.tokenAAmount,placeholder:"0.0","show-max":!!this.selectedPool?.tokenA.balance,onMaxClick:()=>this.handleMaxClick("tokenA")},i("div",{slot:"token",class:"token-display"},this.selectedStorePool?i("div",{class:"selected-token"},i("div",{class:"token-info"},i("span",{class:"token-symbol"},this.selectedStorePool.token_1.toUpperCase()),i("span",{class:"token-name"},this.selectedStorePool.token_1))):i("div",{class:"no-pool-selected"},i("span",{class:"token-symbol"},"TOKEN"),i("span",{class:"token-name"},"Select pool first"))))),i("div",{class:"token-input-section"},i("div",{class:"input-header"},i("span",{class:"input-label"},"Second Token"),this.selectedPool?.tokenB.balance&&i("span",{class:"balance-label",onClick:()=>this.handleMaxClick("tokenB")},"Balance: ",parseFloat(this.selectedPool.tokenB.balance).toLocaleString())),i("euclid-token-input",{id:"token-b-input",value:this.tokenBAmount,placeholder:"0.0","show-max":!!this.selectedPool?.tokenB.balance,onMaxClick:()=>this.handleMaxClick("tokenB")},i("div",{slot:"token",class:"token-display"},this.selectedStorePool?i("div",{class:"selected-token"},i("div",{class:"token-info"},i("span",{class:"token-symbol"},this.selectedStorePool.token_2.toUpperCase()),i("span",{class:"token-name"},this.selectedStorePool.token_2))):i("div",{class:"no-pool-selected"},i("span",{class:"token-symbol"},"TOKEN"),i("span",{class:"token-name"},"Select pool first"))))))}renderRemoveLiquidity(){const e=this.getUserPosition();return i("div",{class:"remove-liquidity"},i("div",{class:"percentage-section"},i("div",{class:"percentage-label"},"Amount to Remove"),i("div",{class:"percentage-buttons"},[25,50,75,100].map((e=>i("button",{class:{"percentage-btn":true,"percentage-btn--active":this.lpPercentage===e},onClick:()=>this.handlePercentageClick(e),type:"button"},e,"%"))))),i("div",{class:"token-input-section"},i("div",{class:"input-header"},i("span",{class:"input-label"},"LP Tokens to Remove"),e&&i("span",{class:"balance-label",onClick:()=>this.handleMaxClick("lp")},"Balance: ",parseFloat(e.lpTokenBalance).toLocaleString())),i("euclid-token-input",{id:"lp-token-input",value:this.lpTokenAmount,placeholder:"0.0","show-max":!!e,onMaxClick:()=>this.handleMaxClick("lp")},i("div",{slot:"token",class:"lp-token-display"},this.selectedPool?i("div",{class:"lp-token-info"},i("div",{class:"token-pair"},this.selectedPool.tokenA.logoUrl&&i("img",{src:this.selectedPool.tokenA.logoUrl,alt:this.selectedPool.tokenA.symbol,class:"token-logo"}),this.selectedPool.tokenB.logoUrl&&i("img",{src:this.selectedPool.tokenB.logoUrl,alt:this.selectedPool.tokenB.symbol,class:"token-logo token-logo--overlap"})),i("span",{class:"lp-symbol"},this.selectedPool.lpTokenSymbol)):i("span",null,"Select Pool")))))}get element(){return s(this)}};B.style=$;const U=class{constructor(t){e(this,t);this.isInitialized=false}async componentWillLoad(){await this.initialize()}async componentDidLoad(){}async initialize(){console.log("💧 Initializing Liquidity Controller...");const e=this.config?JSON.parse(this.config):c;this.apiClient=h(e);u.onChange("selectedPool",(()=>this.handlePoolChange()));this.isInitialized=true;console.log("✅ Liquidity Controller initialized")}handlePoolChange(){const{selectedPool:e}=u.state;if(e){console.log("🏊 Pool selected for liquidity operations:",e.id)}}async executeAddLiquidity(){try{const{selectedPool:e,token1:t,token2:i,token1Amount:a,token2Amount:s}=u.state;if(!e||!t||!i||!a||!s){return{success:false,error:"Missing required liquidity parameters"}}const o=r.getWallet(t.chainUID);const n=r.getWallet(i.chainUID);if(!o?.isConnected){return{success:false,error:`Wallet not connected for ${t.symbol}`}}if(!n?.isConnected){return{success:false,error:`Wallet not connected for ${i.symbol}`}}if(!r.hasSufficientBalance(t.chainUID,t.id,a)){return{success:false,error:`Insufficient ${t.symbol} balance`}}if(!r.hasSufficientBalance(i.chainUID,i.id,s)){return{success:false,error:`Insufficient ${i.symbol} balance`}}u.setAddingLiquidity(true);console.log("💧 Executing add liquidity...",{pool:e.id,token1:t.symbol,token2:i.symbol,amount1:a,amount2:s});const l=await this.apiClient.createAddLiquidityTransactionWrapped({slippage_tolerance_bps:50,timeout:(Math.floor(Date.now()/1e3)+1200).toString(),pair_info:{token_1:{token:t.id,amount:a,token_type:t.token_type||{native:{denom:t.id}}},token_2:{token:i.id,amount:s,token_type:i.token_type||{native:{denom:i.id}}}},sender:{address:o.address,chain_uid:t.chainUID}});if(l.success&&l.data){const e=l.data;const{txHash:t}=e;const i=r.getAllConnectedWallets();const a=i[0];const s=a.chainUID;r.addTransaction(s,{txHash:t||l.data?.transactionHash||"pending",timestamp:Date.now(),type:"add_liquidity"});D(_.TRANSACTION.SUBMITTED,{txHash:t,chainUID:s,type:"add_liquidity"});console.log("✅ Add liquidity transaction submitted:",t);return{success:true,txHash:t}}else{return{success:false,error:l.error||"Add liquidity execution failed"}}}catch(e){const t=e instanceof Error?e.message:"Unknown error occurred";console.error("❌ Add liquidity execution error:",t);return{success:false,error:t}}finally{u.setAddingLiquidity(false)}}async executeRemoveLiquidity(e,t){try{const i=u.getPosition(e);if(!i){return{success:false,error:"Liquidity position not found"}}const a=m.state.pools;const s=a.find((t=>t.id===e));if(!s){return{success:false,error:"Pool not found"}}const o=m.state.tokens;const n=o.find((e=>e.address===s.token_1));if(!n){return{success:false,error:"Token metadata not found"}}const l=r.getWallet(n.chain_uid);if(!l?.isConnected){return{success:false,error:`Wallet not connected for ${n.chain_uid}`}}const c=r.getWalletBalance(n.chain_uid,`lp-${e}`);if(!c||BigInt(c.amount)<BigInt(t)){return{success:false,error:"Insufficient LP token balance"}}u.setRemovingLiquidity(true);console.log("💧 Executing remove liquidity...",{poolId:e,lpAmount:t});const d=await this.apiClient.createRemoveLiquidityTransactionWrapped({slippage_tolerance_bps:50,timeout:(Math.floor(Date.now()/1e3)+1200).toString(),lp_token_amount:t,sender:{address:l.address,chain_uid:n.chain_uid}});if(d.success&&d.data){const e=d.data;const{txHash:t}=e;r.addTransaction(n.chain_uid,{txHash:t,timestamp:Date.now(),type:"remove_liquidity"});D(_.TRANSACTION.SUBMITTED,{txHash:t,chainUID:n.chain_uid,type:"remove_liquidity"});console.log("✅ Remove liquidity transaction submitted:",t);return{success:true,txHash:t}}else{return{success:false,error:d.error||"Remove liquidity execution failed"}}}catch(e){const t=e instanceof Error?e.message:"Unknown error occurred";console.error("❌ Remove liquidity execution error:",t);return{success:false,error:t}}finally{u.setRemovingLiquidity(false)}}async handleAddLiquidityExecution(){console.log("💧 Add liquidity execution requested via event");const e=await this.executeAddLiquidity();if(e.success){D(_.LIQUIDITY.ADD_SUCCESS,{txHash:e.txHash})}else{D(_.LIQUIDITY.ADD_FAILED,{error:e.error})}}async handleRemoveLiquidityExecution(e){console.log("💧 Remove liquidity execution requested via event");const{poolId:t,lpTokenAmount:i}=e.detail;const a=await this.executeRemoveLiquidity(t,i);if(a.success){D(_.LIQUIDITY.REMOVE_SUCCESS,{txHash:a.txHash})}else{D(_.LIQUIDITY.REMOVE_FAILED,{error:a.error})}}onInitializedChange(e){if(e){console.log("💧 Liquidity Controller ready for operations")}}render(){return null}static get watchers(){return{isInitialized:["onInitializedChange"]}}};class j{constructor(e={}){this.pendingRequests=new Map;this.cache=new Map;this.config={ttl:3e4,priority:"normal",...e}}async request(e,t,i){const a={...this.config,...i};if(this.pendingRequests.has(e)){return this.pendingRequests.get(e)}const s=this.cache.get(e);if(s&&Date.now()-s.timestamp<a.ttl){return s.data}const o=t();this.pendingRequests.set(e,o);try{const t=await o;this.cache.set(e,{data:t,timestamp:Date.now()});return t}finally{this.pendingRequests.delete(e)}}clearCache(e){this.cache.delete(e)}clearAllCache(){this.cache.clear()}isCached(e,t){const i=this.cache.get(e);if(!i)return false;const a=t||this.config.ttl;return Date.now()-i.timestamp<a}getCacheStats(){return{size:this.cache.size,keys:Array.from(this.cache.keys())}}}const H=new j;class Y{constructor(){this.tasks=new Map;this.isDocumentVisible=true;this.setupVisibilityHandling()}register(e,t,i){this.unregister(e);const a={id:e,fn:t,config:{pauseOnHidden:true,...i},isActive:true};this.tasks.set(e,a);this.startTask(a)}unregister(e){const t=this.tasks.get(e);if(t){this.stopTask(t);this.tasks.delete(e)}}pause(e){const t=this.tasks.get(e);if(t){t.isActive=false;this.stopTask(t)}}resume(e){const t=this.tasks.get(e);if(t){t.isActive=true;this.startTask(t)}}pauseAll(){this.tasks.forEach((e=>{e.isActive=false;this.stopTask(e)}))}resumeAll(){this.tasks.forEach((e=>{e.isActive=true;this.startTask(e)}))}getTaskStatus(e){const t=this.tasks.get(e);if(!t){return{isRegistered:false,isActive:false}}return{isRegistered:true,isActive:t.isActive&&!!t.intervalId,interval:this.getTaskInterval(t)}}getTasks(){return Array.from(this.tasks.keys())}destroy(){this.tasks.forEach((e=>this.stopTask(e)));this.tasks.clear();this.removeVisibilityHandling()}startTask(e){if(!e.isActive)return;if(!this.isDocumentVisible&&e.config.pauseOnHidden){return}const t=this.getTaskInterval(e);e.intervalId=window.setInterval((async()=>{try{await e.fn()}catch(t){console.error(`Polling task ${e.id} failed:`,t)}}),t)}stopTask(e){if(e.intervalId){clearInterval(e.intervalId);e.intervalId=undefined}}getTaskInterval(e){return this.isDocumentVisible?e.config.activeInterval:e.config.backgroundInterval}setupVisibilityHandling(){if(typeof document==="undefined")return;const e=()=>{this.isDocumentVisible=!document.hidden;if(this.isDocumentVisible){this.handleDocumentVisible()}else{this.handleDocumentHidden()}};document.addEventListener("visibilitychange",e);this.visibilityHandler=e}removeVisibilityHandling(){if(typeof document==="undefined")return;if(this.visibilityHandler){document.removeEventListener("visibilitychange",this.visibilityHandler);this.visibilityHandler=undefined}}handleDocumentVisible(){this.tasks.forEach((e=>{if(e.isActive&&e.config.pauseOnHidden){this.stopTask(e);this.startTask(e)}}))}handleDocumentHidden(){this.tasks.forEach((e=>{if(e.isActive&&e.config.pauseOnHidden){this.stopTask(e);this.startTask(e)}}))}}const J=new Y;const K=class{constructor(t){e(this,t);this.isInitialized=false}async componentWillLoad(){this.euclidConfig=this.config?JSON.parse(this.config):c;this.apiClient=h(this.euclidConfig);await this.initialize()}async componentDidLoad(){}disconnectedCallback(){J.unregister("market-data-refresh")}async initialize(){console.log("📊 Initializing Market Data Controller...");await this.loadInitialData();this.setupPeriodicRefresh();this.isInitialized=true;console.log("📊 Market Data Controller initialized")}async loadInitialData(){return H.request("market-initial-data",(async()=>{try{m.setLoading(true);console.log("📊 Loading initial market data...");const[e,t,i]=await Promise.all([this.apiClient.getChains({showAllChains:false}),this.apiClient.getTokenMetadata(),this.apiClient.getAllPools()]);if(e&&e.length>0){m.setChains(e);console.log("📡 Loaded chains:",e.length)}else{console.warn("No chains data received")}if(t&&t.length>0){m.setTokens(t);console.log("🪙 Loaded tokens:",t.length)}else{console.warn("No tokens data received")}if(i.success&&i.data){m.setPools(i.data);console.log("🏊 Loaded pools:",i.data.length)}else{console.warn("Failed to load pools:",i.error)}return{success:true}}catch(e){console.error("Failed to load initial market data:",e);throw e}finally{m.setLoading(false)}}),{ttl:this.euclidConfig.performance.cache.marketData})}setupPeriodicRefresh(){console.log(`📊 Setting up polling - Active: ${this.euclidConfig.performance.polling.active.marketData}ms, Cache TTL: ${this.euclidConfig.performance.cache.marketData}ms`);J.register("market-data-refresh",(()=>this.refreshMarketData().then((()=>{}))),{activeInterval:this.euclidConfig.performance.polling.active.marketData,backgroundInterval:this.euclidConfig.performance.polling.background.marketData});console.log("📊 Market data polling registered with coordinator")}async refreshMarketData(){console.log("🔄 Refresh market data called - checking what needs updating...");const e=m.isChainsStale(this.euclidConfig.performance.cache.chains);const t=m.isTokensStale(this.euclidConfig.performance.cache.tokens);if(!e&&!t){console.log("⏭️ Neither chains nor tokens are stale, skipping API calls");return}console.log(`🌐 Refreshing: ${e?"chains ":""}${t?"tokens":""}`);return H.request("market-refresh",(async()=>{try{m.setLoading(true);if(e&&t){const[e,t]=await Promise.all([this.apiClient.getChains({showAllChains:false}),this.apiClient.getTokenMetadata()]);if(e&&e.length>0){m.setChains(e);console.log("📡 Refreshed chains:",e.length)}if(t&&t.length>0){m.setTokens(t);console.log("💰 Refreshed tokens:",t.length)}}else if(e){const e=await this.apiClient.getChains({showAllChains:false});if(e&&e.length>0){m.setChains(e);console.log("📡 Refreshed chains only:",e.length)}}else if(t){const e=await this.apiClient.getTokenMetadata();if(e&&e.length>0){m.setTokens(e);console.log("💰 Refreshed tokens only:",e.length)}}console.log("✅ Market data refreshed successfully");return{success:true}}catch(e){console.error("❌ Failed to refresh market data:",e);throw e}finally{m.setLoading(false)}}),{ttl:this.euclidConfig.performance.cache.marketData})}async handleInitialDataLoad(){console.log("📊 Loading initial market data...");await this.loadInitialData()}async handleRefreshRequest(){console.log("🔄 Manual market data refresh requested");await this.refreshMarketData()}async handleTokenDetailsRequest(e){const{tokenId:t}=e.detail;console.log("📋 Loading token details for:",t);try{const e=await H.request(`token-denoms-${t}`,(()=>this.apiClient.getTokenDenoms(t)),{ttl:this.euclidConfig.performance.cache.tokens});if(e.success&&e.data){const i=e.data.router.token_denoms.denoms;D(_.MARKET.TOKEN_DETAILS_SUCCESS,{tokenId:t,data:{denoms:i}})}const i=await H.request(`token-escrows-${t}`,(()=>this.apiClient.getEscrows(t)),{ttl:this.euclidConfig.performance.cache.tokens});if(i.success&&i.data){const e=i.data.router.escrows;D(_.MARKET.ESCROWS_LOADED,{tokenId:t,data:{escrows:e}})}}catch(e){console.error("Failed to load token details:",e);D(_.MARKET.TOKEN_DETAILS_FAILED,{tokenId:t,error:e.message})}}async handleChainDetailsRequest(e){const{chainUID:t}=e.detail;console.log("🔗 Loading chain details for:",t);try{const e=m.getChain(t);if(e){D(_.MARKET.CHAIN_DETAILS_SUCCESS,{chainUID:t,data:{chain:e}})}else{await this.refreshMarketData()}}catch(e){console.error("Failed to load chain details:",e);D(_.MARKET.CHAIN_DETAILS_FAILED,{chainUID:t,error:e.message})}}render(){return null}};const Q=":host{display:contents}.modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;z-index:var(--euclid-z-modal-backdrop);background:var(--euclid-surface-overlay);display:flex;align-items:center;justify-content:center;padding:var(--euclid-space-4);animation:fadeIn var(--euclid-transition-base);isolation:isolate}.modal-container{background:var(--euclid-surface);border-radius:var(--euclid-radius-2xl);box-shadow:var(--euclid-shadow-2xl);border:var(--euclid-border-1) solid var(--euclid-border);max-width:var(--euclid-modal-max-width-base);width:100%;max-height:90vh;overflow:hidden;display:flex;flex-direction:column;animation:slideUp var(--euclid-transition-base);outline:none;position:relative}.modal-header{display:flex;justify-content:space-between;align-items:center;padding:var(--euclid-space-6);border-bottom:var(--euclid-border-1) solid var(--euclid-border)}.modal-title{margin:0;font-size:var(--euclid-text-lg);font-weight:var(--euclid-font-semibold);color:var(--euclid-text-primary)}.close-button{display:flex;align-items:center;justify-content:center;width:var(--euclid-space-8);height:var(--euclid-space-8);background:transparent;border:none;border-radius:var(--euclid-radius-lg);color:var(--euclid-text-tertiary);cursor:pointer;transition:all var(--euclid-transition-fast)}.close-button:hover{background:var(--euclid-surface-secondary);color:var(--euclid-text-secondary)}.close-button svg{width:var(--euclid-space-4);height:var(--euclid-space-4)}.modal-content{padding:var(--euclid-space-6);overflow-y:auto;flex:1;min-height:0;}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes slideUp{from{opacity:0;transform:translateY(var(--euclid-space-8))}to{opacity:1;transform:translateY(0)}}@media (max-width: 640px){.modal-overlay{padding:var(--euclid-space-2)}.modal-container{max-width:100%}.modal-header,.modal-content{padding:var(--euclid-space-4)}}@media (max-width: 480px){.modal-container{width:100%;height:100%;max-height:100vh;border-radius:0}.modal-header{padding:var(--euclid-space-3) var(--euclid-space-4)}.modal-title{font-size:var(--euclid-text-base)}.modal-content{padding:var(--euclid-space-3) var(--euclid-space-4)}}.close-button:focus-visible{outline:2px solid var(--euclid-border-focus);outline-offset:2px}@media (prefers-reduced-motion: reduce){.modal-overlay,.modal-container{animation:none}}";const G=class{constructor(t){e(this,t);this.appState=o.state;this.previousActiveElement=null;this.previousBodyOverflow="";this.previousBodyPaddingRight="";this.scrollBarWidth=0;this.handleOverlayClick=e=>{if(e.target===e.currentTarget){this.closeModal()}}}componentWillLoad(){console.log("🚀 Modal componentWillLoad");console.log("📊 Initial appState:",this.appState);console.log("📊 Initial store state:",o.state);this.scrollBarWidth=this.getScrollBarWidth();console.log("📏 Scrollbar width:",this.scrollBarWidth);o.onChange("walletModalOpen",(()=>{console.log("👛 Wallet modal state changed:",o.state.walletModalOpen);const e=this.appState.walletModalOpen||this.appState.tokenModalOpen;const t={...o.state};const i=t.walletModalOpen||t.tokenModalOpen;this.appState=t;console.log("👛 Wallet modal state transition:",{wasOpen:e,isNowOpen:i});this.handleModalStateChange(e,i)}));o.onChange("tokenModalOpen",(()=>{console.log("🪙 Token modal state changed:",o.state.tokenModalOpen);const e=this.appState.walletModalOpen||this.appState.tokenModalOpen;const t={...o.state};const i=t.walletModalOpen||t.tokenModalOpen;this.appState=t;console.log("🪙 Token modal state transition:",{wasOpen:e,isNowOpen:i});this.handleModalStateChange(e,i)}))}componentDidLoad(){console.log("🎬 componentDidLoad called");const e=this.appState.walletModalOpen||this.appState.tokenModalOpen;console.log("🎬 componentDidLoad isOpen:",e);if(e){console.log("🎬 componentDidLoad calling onModalOpen");this.onModalOpen()}}disconnectedCallback(){this.onModalClose()}handleKeyDown(e){const t=this.appState.walletModalOpen||this.appState.tokenModalOpen;if(!t)return;if(e.key==="Escape"){this.closeModal()}if(e.key==="Tab"){this.handleTabKey(e)}}closeModal(){o.closeWalletModal();o.closeTokenModal()}getScrollBarWidth(){if(typeof window==="undefined")return 0;const e=document.createElement("div");e.style.visibility="hidden";e.style.overflow="scroll";document.body.appendChild(e);const t=document.createElement("div");e.appendChild(t);const i=e.offsetWidth-t.offsetWidth;document.body.removeChild(e);return i}handleModalStateChange(e,t){console.log("🔄 handleModalStateChange:",{wasOpen:e,isNowOpen:t});if(!e&&t){console.log("▶️ Opening modal");this.onModalOpen()}else if(e&&!t){console.log("⏹️ Closing modal");this.onModalClose()}else{console.log("➡️ No state change needed")}}onModalOpen(){console.log("🔒 onModalOpen called");if(typeof window==="undefined"){console.log("❌ No window, returning");return}try{this.previousActiveElement=document.activeElement;console.log("💾 Stored active element:",this.previousActiveElement);const e=document.body;this.previousBodyOverflow=e.style.overflow||"";e.style.overflow="hidden";console.log("🔒 BODY SCROLL LOCKED!",{previousOverflow:this.previousBodyOverflow,newOverflow:e.style.overflow});requestAnimationFrame((()=>{const e=this.el.shadowRoot?.querySelector(".modal-container");if(e){e.focus();console.log("🎯 Modal focused")}}))}catch(e){console.error("❌ Error in onModalOpen:",e)}}onModalClose(){console.log("🔓 onModalClose called");if(typeof window==="undefined"){console.log("❌ No window, returning");return}try{const e=document.body;e.style.overflow=this.previousBodyOverflow;console.log("🔓 BODY SCROLL RESTORED!",{restoredOverflow:this.previousBodyOverflow,currentOverflow:e.style.overflow});if(this.previousActiveElement&&typeof this.previousActiveElement.focus==="function"){this.previousActiveElement.focus();console.log("🎯 Focus restored to:",this.previousActiveElement)}this.previousActiveElement=null}catch(e){console.error("❌ Error in onModalClose:",e)}}handleTabKey(e){const t=this.el.shadowRoot;if(!t)return;const i=t.querySelector(".modal-container");if(!i)return;const a=i.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(a.length===0)return;const s=a[0];const o=a[a.length-1];const r=t.activeElement||document.activeElement;if(e.shiftKey){if(r===s||!i.contains(r)){o?.focus();e.preventDefault()}}else{if(r===o||!i.contains(r)){s?.focus();e.preventDefault()}}}render(){const e=this.appState.walletModalOpen||this.appState.tokenModalOpen;console.log("🎭 Modal render called:",{isOpen:e,walletOpen:this.appState.walletModalOpen,tokenOpen:this.appState.tokenModalOpen});if(!e){console.log("🚫 Modal not open, returning null");if(document.body.style.overflow==="hidden"){console.log("🔓 FORCE restoring scroll on closed modal");document.body.style.overflow=this.previousBodyOverflow||""}return null}if(document.body.style.overflow!=="hidden"){console.log("🔒 FORCE locking scroll in render");this.previousBodyOverflow=document.body.style.overflow||"";document.body.style.overflow="hidden"}let t="";let a=null;if(this.appState.walletModalOpen){t="Connect Wallet";a=i("euclid-wallet-content",null);console.log("👛 Rendering wallet modal")}else if(this.appState.tokenModalOpen){t="Select Token";a=i("euclid-token-content",null);console.log("🪙 Rendering token modal")}return i("div",{class:"modal-overlay",onClick:this.handleOverlayClick,role:"dialog","aria-modal":"true","aria-hidden":"false"},i("div",{class:"modal-container",role:"document",tabindex:"-1","aria-labelledby":"modal-title","aria-describedby":"modal-content"},i("div",{class:"modal-header"},i("h2",{id:"modal-title",class:"modal-title"},t),i("button",{class:"close-button",onClick:()=>this.closeModal(),type:"button","aria-label":"Close modal"},i("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},i("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})))),i("div",{id:"modal-content",class:"modal-content"},a)))}get el(){return s(this)}};G.style=Q;const Z=":host{display:block;width:100%;font-family:var(--euclid-font-family, 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif)}.portfolio-overview{background:var(--euclid-surface);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-2xl);overflow:hidden;box-shadow:var(--euclid-shadow-sm)}.portfolio-overview.loading,.portfolio-overview.empty{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:64px 24px;text-align:center;color:var(--euclid-text-secondary)}.loading-spinner{display:inline-block;width:32px;height:32px;border:3px solid var(--euclid-border);border-top-color:var(--euclid-interactive-primary);border-radius:50%;animation:spin 1s linear infinite;margin-bottom:16px}@keyframes spin{to{transform:rotate(360deg)}}.empty-state{display:flex;flex-direction:column;align-items:center;gap:16px}.empty-state svg{width:64px;height:64px;color:var(--euclid-text-muted, #9ca3af)}.empty-state span{font-size:18px;color:var(--euclid-text-secondary)}.portfolio-header{display:flex;justify-content:space-between;align-items:center;padding:24px;border-bottom:1px solid var(--euclid-border);background:var(--euclid-surface-secondary)}.portfolio-title{margin:0;font-size:24px;font-weight:600;color:var(--euclid-text-primary)}.wallet-info{display:flex;align-items:center;gap:8px}.wallet-address{padding:6px 12px;background:var(--euclid-bg-tertiary, #f1f5f9);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-lg);font-family:'Monaco', 'Menlo', 'Ubuntu Mono', monospace;font-size:14px;color:var(--euclid-text-secondary)}.portfolio-tabs{display:flex;border-bottom:1px solid var(--euclid-border);background:var(--euclid-surface-secondary);overflow-x:auto}.tab-btn{padding:16px 24px;background:transparent;border:none;border-bottom:2px solid transparent;color:var(--euclid-text-secondary);font-size:14px;font-weight:500;cursor:pointer;transition:all 0.2s ease;white-space:nowrap}.tab-btn:hover{background:var(--euclid-surface-secondary);color:var(--euclid-text-primary)}.tab-btn--active{color:var(--euclid-interactive-primary);border-bottom-color:var(--euclid-interactive-primary);background:var(--euclid-interactive-primary)}.portfolio-content{padding:24px}.overview-tab{display:flex;flex-direction:column;gap:32px}.stats-grid{display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:20px}.stat-card{padding:20px;background:var(--euclid-surface-secondary);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-2xl);display:flex;flex-direction:column;gap:8px}.stat-label{font-size:14px;color:var(--euclid-text-muted, #6b7280);font-weight:500;text-transform:uppercase;letter-spacing:0.5px}.stat-value{font-size:24px;font-weight:700;color:var(--euclid-text-primary);line-height:1.2}.stat-value--positive{color:var(--euclid-success-color, #10b981)}.stat-value--negative{color:var(--euclid-error-color, #ef4444)}.stat-change{font-size:12px;font-weight:500}.stat-change--positive{color:var(--euclid-success-color, #10b981)}.stat-change--negative{color:var(--euclid-error-color, #ef4444)}.chart-section{display:flex;flex-direction:column;gap:16px}.chart-header{display:flex;justify-content:space-between;align-items:center}.chart-header h3{margin:0;font-size:18px;font-weight:600;color:var(--euclid-text-primary)}.time-period-selector{display:flex;gap:4px;background:var(--euclid-bg-tertiary, #f1f5f9);border-radius:var(--euclid-radius-lg);padding:4px}.period-btn{padding:6px 12px;background:transparent;border:none;border-radius:var(--euclid-border-radius-sm, 6px);color:var(--euclid-text-secondary);font-size:12px;font-weight:500;cursor:pointer;transition:all 0.2s ease}.period-btn:hover{background:var(--euclid-surface-secondary);color:var(--euclid-text-primary)}.period-btn--active{background:var(--euclid-interactive-primary);color:white}.chart-container{height:200px;background:var(--euclid-surface-secondary);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-2xl);padding:20px;display:flex;align-items:center;justify-content:center}.allocation-section{display:flex;flex-direction:column;gap:16px}.allocation-section h3{margin:0;font-size:18px;font-weight:600;color:var(--euclid-text-primary)}.allocation-grid{display:flex;flex-direction:column;gap:12px}.allocation-item{display:flex;align-items:center;justify-content:space-between;padding:16px;background:var(--euclid-surface-secondary);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-2xl);transition:background-color 0.2s ease}.allocation-item:hover{background:var(--euclid-surface-secondary)}.token-info{display:flex;align-items:center;gap:12px;flex:1}.token-logo{width:32px;height:32px;border-radius:50%}.token-details{display:flex;flex-direction:column;gap:2px}.token-symbol{font-weight:600;color:var(--euclid-text-primary);font-size:14px}.token-balance{font-size:12px;color:var(--euclid-text-muted, #6b7280)}.token-value{display:flex;flex-direction:column;align-items:flex-end;gap:2px;margin-right:20px}.value-primary{font-weight:600;color:var(--euclid-text-primary);font-size:14px}.allocation-percent{font-size:12px;color:var(--euclid-text-muted, #6b7280)}.price-change{font-size:12px;font-weight:500;min-width:60px;text-align:right}.price-change--positive{color:var(--euclid-success-color, #10b981)}.price-change--negative{color:var(--euclid-error-color, #ef4444)}.positions-tab{display:flex;flex-direction:column;gap:20px}.positions-header{display:flex;justify-content:space-between;align-items:center}.positions-header h3{margin:0;font-size:18px;font-weight:600;color:var(--euclid-text-primary)}.sort-controls{display:flex;gap:8px}.sort-btn{display:flex;align-items:center;gap:4px;padding:8px 12px;background:transparent;border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-lg);color:var(--euclid-text-secondary);font-size:12px;font-weight:500;cursor:pointer;transition:all 0.2s ease}.sort-btn:hover{background:var(--euclid-surface-secondary);border-color:var(--euclid-border-hover)}.sort-btn--active{background:var(--euclid-interactive-primary);border-color:var(--euclid-interactive-primary);color:white}.sort-arrow{width:12px;height:12px;transition:transform 0.2s ease}.sort-arrow--desc{transform:rotate(180deg)}.positions-list{display:flex;flex-direction:column;gap:16px}.position-card{padding:20px;background:var(--euclid-surface-secondary);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-2xl);cursor:pointer;transition:all 0.2s ease}.position-card:hover{background:var(--euclid-surface-secondary);border-color:var(--euclid-border-hover);box-shadow:var(--euclid-shadow-md, 0 4px 6px rgba(0, 0, 0, 0.07))}.position-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.token-pair{display:flex;align-items:center;gap:8px}.token-logo--overlap{margin-left:-8px}.pair-name{font-weight:600;color:var(--euclid-text-primary);font-size:16px}.position-value{font-size:18px;font-weight:700;color:var(--euclid-text-primary)}.position-details{display:grid;grid-template-columns:repeat(3, 1fr);gap:16px;margin-bottom:16px}.detail-item{display:flex;flex-direction:column;gap:4px}.detail-label{font-size:12px;color:var(--euclid-text-muted, #6b7280);font-weight:500;text-transform:uppercase;letter-spacing:0.5px}.detail-value{font-size:14px;font-weight:600;color:var(--euclid-text-primary)}.detail-value--positive{color:var(--euclid-success-color, #10b981)}.detail-value--negative{color:var(--euclid-error-color, #ef4444)}.apy-value{color:var(--euclid-success-color, #10b981)}.rewards-section{padding:12px 0;border-top:1px solid var(--euclid-border);border-bottom:1px solid var(--euclid-border);margin-bottom:16px}.reward-item{display:flex;justify-content:space-between;align-items:center;font-size:14px;color:var(--euclid-text-secondary);margin-bottom:8px}.reward-item:last-child{margin-bottom:0}.position-actions{display:flex;gap:8px;justify-content:flex-end}.staking-tab{display:flex;flex-direction:column;gap:20px}.staking-header h3{margin:0;font-size:18px;font-weight:600;color:var(--euclid-text-primary)}.staking-list{display:flex;flex-direction:column;gap:16px}.staking-card{padding:20px;background:var(--euclid-surface-secondary);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-2xl)}.staking-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.token-symbol{font-weight:600;color:var(--euclid-text-primary);font-size:16px}.token-name{font-size:12px;color:var(--euclid-text-muted, #6b7280)}.staking-value{font-size:18px;font-weight:700;color:var(--euclid-text-primary)}.staking-details{display:grid;grid-template-columns:repeat(auto-fit, minmax(150px, 1fr));gap:16px;margin-bottom:20px}.staking-actions{display:flex;gap:8px;flex-wrap:wrap}.transactions-tab{display:flex;flex-direction:column;gap:20px}.transactions-header h3{margin:0;font-size:18px;font-weight:600;color:var(--euclid-text-primary)}.transactions-list{display:flex;flex-direction:column;gap:12px}.transaction-card{padding:16px;background:var(--euclid-surface-secondary);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-2xl);cursor:pointer;transition:all 0.2s ease}.transaction-card:hover{background:var(--euclid-surface-secondary);border-color:var(--euclid-border-hover)}.transaction-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.transaction-type{display:flex;align-items:center;gap:8px}.type-label{font-weight:500;color:var(--euclid-text-primary);font-size:14px}.status-badge{padding:2px 8px;border-radius:12px;font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:0.5px}.status-badge--pending{background:var(--euclid-warning-color-10, rgba(245, 158, 11, 0.1));color:var(--euclid-warning-color, #f59e0b)}.status-badge--confirmed{background:var(--euclid-success-color-10, rgba(16, 185, 129, 0.1));color:var(--euclid-success-color, #10b981)}.status-badge--failed{background:var(--euclid-error-color-10, rgba(239, 68, 68, 0.1));color:var(--euclid-error-color, #ef4444)}.transaction-value{font-weight:600;color:var(--euclid-text-primary);font-size:14px}.transaction-details{display:flex;flex-direction:column;gap:4px;margin-bottom:8px}.transaction-time{font-size:12px;color:var(--euclid-text-muted, #6b7280)}.token-amounts{font-size:12px;color:var(--euclid-text-secondary);font-family:'Monaco', 'Menlo', 'Ubuntu Mono', monospace}.transaction-hash{font-family:'Monaco', 'Menlo', 'Ubuntu Mono', monospace;font-size:11px;color:var(--euclid-text-muted, #6b7280);padding:4px 8px;background:var(--euclid-bg-tertiary, #f1f5f9);border-radius:var(--euclid-border-radius-sm, 6px);display:inline-block}@media (max-width: 1024px){.stats-grid{grid-template-columns:repeat(2, 1fr)}.position-details{grid-template-columns:repeat(2, 1fr)}.staking-details{grid-template-columns:1fr}}@media (max-width: 768px){.portfolio-header{padding:16px;flex-direction:column;align-items:flex-start;gap:12px}.portfolio-content{padding:16px}.stats-grid{grid-template-columns:1fr;gap:12px}.chart-header{flex-direction:column;align-items:flex-start;gap:12px}.time-period-selector{align-self:stretch;justify-content:center}.positions-header{flex-direction:column;align-items:flex-start;gap:12px}.sort-controls{align-self:stretch;justify-content:center}.position-details{grid-template-columns:1fr;gap:12px}.position-actions,.staking-actions{flex-direction:column}.allocation-item{padding:12px}.token-value{margin-right:8px}}@media (max-width: 640px){.portfolio-title{font-size:20px}.tab-btn{padding:12px 16px;font-size:12px}.stat-card{padding:16px}.stat-value{font-size:20px}.position-card,.staking-card,.transaction-card{padding:16px}.position-header{flex-direction:column;align-items:flex-start;gap:8px}.token-pair{gap:6px}.pair-name{font-size:14px}.position-value,.staking-value{font-size:16px}}";const X=class{constructor(i){e(this,i);this.positionSelected=t(this,"positionSelected");this.managePosition=t(this,"managePosition");this.stakeMore=t(this,"stakeMore");this.unstake=t(this,"unstake");this.claimRewards=t(this,"claimRewards");this.viewTransaction=t(this,"viewTransaction");this.timePeriodChanged=t(this,"timePeriodChanged");this.tokenBalances=[];this.poolPositions=[];this.stakingPositions=[];this.transactions=[];this.portfolioStats=null;this.chartData=[];this.walletAddress="";this.loading=false;this.cardTitle="Portfolio Overview";this.showAnalytics=true;this.timePeriod="1W";this.activeTab="overview";this.selectedPosition=null;this.showChartTooltip=false;this.chartTooltipData=null;this.sortBy="value";this.sortOrder="desc";this.connectedWallets=r.state.connectedWallets;this.primaryWalletAddress="";this.updateTimeout=null;this.isInitialized=false;this.handleTabChange=e=>{this.activeTab=e};this.handleTimePeriodChange=e=>{this.timePeriod=e;this.timePeriodChanged.emit(e)};this.handleSortChange=e=>{if(this.sortBy===e){this.sortOrder=this.sortOrder==="asc"?"desc":"asc"}else{this.sortBy=e;this.sortOrder="desc"}};this.handlePositionClick=e=>{this.selectedPosition=e;this.positionSelected.emit(e)};this.handleManagePosition=e=>{this.managePosition.emit(e)};this.handleClaimRewards=e=>{this.claimRewards.emit(e)};this.handleStakeMore=e=>{this.stakeMore.emit(e)};this.handleUnstake=e=>{this.unstake.emit(e)};this.handleViewTransaction=e=>{this.viewTransaction.emit(e)}}componentWillLoad(){r.onChange("connectedWallets",(()=>{if(this.updateTimeout){clearTimeout(this.updateTimeout)}this.updateTimeout=window.setTimeout((()=>{this.connectedWallets={...r.state.connectedWallets};this.updatePrimaryWalletAddress();this.updateTimeout=null}),100)}));this.updatePrimaryWalletAddress();this.isInitialized=true}componentDidLoad(){this.setupChart()}disconnectedCallback(){if(this.updateTimeout){clearTimeout(this.updateTimeout);this.updateTimeout=null}}getWalletCount(){if(this.connectedWallets instanceof Map){return this.connectedWallets.size}else if(typeof this.connectedWallets==="object"&&this.connectedWallets!==null){return Object.keys(this.connectedWallets).length}return 0}updatePrimaryWalletAddress(){if(this.walletAddress){if(this.primaryWalletAddress!==this.walletAddress){this.primaryWalletAddress=this.walletAddress}return}let e=[];if(this.connectedWallets instanceof Map){e=Array.from(this.connectedWallets.values())}else if(typeof this.connectedWallets==="object"&&this.connectedWallets!==null){e=Object.values(this.connectedWallets)}const t=e.length>0?e[0].address:"";if(this.primaryWalletAddress!==t){this.primaryWalletAddress=t;if(this.isInitialized){if(t){console.log("📝 Portfolio using wallet address:",this.primaryWalletAddress)}else{console.log("📝 No connected wallets found for portfolio")}}}}handleResize(){this.setupChart()}handleWalletConnected(){console.log("📝 Portfolio detected wallet connection, updating address");this.updatePrimaryWalletAddress()}handleWalletDisconnected(){console.log("📝 Portfolio detected wallet disconnection, updating address");this.updatePrimaryWalletAddress()}setupChart(){if(this.chartData.length>0&&this.showAnalytics){this.renderChart()}}renderChart(){const e=this.element.shadowRoot?.querySelector(".chart-container");if(!e)return;e.innerHTML="";const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("width","100%");t.setAttribute("height","200");t.setAttribute("viewBox","0 0 800 200");const i=this.chartData;if(i.length===0)return;const a=Math.max(...i.map((e=>e.value)));const s=Math.min(...i.map((e=>e.value)));const o=a-s||1;const r=document.createElementNS("http://www.w3.org/2000/svg","path");const n=i.map(((e,t)=>{const a=t/(i.length-1)*800;const r=180-(e.value-s)/o*160;return`${t===0?"M":"L"} ${a} ${r}`})).join(" ");r.setAttribute("d",n);r.setAttribute("stroke","var(--euclid-primary-color, #3b82f6)");r.setAttribute("stroke-width","2");r.setAttribute("fill","none");t.appendChild(r);e.appendChild(t)}formatNumber(e,t=2){if(e>=1e9){return`${(e/1e9).toFixed(t)}B`}else if(e>=1e6){return`${(e/1e6).toFixed(t)}M`}else if(e>=1e3){return`${(e/1e3).toFixed(t)}K`}return e.toFixed(t)}formatPercent(e,t=2){return`${e>=0?"+":""}${e.toFixed(t)}%`}getSortedPositions(){const e=[...this.poolPositions].sort(((e,t)=>{let i,a;switch(this.sortBy){case"value":i=e.totalValue;a=t.totalValue;break;case"pnl":i=e.impermanentLoss;a=t.impermanentLoss;break;case"apy":i=e.apy;a=t.apy;break;case"allocation":i=this.portfolioStats?e.totalValue/this.portfolioStats.totalValue*100:0;a=this.portfolioStats?t.totalValue/this.portfolioStats.totalValue*100:0;break;default:i=e.totalValue;a=t.totalValue}return this.sortOrder==="asc"?i-a:a-i}));return e}renderOverviewTab(){const e=this.portfolioStats;if(!e)return null;return i("div",{class:"overview-tab"},i("div",{class:"stats-grid"},i("div",{class:"stat-card"},i("div",{class:"stat-label"},"Total Value"),i("div",{class:"stat-value"},"$",this.formatNumber(e.totalValue)),i("div",{class:{"stat-change":true,"stat-change--positive":e.dayChange>=0,"stat-change--negative":e.dayChange<0}},this.formatPercent(e.dayChangePercent)," (24h)")),i("div",{class:"stat-card"},i("div",{class:"stat-label"},"Total P&L"),i("div",{class:{"stat-value":true,"stat-value--positive":e.totalPnL>=0,"stat-value--negative":e.totalPnL<0}},"$",this.formatNumber(e.totalPnL)),i("div",{class:{"stat-change":true,"stat-change--positive":e.totalPnLPercent>=0,"stat-change--negative":e.totalPnLPercent<0}},this.formatPercent(e.totalPnLPercent))),i("div",{class:"stat-card"},i("div",{class:"stat-label"},"Total Rewards"),i("div",{class:"stat-value"},"$",this.formatNumber(e.totalRewards)),i("div",{class:"stat-change"},e.activePositions," active positions")),i("div",{class:"stat-card"},i("div",{class:"stat-label"},"Total Staked"),i("div",{class:"stat-value"},"$",this.formatNumber(e.totalStaked)),i("div",{class:"stat-change"},this.stakingPositions.length," staking positions"))),this.showAnalytics&&i("div",{class:"chart-section"},i("div",{class:"chart-header"},i("h3",null,"Portfolio Value"),i("div",{class:"time-period-selector"},["1D","1W","1M","3M","1Y","ALL"].map((e=>i("button",{key:e,class:{"period-btn":true,"period-btn--active":e===this.timePeriod},onClick:()=>this.handleTimePeriodChange(e),type:"button"},e))))),i("div",{class:"chart-container"})),i("div",{class:"allocation-section"},i("h3",null,"Asset Allocation"),i("div",{class:"allocation-grid"},this.tokenBalances.filter((e=>e.value>0)).sort(((e,t)=>t.value-e.value)).slice(0,6).map((e=>i("div",{key:e.symbol,class:"allocation-item"},i("div",{class:"token-info"},e.logoUrl&&i("img",{src:e.logoUrl,alt:e.symbol,class:"token-logo"}),i("div",{class:"token-details"},i("div",{class:"token-symbol"},e.symbol),i("div",{class:"token-balance"},parseFloat(e.balance).toFixed(4)))),i("div",{class:"token-value"},i("div",{class:"value-primary"},"$",this.formatNumber(e.value)),i("div",{class:"allocation-percent"},e.allocation.toFixed(1),"%")),i("div",{class:{"price-change":true,"price-change--positive":e.priceChange24h>=0,"price-change--negative":e.priceChange24h<0}},this.formatPercent(e.priceChange24h))))))))}renderPositionsTab(){const e=this.getSortedPositions();return i("div",{class:"positions-tab"},i("div",{class:"positions-header"},i("h3",null,"Liquidity Positions"),i("div",{class:"sort-controls"},i("button",{class:{"sort-btn":true,"sort-btn--active":this.sortBy==="value"},onClick:()=>this.handleSortChange("value"),type:"button"},"Value",this.sortBy==="value"&&i("svg",{class:{"sort-arrow":true,"sort-arrow--desc":this.sortOrder==="desc"},viewBox:"0 0 24 24",fill:"currentColor"},i("path",{d:"M7 10l5 5 5-5z"}))),i("button",{class:{"sort-btn":true,"sort-btn--active":this.sortBy==="apy"},onClick:()=>this.handleSortChange("apy"),type:"button"},"APY"))),i("div",{class:"positions-list"},e.length===0?i("div",{class:"empty-state"},i("svg",{viewBox:"0 0 24 24",fill:"currentColor"},i("path",{d:"M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,17A1.5,1.5 0 0,0 13.5,15.5A1.5,1.5 0 0,0 12,14A1.5,1.5 0 0,0 10.5,15.5A1.5,1.5 0 0,0 12,17M12,10.5C12.8,10.5 13.5,9.8 13.5,9C13.5,8.2 12.8,7.5 12,7.5C11.2,7.5 10.5,8.2 10.5,9C10.5,9.8 11.2,10.5 12,10.5Z"})),i("span",null,"No liquidity positions found")):e.map((e=>i("div",{key:e.poolId,class:"position-card",onClick:()=>this.handlePositionClick(e)},i("div",{class:"position-header"},i("div",{class:"token-pair"},e.tokenA.logoUrl&&i("img",{src:e.tokenA.logoUrl,alt:e.tokenA.symbol,class:"token-logo"}),e.tokenB.logoUrl&&i("img",{src:e.tokenB.logoUrl,alt:e.tokenB.symbol,class:"token-logo token-logo--overlap"}),i("span",{class:"pair-name"},e.tokenA.symbol,"/",e.tokenB.symbol)),i("div",{class:"position-value"},"$",this.formatNumber(e.totalValue))),i("div",{class:"position-details"},i("div",{class:"detail-item"},i("span",{class:"detail-label"},"APY"),i("span",{class:"detail-value apy-value"},e.apy.toFixed(2),"%")),i("div",{class:"detail-item"},i("span",{class:"detail-label"},"Share"),i("span",{class:"detail-value"},e.shareOfPool.toFixed(4),"%")),i("div",{class:"detail-item"},i("span",{class:"detail-label"},"IL"),i("span",{class:{"detail-value":true,"detail-value--positive":e.impermanentLoss>=0,"detail-value--negative":e.impermanentLoss<0}},this.formatPercent(e.impermanentLoss)))),(e.unclaimedRewards||e.stakingRewards)&&i("div",{class:"rewards-section"},e.unclaimedRewards&&e.unclaimedRewards>0&&i("div",{class:"reward-item"},i("span",null,"Unclaimed: $",this.formatNumber(e.unclaimedRewards)),i("euclid-button",{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation();this.handleClaimRewards(e)}},"Claim")),e.stakingRewards&&e.stakingRewards>0&&i("div",{class:"reward-item"},i("span",null,"Staking: $",this.formatNumber(e.stakingRewards)))),i("div",{class:"position-actions"},i("euclid-button",{variant:"secondary",size:"sm",onClick:t=>{t.stopPropagation();this.handleManagePosition(e)}},"Manage")))))))}renderStakingTab(){return i("div",{class:"staking-tab"},i("div",{class:"staking-header"},i("h3",null,"Staking Positions")),i("div",{class:"staking-list"},this.stakingPositions.length===0?i("div",{class:"empty-state"},i("svg",{viewBox:"0 0 24 24",fill:"currentColor"},i("path",{d:"M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,17A1.5,1.5 0 0,0 13.5,15.5A1.5,1.5 0 0,0 12,14A1.5,1.5 0 0,0 10.5,15.5A1.5,1.5 0 0,0 12,17M12,10.5C12.8,10.5 13.5,9.8 13.5,9C13.5,8.2 12.8,7.5 12,7.5C11.2,7.5 10.5,8.2 10.5,9C10.5,9.8 11.2,10.5 12,10.5Z"})),i("span",null,"No staking positions found")):this.stakingPositions.map((e=>i("div",{key:e.id,class:"staking-card"},i("div",{class:"staking-header"},i("div",{class:"token-info"},i("span",{class:"token-symbol"},e.tokenSymbol),i("span",{class:"token-name"},e.tokenName)),i("div",{class:"staking-value"},"$",this.formatNumber(e.stakedValue))),i("div",{class:"staking-details"},i("div",{class:"detail-item"},i("span",{class:"detail-label"},"Staked Amount"),i("span",{class:"detail-value"},parseFloat(e.stakedAmount).toFixed(4)," ",e.tokenSymbol)),i("div",{class:"detail-item"},i("span",{class:"detail-label"},"APR"),i("span",{class:"detail-value apy-value"},e.apr.toFixed(2),"%")),i("div",{class:"detail-item"},i("span",{class:"detail-label"},"Rewards"),i("span",{class:"detail-value"},"$",this.formatNumber(e.rewards))),e.unlockDate&&i("div",{class:"detail-item"},i("span",{class:"detail-label"},"Unlock Date"),i("span",{class:"detail-value"},e.unlockDate.toLocaleDateString()))),i("div",{class:"staking-actions"},i("euclid-button",{variant:"primary",size:"sm",onClick:()=>this.handleStakeMore(e)},"Stake More"),i("euclid-button",{variant:"secondary",size:"sm",onClick:()=>this.handleUnstake(e),disabled:e.unlockDate?e.unlockDate>new Date:false},"Unstake"),e.rewards>0&&i("euclid-button",{variant:"ghost",size:"sm",onClick:()=>this.handleClaimRewards(e)},"Claim")))))))}renderTransactionsTab(){const e=this.transactions.slice(0,20);return i("div",{class:"transactions-tab"},i("div",{class:"transactions-header"},i("h3",null,"Recent Transactions")),i("div",{class:"transactions-list"},e.length===0?i("div",{class:"empty-state"},i("svg",{viewBox:"0 0 24 24",fill:"currentColor"},i("path",{d:"M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,17A1.5,1.5 0 0,0 13.5,15.5A1.5,1.5 0 0,0 12,14A1.5,1.5 0 0,0 10.5,15.5A1.5,1.5 0 0,0 12,17M12,10.5C12.8,10.5 13.5,9.8 13.5,9C13.5,8.2 12.8,7.5 12,7.5C11.2,7.5 10.5,8.2 10.5,9C10.5,9.8 11.2,10.5 12,10.5Z"})),i("span",null,"No transactions found")):e.map((e=>i("div",{key:e.id,class:"transaction-card",onClick:()=>this.handleViewTransaction(e)},i("div",{class:"transaction-header"},i("div",{class:"transaction-type"},i("span",{class:"type-label"},e.type.replace("_"," ").toUpperCase()),i("span",{class:{"status-badge":true,[`status-badge--${e.status}`]:true}},e.status)),i("div",{class:"transaction-value"},"$",this.formatNumber(e.value))),i("div",{class:"transaction-details"},i("div",{class:"transaction-time"},e.timestamp.toLocaleDateString()," ",e.timestamp.toLocaleTimeString()),e.tokenA&&i("div",{class:"token-amounts"},i("span",null,parseFloat(e.amountA||"0").toFixed(4)," ",e.tokenA.symbol),e.tokenB&&e.amountB&&i("span",null,"→ ",parseFloat(e.amountB).toFixed(4)," ",e.tokenB.symbol))),i("div",{class:"transaction-hash"},e.hash.slice(0,10),"...",e.hash.slice(-8)))))))}render(){if(this.loading){return i("div",{class:"portfolio-overview loading"},i("div",{class:"loading-spinner"}),i("span",null,"Loading portfolio data..."))}if(!this.primaryWalletAddress){return i("div",{class:"portfolio-overview empty"},i("div",{class:"empty-state"},i("svg",{viewBox:"0 0 24 24",fill:"currentColor"},i("path",{d:"M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,17A1.5,1.5 0 0,0 13.5,15.5A1.5,1.5 0 0,0 12,14A1.5,1.5 0 0,0 10.5,15.5A1.5,1.5 0 0,0 12,17M12,10.5C12.8,10.5 13.5,9.8 13.5,9C13.5,8.2 12.8,7.5 12,7.5C11.2,7.5 10.5,8.2 10.5,9C10.5,9.8 11.2,10.5 12,10.5Z"})),i("span",null,"Connect your wallet to view portfolio"),i("euclid-button",{variant:"primary",onClick:()=>{window.dispatchEvent(new CustomEvent("openWalletModal"))}},"Connect Wallet")))}return i("div",{class:"portfolio-overview"},i("div",{class:"portfolio-header"},i("h2",{class:"portfolio-title"},this.cardTitle),i("div",{class:"wallet-info"},i("span",{class:"wallet-address"},this.primaryWalletAddress.slice(0,6),"...",this.primaryWalletAddress.slice(-4)),this.getWalletCount()>1&&i("span",{class:"wallet-count"},"+",this.getWalletCount()-1," more"))),i("div",{class:"portfolio-tabs"},i("button",{class:{"tab-btn":true,"tab-btn--active":this.activeTab==="overview"},onClick:()=>this.handleTabChange("overview"),type:"button"},"Overview"),i("button",{class:{"tab-btn":true,"tab-btn--active":this.activeTab==="positions"},onClick:()=>this.handleTabChange("positions"),type:"button"},"Positions (",this.poolPositions.length,")"),i("button",{class:{"tab-btn":true,"tab-btn--active":this.activeTab==="staking"},onClick:()=>this.handleTabChange("staking"),type:"button"},"Staking (",this.stakingPositions.length,")"),i("button",{class:{"tab-btn":true,"tab-btn--active":this.activeTab==="transactions"},onClick:()=>this.handleTabChange("transactions"),type:"button"},"Transactions")),i("div",{class:"portfolio-content"},this.activeTab==="overview"&&this.renderOverviewTab(),this.activeTab==="positions"&&this.renderPositionsTab(),this.activeTab==="staking"&&this.renderStakingTab(),this.activeTab==="transactions"&&this.renderTransactionsTab()))}get element(){return s(this)}};X.style=Z;const ee=":host{display:contents}.swap-card{background:var(--euclid-surface);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-2xl);padding:var(--euclid-spacing-6);max-width:420px;width:100%;box-shadow:var(--euclid-shadow-xl);display:flex;flex-direction:column;gap:var(--euclid-spacing-4)}.swap-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--euclid-spacing-2)}.swap-title{font-size:var(--euclid-text-size-xl);font-weight:var(--euclid-font-weight-semibold);color:var(--euclid-text-primary);margin:0}.settings-button{display:flex;align-items:center;justify-content:center;width:2.5rem;height:2.5rem;background:var(--euclid-surface-secondary);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-lg);color:var(--euclid-text-secondary);cursor:pointer;transition:all var(--euclid-transition-duration-fast)}.settings-button:hover{background:var(--euclid-surface-tertiary);color:var(--euclid-text-primary);border-color:var(--euclid-border-hover)}.settings-button:focus{outline:2px solid var(--euclid-border-focus);outline-offset:2px}.settings-button svg{width:1.25rem;height:1.25rem}.settings-panel{background:var(--euclid-surface-secondary);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-lg);padding:var(--euclid-spacing-4);margin-bottom:var(--euclid-spacing-2)}.setting-item{margin-bottom:var(--euclid-spacing-4)}.setting-item:last-child{margin-bottom:0}.setting-label{display:block;font-size:var(--euclid-text-size-sm);font-weight:var(--euclid-font-weight-medium);color:var(--euclid-text-secondary);margin-bottom:var(--euclid-spacing-2)}.slippage-buttons{display:flex;gap:var(--euclid-spacing-2);align-items:center}.slippage-btn{padding:var(--euclid-spacing-2) var(--euclid-spacing-3);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-md);background:var(--euclid-surface);color:var(--euclid-text-secondary);font-size:var(--euclid-text-size-sm);cursor:pointer;transition:all var(--euclid-transition-duration-fast)}.slippage-btn:hover{border-color:var(--euclid-interactive-primary);color:var(--euclid-interactive-primary)}.slippage-btn--active{background:var(--euclid-interactive-primary);color:var(--euclid-white);border-color:var(--euclid-interactive-primary)}.slippage-input{padding:var(--euclid-spacing-2) var(--euclid-spacing-3);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-md);background:var(--euclid-surface);color:var(--euclid-text-primary);font-size:var(--euclid-text-size-sm);width:80px;text-align:center}.slippage-input:focus{outline:none;border-color:var(--euclid-border-focus);box-shadow:0 0 0 2px rgba(37, 99, 235, 0.25)}.deadline-input{display:flex;align-items:center;gap:var(--euclid-spacing-2)}.deadline-input input{padding:var(--euclid-spacing-2) var(--euclid-spacing-3);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-md);background:var(--euclid-surface);color:var(--euclid-text-primary);font-size:var(--euclid-text-size-sm);width:100px}.deadline-input input:focus{outline:none;border-color:var(--euclid-border-focus);box-shadow:0 0 0 2px rgba(37, 99, 235, 0.25)}.deadline-input span{font-size:var(--euclid-text-size-sm);color:var(--euclid-text-secondary)}.token-input-section{position:relative}.input-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--euclid-spacing-2)}.input-label{font-size:var(--euclid-text-size-sm);color:var(--euclid-text-secondary)}.balance-label{font-size:var(--euclid-text-size-sm);color:var(--euclid-text-muted);cursor:pointer;transition:color var(--euclid-transition-duration-fast)}.balance-label:hover{color:var(--euclid-text-secondary)}.token-selector{cursor:pointer}.token-selector:hover{opacity:0.8}.selected-token{display:flex;align-items:center;gap:var(--euclid-spacing-3);padding:var(--euclid-spacing-4);border:2px solid var(--euclid-border);border-radius:var(--euclid-radius-xl);background:var(--euclid-surface)}.select-token-button{display:flex;align-items:center;justify-content:center;gap:var(--euclid-spacing-2);padding:var(--euclid-spacing-4) var(--euclid-spacing-6);border:2px dashed var(--euclid-border);border-radius:var(--euclid-radius-xl);background:var(--euclid-surface-secondary);color:var(--euclid-text-secondary);font-size:var(--euclid-text-size-base);font-weight:var(--euclid-font-weight-medium);cursor:pointer;transition:all var(--euclid-transition-duration-fast)}.select-token-button:hover{border-color:var(--euclid-border-hover)}.token-logo{width:2rem;height:2rem;border-radius:50%;background:var(--euclid-surface-secondary)}.token-info{display:flex;flex-direction:column;gap:var(--euclid-spacing-1);flex:1}.token-symbol{font-size:var(--euclid-text-size-base);font-weight:var(--euclid-font-weight-semibold);color:var(--euclid-text-primary)}.token-name{font-size:var(--euclid-text-size-sm);color:var(--euclid-text-secondary)}.dropdown-arrow{color:var(--euclid-text-muted);transition:transform var(--euclid-transition-duration-fast)}.token-selector:hover .dropdown-arrow{color:var(--euclid-text-secondary)}.swap-direction{display:flex;justify-content:center;margin:var(--euclid-spacing-2) 0;position:relative}.swap-button{display:flex;align-items:center;justify-content:center;width:2.5rem;height:2.5rem;background:var(--euclid-surface);border:2px solid var(--euclid-border);border-radius:50%;color:var(--euclid-text-secondary);cursor:pointer;transition:all var(--euclid-transition-duration-fast);z-index:10}.swap-button:hover{background:var(--euclid-surface-secondary);border-color:var(--euclid-border-hover);color:var(--euclid-text-primary);transform:rotate(180deg)}.swap-button:focus{outline:2px solid var(--euclid-border-focus);outline-offset:2px}.swap-button svg{width:1.25rem;height:1.25rem}.quote-info{padding:var(--euclid-spacing-4);background:var(--euclid-surface-secondary);border-radius:var(--euclid-radius-xl)}.quote-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--euclid-spacing-2)}.quote-row:last-child{margin-bottom:0}.quote-label{font-size:var(--euclid-text-size-sm);color:var(--euclid-text-secondary)}.quote-value{font-size:var(--euclid-text-size-sm);font-weight:var(--euclid-font-weight-medium);color:var(--euclid-text-primary)}.quote-value--warning{color:var(--euclid-warning-600)}.quote-value--danger{color:var(--euclid-danger-600)}@media (max-width: 480px){.swap-card{padding:var(--euclid-spacing-4);gap:var(--euclid-spacing-3)}.swap-header{margin-bottom:var(--euclid-spacing-2)}.settings-panel{padding:var(--euclid-spacing-3)}.slippage-buttons{flex-wrap:wrap}.deadline-input{flex-direction:column;align-items:flex-start;gap:var(--euclid-spacing-1)}.deadline-input input{width:100%}.selected-token{flex-direction:column;align-items:flex-start;gap:var(--euclid-spacing-2)}.token-info{width:100%}.quote-info{padding:var(--euclid-spacing-3)}}@media (prefers-reduced-motion: reduce){.settings-button,.slippage-btn,.token-selector,.swap-button,.dropdown-arrow{transition:none}.swap-button:hover{transform:none}}.token-selector:focus-within{outline:2px solid var(--euclid-border-focus);outline-offset:2px}.quote-info.loading{position:relative;pointer-events:none}.quote-info.loading::after{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);width:1.5rem;height:1.5rem;border:2px solid var(--euclid-border);border-top:2px solid var(--euclid-interactive-primary);border-radius:50%;animation:euclid-spin 1s linear infinite}@media (prefers-contrast: high){.swap-card,.settings-panel,.selected-token,.quote-info{border-width:2px;border-color:var(--euclid-text-primary)}.slippage-btn--active{border-color:var(--euclid-text-primary);background:var(--euclid-text-primary)}}";const te=class{constructor(i){e(this,i);this.swapInitiated=t(this,"swapInitiated");this.tokenSelect=t(this,"tokenSelect");this.quoteRequested=t(this,"quoteRequested");this.settingsChanged=t(this,"settingsChanged");this.tokens=[];this.storeTokens=[];this.storeLoading=false;this.inputToken=null;this.outputToken=null;this.inputAmount="";this.loading=false;this.disabled=false;this.walletAddress="";this.showAdvanced=false;this.cardTitle="Swap Tokens";this.outputAmount="";this.isSettingsOpen=false;this.tokenSelectorType="input";this.currentQuote=null;this.isQuoting=false;this.swapSettings={slippage:.5,deadline:20,infiniteApproval:false};this.quoteTimer=null;this.handleSwapTokens=()=>{const e=this.inputToken;const t=this.inputAmount;this.inputToken=this.outputToken;this.outputToken=e;this.inputAmount=this.outputAmount;this.outputAmount=t;this.startQuoteTimer()};this.handleMaxClick=()=>{if(this.inputToken?.balance){this.inputAmount=this.inputToken.balance;this.startQuoteTimer()}};this.openTokenSelector=e=>{console.log("🔧 Opening token selector for:",e);this.tokenSelectorType=e;o.openTokenModal(e)};this.toggleSettings=()=>{this.isSettingsOpen=!this.isSettingsOpen};this.handleSlippageChange=e=>{this.swapSettings={...this.swapSettings,slippage:e};this.settingsChanged.emit(this.swapSettings);this.startQuoteTimer()};this.handleSwap=()=>{if(!this.inputToken||!this.isWalletConnectedForSwap()){o.openWalletModal(this.inputToken?.chainUID);return}if(!this.outputToken||!this.currentQuote)return;D(_.SWAP.EXECUTE_REQUEST);this.swapInitiated.emit({inputToken:this.inputToken,outputToken:this.outputToken,inputAmount:this.inputAmount,outputAmount:this.outputAmount,settings:this.swapSettings,quote:this.currentQuote})}}componentWillLoad(){this.syncWithStore()}componentDidLoad(){m.onChange("tokens",(()=>{this.syncWithStore()}));this.startQuoteTimer()}syncWithStore(){this.storeTokens=m.state.tokens.length>0?m.state.tokens:[];this.storeLoading=m.state.loading}getAvailableTokens(){const e=this.storeTokens.length>0?this.storeTokens:this.tokens;return e.map((e=>{if("tokenId"in e&&"displayName"in e&&"coinDecimal"in e){return{id:e.tokenId,symbol:e.symbol||e.displayName.toUpperCase(),name:e.displayName,address:e.address||e.tokenId,chainUID:e.chainUID||e.chain_uid||e.chain_uids?.[0]||"",decimals:e.coinDecimal,logoUrl:e.logo||e.image||undefined,balance:undefined,price:e.price?parseFloat(e.price):undefined}}else{return e}}))}getAvailableChains(){const e=this.getAvailableTokens();const t=new Map;e.forEach((e=>{if(!t.has(e.chainUID)){t.set(e.chainUID,{chain_uid:e.chainUID,display_name:this.getChainDisplayName(e.chainUID)})}}));return Array.from(t.values())}disconnectedCallback(){if(this.quoteTimer){clearTimeout(this.quoteTimer)}}handleInputChange(e){if(e.target===this.element.querySelector("#input-amount")){this.inputAmount=e.detail.value;this.startQuoteTimer()}}handleTokenModalSelect(e){if(!e.detail||!e.detail.token||!e.detail.selectorType){return}console.log("🔧 Swap - received token selection:",e.detail);const{token:t,selectorType:i}=e.detail;const a={id:t.tokenId||t.id,symbol:t.symbol,name:t.name||t.displayName,address:t.address||t.tokenId,chainUID:t.chainUID||t.chain_uid,decimals:t.decimals||t.coinDecimal,logoUrl:t.logoUrl||t.logo,balance:t.balance,price:t.price};if(i==="input"){if(this.outputToken&&a.address===this.outputToken.address){this.outputToken=this.inputToken}this.inputToken=a}else{if(this.inputToken&&a.address===this.inputToken.address){this.inputToken=this.outputToken}this.outputToken=a}this.tokenSelect.emit({type:i,token:a});this.startQuoteTimer()}startQuoteTimer(){if(this.quoteTimer){clearTimeout(this.quoteTimer)}if(this.inputToken&&this.outputToken&&this.inputAmount&&parseFloat(this.inputAmount)>0){this.quoteTimer=setTimeout((()=>{this.requestQuote()}),800)}else{this.outputAmount="";this.currentQuote=null}}async requestQuote(){if(!this.inputToken||!this.outputToken||!this.inputAmount)return;this.isQuoting=true;this.quoteRequested.emit({inputToken:this.inputToken,outputToken:this.outputToken,inputAmount:this.inputAmount});setTimeout((()=>{if(this.inputToken&&this.outputToken&&this.inputAmount){const e=1.2+Math.random()*.3;const t=(parseFloat(this.inputAmount)*e).toFixed(6);this.currentQuote={inputAmount:this.inputAmount,outputAmount:t,exchangeRate:e,priceImpact:Math.random()*2,minimumReceived:(parseFloat(t)*(1-this.swapSettings.slippage/100)).toFixed(6),gasEstimate:(.001+Math.random()*.002).toFixed(4),route:[{protocol:"Euclid Protocol",poolAddress:"0x123...abc",fee:.3,inputToken:this.inputToken.symbol,outputToken:this.outputToken.symbol}]};this.outputAmount=t}this.isQuoting=false}),1e3)}canSwap(){if(!this.inputToken||!this.isWalletConnectedForSwap()){return true}return!!(this.inputToken&&this.outputToken&&this.inputAmount&&parseFloat(this.inputAmount)>0&&this.currentQuote&&!this.isQuoting&&!this.loading&&!this.disabled)}getSwapButtonText(){if(!this.inputToken||!this.isWalletConnectedForSwap()){const e=this.inputToken?.chainUID?this.getChainDisplayName(this.inputToken.chainUID):"Wallet";return`Connect ${e}`}if(!this.inputToken)return"Select Input Token";if(!this.outputToken)return"Select Output Token";if(!this.inputAmount||parseFloat(this.inputAmount)<=0)return"Enter Amount";if(this.isQuoting)return"Getting Quote...";if(this.loading)return"Swapping...";if(!this.currentQuote)return"Unable to Quote";return`Swap ${this.inputToken.symbol} for ${this.outputToken.symbol}`}isWalletConnectedForSwap(){if(!this.inputToken)return false;return r.isWalletConnected(this.inputToken.chainUID)}getChainDisplayName(e){const t={ethereum:"Ethereum",polygon:"Polygon",arbitrum:"Arbitrum",optimism:"Optimism","cosmoshub-4":"Cosmos Hub","osmosis-1":"Osmosis"};return t[e]||"Wallet"}render(){return i("div",{key:"e3b5a91def8afd1ce233482b0952f0ea72ee047b",class:"swap-card"},i("div",{key:"4bb4f086cb2bec5c771ca54acfebcee25c492735",class:"swap-header"},i("h3",{key:"ea3822ec2591cf006e5351aef14287d9076b484c",class:"swap-title"},this.cardTitle),i("button",{key:"0bf68101a3d739b27507d8932167458914fef3ae",class:"settings-button",onClick:this.toggleSettings,type:"button","aria-label":"Swap settings"},i("svg",{key:"b160dba15c7ab1917c8cc26251d1f483f26f2cec",viewBox:"0 0 24 24",fill:"currentColor"},i("path",{key:"88bada2e004c3ad074d1ead5876fecc40b1915ab",d:"M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.82,11.69,4.82,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"})))),this.isSettingsOpen&&i("div",{key:"bdf9f21be5dfa7636664a1460513255623afb375",class:"settings-panel"},i("div",{key:"649e587a0855ca789af167f61bf96fff2f08dc3b",class:"setting-item"},i("label",{key:"d134d04e6307951e98ab55291fdf8b494303beb0",class:"setting-label"},"Slippage Tolerance"),i("div",{key:"551565cb37658bc194514d7d04c332c03c6a7c7f",class:"slippage-buttons"},[.1,.5,1].map((e=>i("button",{class:{"slippage-btn":true,"slippage-btn--active":this.swapSettings.slippage===e},onClick:()=>this.handleSlippageChange(e),type:"button"},e,"%"))),i("input",{key:"db6896552b84c0e535505337bf853822909dfda3",class:"slippage-input",type:"number",min:"0",max:"50",step:"0.1",value:this.swapSettings.slippage,onInput:e=>this.handleSlippageChange(parseFloat(e.target.value)),placeholder:"Custom"}))),i("div",{key:"fd428bb7abb792035363627bdc4d38cd02a358ed",class:"setting-item"},i("label",{key:"4d07d3a745b8baaa8e8075bd1cb376daf509b54d",class:"setting-label"},"Transaction Deadline"),i("div",{key:"096cf3329350056068271d7dbdeee738bd065cf4",class:"deadline-input"},i("input",{key:"d879a64100242bfcf77521cc6135422a1e610111",type:"number",min:"1",max:"4320",value:this.swapSettings.deadline,onInput:e=>this.swapSettings={...this.swapSettings,deadline:parseInt(e.target.value)}}),i("span",{key:"100536b8d6680018f8dc7e085fdb23314aba2a79"},"minutes")))),i("div",{key:"924fd8b1cca8d5ada4135f286c260372440555de",class:"token-input-section"},i("div",{key:"ef683ad74f84fdee4a2cbd2a9f4c643485e6d7cd",class:"input-header"},i("span",{key:"341974f27b268abd7b93f380bd25a20c95731b69",class:"input-label"},"From"),this.inputToken?.balance&&i("span",{key:"9225a77124c18dfcfe83523bf28a8c18516d9959",class:"balance-label"},"Balance: ",parseFloat(this.inputToken.balance).toLocaleString())),i("euclid-token-input",{key:"d41f1e9f9e13a6b79ab3e3210bcc1f9f534711be",id:"input-amount",value:this.inputAmount,placeholder:"0.0","show-max":!!this.inputToken?.balance,"token-selectable":false,onMaxClick:this.handleMaxClick},i("div",{key:"07e5c373b84c48b1316c7fb26f2d0c2ddd82a660",slot:"token",class:"token-selector",onClick:e=>{e.preventDefault();e.stopPropagation();this.openTokenSelector("input")}},this.inputToken?i("div",{class:"selected-token"},this.inputToken.logoUrl&&i("img",{src:this.inputToken.logoUrl,alt:this.inputToken.symbol,class:"token-logo"}),i("div",{class:"token-info"},i("span",{class:"token-symbol"},this.inputToken.symbol),i("span",{class:"token-name"},this.inputToken.name)),i("svg",{class:"dropdown-arrow",viewBox:"0 0 24 24",fill:"currentColor"},i("path",{d:"M7 10l5 5 5-5z"}))):i("div",{class:"select-token-button"},i("span",null,"Select Token"),i("svg",{class:"dropdown-arrow",viewBox:"0 0 24 24",fill:"currentColor"},i("path",{d:"M7 10l5 5 5-5z"})))))),i("div",{key:"1f71effe3657f1898c8a95fdfbe60de102d07619",class:"swap-direction"},i("button",{key:"eaf7cf4168cf0706f52413534cf7e1c59166a407",class:"swap-button",onClick:this.handleSwapTokens,type:"button","aria-label":"Swap token directions"},i("svg",{key:"4f30a1ee1780d671b0e8ad06781e7aaf83678a33",viewBox:"0 0 24 24",fill:"currentColor"},i("path",{key:"e57e387437c95138353d40828380c3a38b9e0adc",d:"M16 17.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3L5 6.99h3V14h2V6.99h3L9 3z"})))),i("div",{key:"ec645453dd4a1d4688059c8ea9f0d7e94d8e00a3",class:"token-input-section"},i("div",{key:"eedfe0cf4e26b5d77fbc0a2db893a9da6c531ebc",class:"input-header"},i("span",{key:"f9a5c97eaf98081f74a5d5f52d287b7944f5ee3e",class:"input-label"},"To"),this.outputToken?.balance&&i("span",{key:"d4fedbdb443e11d1552811049d9ee3bf2845f107",class:"balance-label"},"Balance: ",parseFloat(this.outputToken.balance).toLocaleString())),i("euclid-token-input",{key:"cad164e097543a2eacc48467693402c87cc9ba43",id:"output-amount",value:this.outputAmount,placeholder:"0.0",disabled:true,loading:this.isQuoting,"token-selectable":false},i("div",{key:"7a20551f3b3fdab5e5ff1ca29729199ea760871e",slot:"token",class:"token-selector",onClick:e=>{e.preventDefault();e.stopPropagation();this.openTokenSelector("output")}},this.outputToken?i("div",{class:"selected-token"},this.outputToken.logoUrl&&i("img",{src:this.outputToken.logoUrl,alt:this.outputToken.symbol,class:"token-logo"}),i("div",{class:"token-info"},i("span",{class:"token-symbol"},this.outputToken.symbol),i("span",{class:"token-name"},this.outputToken.name)),i("svg",{class:"dropdown-arrow",viewBox:"0 0 24 24",fill:"currentColor"},i("path",{d:"M7 10l5 5 5-5z"}))):i("div",{class:"select-token-button"},i("span",null,"Select Token"),i("svg",{class:"dropdown-arrow",viewBox:"0 0 24 24",fill:"currentColor"},i("path",{d:"M7 10l5 5 5-5z"})))))),this.currentQuote&&i("div",{key:"5ee52e3e02e5432d07410f2f13018f1b13303567",class:"quote-info"},i("div",{key:"756e1c4356d76093b6910ea84f7b82bd32332a4d",class:"quote-row"},i("span",{key:"a3a1278ce78ef92dddc22be179503c88129a81fb",class:"quote-label"},"Rate"),i("span",{key:"48843901c5bd670614bde0b05b7e791400d45713",class:"quote-value"},"1 ",this.inputToken?.symbol," = ",this.currentQuote.exchangeRate.toFixed(6)," ",this.outputToken?.symbol)),this.currentQuote.priceImpact>.1&&i("div",{key:"6723625b364d05c9150275ce82421611f7804e10",class:"quote-row"},i("span",{key:"619aa5aa86ad46a37a98a739452aab668f162f33",class:"quote-label"},"Price Impact"),i("span",{key:"f1262babf655bf67dfea009eceed655c593e10ed",class:{"quote-value":true,"quote-value--warning":this.currentQuote.priceImpact>3,"quote-value--danger":this.currentQuote.priceImpact>15}},this.currentQuote.priceImpact.toFixed(2),"%")),i("div",{key:"31220f92fca806782af05a0b15ddf230d5b85e97",class:"quote-row"},i("span",{key:"99893619de9a92a66d44078fb946ec72f8d92f4e",class:"quote-label"},"Minimum Received"),i("span",{key:"c7841c2149ad0aa875747a241099d8ccb3f722cc",class:"quote-value"},this.currentQuote.minimumReceived," ",this.outputToken?.symbol)),i("div",{key:"f50b517773eb29458a621d345d8b398c19c147a3",class:"quote-row"},i("span",{key:"1ae8f43b7ca2b2544567bf333616f6146a89a6e2",class:"quote-label"},"Network Fee"),i("span",{key:"01291cea0c0f8aa078886b4857b00c8b2f95c977",class:"quote-value"},this.currentQuote.gasEstimate," ETH"))),i("euclid-button",{key:"c586a15e805b1499e73cb7eb494e1500d0f3c29a",variant:"primary",size:"lg","full-width":true,loading:this.loading,disabled:!this.canSwap(),onClick:this.handleSwap},this.getSwapButtonText()))}get element(){return s(this)}};te.style=ee;var ie;class ae{get keplr(){return window.keplr}isInstalled(){return!!window.keplr}async connect(e){try{if(!this.isInstalled()){return{success:false,error:"Keplr wallet not installed"}}if(e.type==="Cosmwasm"){try{await this.keplr.experimentalSuggestChain({chainId:e.chain_id,chainName:e.display_name,rpc:"https://rpc.cosmos.network",rest:"https://api.cosmos.network",bip44:{coinType:118},bech32Config:{bech32PrefixAccAddr:this.getAddressPrefix(e.chain_id),bech32PrefixAccPub:this.getAddressPrefix(e.chain_id)+"pub",bech32PrefixValAddr:this.getAddressPrefix(e.chain_id)+"valoper",bech32PrefixValPub:this.getAddressPrefix(e.chain_id)+"valoperpub",bech32PrefixConsAddr:this.getAddressPrefix(e.chain_id)+"valcons",bech32PrefixConsPub:this.getAddressPrefix(e.chain_id)+"valconspub"},currencies:[{coinDenom:"ATOM",coinMinimalDenom:"uatom",coinDecimals:6}],feeCurrencies:[{coinDenom:"ATOM",coinMinimalDenom:"uatom",coinDecimals:6}],stakeCurrency:{coinDenom:"ATOM",coinMinimalDenom:"uatom",coinDecimals:6}})}catch(e){console.warn("Failed to suggest chain to Keplr:",e)}}await this.keplr.enable(e.chain_id);const t=this.keplr.getOfflineSigner(e.chain_id);const i=await t.getAccounts();if(i.length===0){return{success:false,error:"No accounts found"}}return{success:true,address:i[0].address,chainId:e.chain_id}}catch(e){return{success:false,error:e instanceof Error?e.message:"Failed to connect to Keplr"}}}async disconnect(e){console.log("Keplr disconnect requested for:",e)}async getAddress(e){try{if(!this.isInstalled())return null;const t=await this.keplr.getKey(e);return t.bech32Address}catch{return null}}async switchChain(e){try{await this.keplr.enable(e.chain_id);return true}catch{return false}}getAddressPrefix(e){const t={"cosmoshub-4":"cosmos","osmosis-1":"osmo","juno-1":"juno","stargaze-1":"stars"};return t[e]||"cosmos"}}class se{get ethereum(){return window.ethereum}isInstalled(){return!!window.ethereum&&window.ethereum.isMetaMask}async connect(e){try{if(!this.isInstalled()){return{success:false,error:"MetaMask not installed"}}if(e.type!=="EVM"){return{success:false,error:"MetaMask only supports EVM chains"}}const t=await this.ethereum.request({method:"eth_requestAccounts"});if(!Array.isArray(t)||t.length===0){return{success:false,error:"No accounts found"}}const i=await this.switchChain(e);if(!i){return{success:false,error:"Failed to switch network"}}return{success:true,address:t[0],chainId:e.chain_id}}catch(e){return{success:false,error:e instanceof Error?e.message:"Failed to connect to MetaMask"}}}async disconnect(e){}async getAddress(e){try{if(!this.isInstalled())return null;const e=await this.ethereum.request({method:"eth_accounts"});return Array.isArray(e)&&e.length>0?e[0]:null}catch{return null}}async switchChain(e){try{const t=`0x${parseInt(e.chain_id).toString(16)}`;try{await this.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:t}]});return true}catch(i){if(i.code===4902){await this.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:t,chainName:e.display_name,rpcUrls:["https://rpc.example.com"],nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},blockExplorerUrls:e.explorer_url?[e.explorer_url]:[]}]});return true}throw i}}catch{return false}}}class oe{get cosmostation(){return window.cosmostation}isInstalled(){return!!window.cosmostation}async connect(e){try{if(!this.isInstalled()){return{success:false,error:"Cosmostation wallet not installed"}}if(e.type!=="Cosmwasm"){return{success:false,error:"Cosmostation only supports Cosmos chains"}}const t=await this.cosmostation.cosmos.request({method:"cos_requestAccount",params:{chainName:e.chain_id}});return{success:true,address:t.address,chainId:e.chain_id}}catch(e){return{success:false,error:e instanceof Error?e.message:"Failed to connect to Cosmostation"}}}async disconnect(e){console.log("Cosmostation disconnect requested for:",e)}async getAddress(e){try{if(!this.isInstalled())return null;const t=await this.cosmostation.cosmos.request({method:"cos_account",params:{chainName:e}});return t?.address||null}catch{return null}}async switchChain(e){return true}}class re{get phantom(){return window.phantom?.ethereum}get phantomSolana(){return window.phantom?.solana}isInstalled(){return!!(this.phantom||this.phantomSolana?.isPhantom)}async connect(e){try{if(!this.isInstalled()){return{success:false,error:"Phantom wallet not installed"}}if(e.type!=="EVM"){return{success:false,error:"Phantom only supports EVM chains"}}if(!this.phantom){return{success:false,error:"Phantom Ethereum provider not available. Please enable Ethereum support in Phantom."}}const t=await this.phantom.request({method:"eth_requestAccounts"});if(!Array.isArray(t)||t.length===0){return{success:false,error:"No accounts found"}}return{success:true,address:t[0],chainId:e.chain_id}}catch(e){return{success:false,error:e instanceof Error?e.message:"Failed to connect to Phantom"}}}async disconnect(e){}async getAddress(e){try{if(!this.isInstalled())return null;const e=await this.phantom.request({method:"eth_accounts"});return Array.isArray(e)&&e.length>0?e[0]:null}catch{return null}}async switchChain(e){try{const t=`0x${parseInt(e.chain_id).toString(16)}`;await this.phantom.request({method:"wallet_switchEthereumChain",params:[{chainId:t}]});return true}catch{return false}}}class ne{static getAdapter(e){return this.adapters.get(e)||null}static getAvailableWallets(){return Array.from(this.adapters.entries()).map((([e,t])=>({type:e,installed:t.isInstalled()})))}static async connectWallet(e,t){const i=this.getAdapter(e);if(!i){return{success:false,error:`Adapter not found for ${e}`}}return i.connect(t)}static async disconnectWallet(e,t){const i=this.getAdapter(e);if(i){await i.disconnect(t)}}}ie=ne;ne.adapters=new Map;(()=>{ie.adapters.set("keplr",new ae);ie.adapters.set("metamask",new se);ie.adapters.set("phantom",new re);ie.adapters.set("cosmostation",new oe)})();const le=class{constructor(t){e(this,t);this.isInitialized=false;this.routePollingActive=false}async componentWillLoad(){await this.initialize()}async componentDidLoad(){}disconnectedCallback(){this.stopRoutePolling()}async initialize(){console.log("🔄 Initializing Swap Controller...");p.onChange("fromToken",(()=>this.handleTokenChange()));p.onChange("toToken",(()=>this.handleTokenChange()));p.onChange("fromAmount",(()=>this.handleAmountChange()));this.isInitialized=true;console.log("✅ Swap Controller initialized")}handleTokenChange(){p.setRoutes([]);p.setSelectedRoute(undefined);this.stopRoutePolling();if(p.state.fromToken&&p.state.toToken&&p.state.fromAmount){this.startRoutePolling()}}handleAmountChange(){const{fromToken:e,toToken:t,fromAmount:i}=p.state;if(e&&t&&i&&parseFloat(i)>0){this.debounceRouteFetch()}else{this.stopRoutePolling();p.setRoutes([])}}debounceRouteFetch(){if(this.debounceTimeout){clearTimeout(this.debounceTimeout)}this.debounceTimeout=window.setTimeout((()=>{this.startRoutePolling()}),500)}startRoutePolling(){if(this.routePollingActive)return;console.log("🔄 Starting route polling...");this.routePollingActive=true;this.fetchRoutes();this.routePollingInterval=window.setInterval((()=>{this.fetchRoutes()}),f.ROUTE_REFRESH_INTERVAL)}stopRoutePolling(){if(!this.routePollingActive)return;console.log("⏹️ Stopping route polling...");this.routePollingActive=false;if(this.routePollingInterval){clearInterval(this.routePollingInterval)}}async fetchRoutes(){const{fromToken:e,toToken:t,fromAmount:i}=p.state;if(!e||!t||!i||parseFloat(i)<=0){return}try{p.setLoadingRoutes(true);console.log("🛣️ Fetching swap routes:",{from:e.symbol,to:t.symbol,amount:i});const a=await v.getRoutesWrapped({amount_in:i,token_in:e.id,token_out:t.id,external:true});if(a.success&&a.data){const e=a.data.paths||[];p.setRoutes(e);if(e.length>0&&!p.state.selectedRoute){p.setSelectedRoute(e[0])}console.log(`✅ Found ${e.length} swap routes`)}else{console.warn("⚠️ Failed to fetch routes:",a.error);p.setRoutes([])}}catch(e){console.error("❌ Error fetching routes:",e);p.setRoutes([])}finally{p.setLoadingRoutes(false)}}getUserAddressForChain(e){const t=r.getWallet(e);return t?.address}async executeSwap(){try{const{fromToken:e,toToken:t,fromAmount:i,selectedRoute:a,slippage:s}=p.state;if(!e||!t||!i||!a){return{success:false,error:"Missing required swap parameters"}}const o=r.getWallet(e.chainUID);if(!o?.isConnected){return{success:false,error:`Wallet not connected for ${e.chainUID}`}}if(!r.hasSufficientBalance(e.chainUID,e.id,i)){return{success:false,error:"Insufficient balance"}}p.setSwapping(true);console.log("🔄 Executing swap...",{from:e.symbol,to:t.symbol,amount:i,route:a.id});const n=ne.getAdapter(o.type);if(!n){return{success:false,error:`Wallet adapter not found for ${o.type}`}}const l=await v.createSwapTransactionWrapped({amount_in:i,asset_in:{token:e.id,token_type:{native:{denom:e.id}}},slippage:s.toString(),minimum_receive:this.calculateMinimumReceived(a.outputAmount,s),sender:{address:o.address,chain_uid:e.chain_uid||e.chainUID},swap_path:{path:a.path||[]},timeout:(Math.floor(Date.now()/1e3)+1200).toString()});if(l.success&&l.data){const t=`swap_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;r.addTransaction(e.chainUID,{txHash:t,timestamp:Date.now(),type:"swap"});D(_.TRANSACTION.SUBMITTED,{txHash:t,chainUID:e.chainUID,type:"swap"});console.log("✅ Swap transaction submitted:",t);return{success:true,txHash:t}}else{return{success:false,error:l.error||"Swap execution failed"}}}catch(e){const t=e instanceof Error?e.message:"Unknown error occurred";console.error("❌ Swap execution error:",t);return{success:false,error:t}}finally{p.setSwapping(false)}}calculateMinimumReceived(e,t){try{const i=BigInt(e);const a=BigInt(Math.floor((100-t)*100));const s=i*a/BigInt(1e4);return s.toString()}catch{return e}}async handleSwapExecution(){console.log("🔄 Swap execution requested via event");const e=await this.executeSwap();if(e.success){D(_.SWAP.EXECUTE_SUCCESS,{txHash:e.txHash})}else{D(_.SWAP.EXECUTE_FAILED,{error:e.error})}}handleRouteRefresh(){console.log("🔄 Manual route refresh requested");this.fetchRoutes()}handleStopPolling(){this.stopRoutePolling()}handleStartPolling(){this.startRoutePolling()}onInitializedChange(e){if(e){console.log("📊 Swap Controller ready for route polling")}}render(){return null}static get watchers(){return{isInitialized:["onInitializedChange"]}}};const ce=":host{display:block;width:100%}.token-content{width:100%}";const de=class{constructor(i){e(this,i);this.tokenSelect=t(this,"tokenSelect");this.handleTokenSelected=e=>{const t=e.detail.item;const i=this.convertTokenMetadataToTokenInfo(t);const a=o.state.tokenSelectorType||"input";this.tokenSelect.emit({token:i,selectorType:a});o.closeTokenModal()}}convertTokenMetadataToTokenInfo(e){return{tokenId:e.tokenId,symbol:e.symbol||e.displayName.toUpperCase(),name:e.displayName,decimals:e.coinDecimal,logoUrl:e.logo||e.image,balance:"0",displayName:e.displayName,coinDecimal:e.coinDecimal,chain_uid:e.chain_uid||e.chain_uids?.[0]||"",chainUID:e.chainUID||e.chain_uid||e.chain_uids?.[0]||"",address:e.address||e.tokenId,logo:e.logo||e.image,price:e.price?parseFloat(e.price):undefined,priceUsd:e.price}}render(){return i("div",{key:"62a9a2ec61182eb3fcc6d4abfae5285eb315eaea",class:"token-content"},i("euclid-data-list",{key:"e09a2611a2cf32f4f705da420d0f6a324e6c7a55",dataType:"tokens",displayMode:"list-item",itemsPerPage:20,infiniteScroll:true,useParentScroll:true,searchable:true,sortable:true,showStats:false,onItemSelected:this.handleTokenSelected}))}};de.style=ce;const ue=":host{display:block;width:100%}.token-input-wrapper{width:100%}.token-input-label{display:block;font-size:var(--euclid-text-sm);font-weight:var(--euclid-font-medium);color:var(--euclid-text-secondary);margin-bottom:var(--euclid-space-2)}.token-input{position:relative;background:var(--euclid-surface);border:2px solid var(--euclid-border);border-radius:var(--euclid-radius-xl);transition:all var(--euclid-transition-fast);overflow:hidden}.token-input:hover:not(.token-input--disabled){border-color:var(--euclid-border-hover)}.token-input--focused{border-color:var(--euclid-interactive-primary);box-shadow:0 0 0 3px rgba(37, 99, 235, 0.1)}.token-input--disabled{background:var(--euclid-surface-secondary);border-color:var(--euclid-border);opacity:0.6;cursor:not-allowed}.token-input--error{border-color:var(--euclid-danger-500);box-shadow:0 0 0 3px rgba(239, 68, 68, 0.1)}.token-input--loading{pointer-events:none}.token-input-main{display:flex;align-items:center;min-height:3.5rem;padding:var(--euclid-space-3) var(--euclid-space-4)}.input-section{flex:1;position:relative;display:flex;align-items:center}.amount-input{width:100%;background:transparent;border:none;outline:none;font-size:var(--euclid-text-lg);font-weight:var(--euclid-font-medium);color:var(--euclid-text-primary);padding:0;margin:0}.amount-input::placeholder{color:var(--euclid-text-muted);font-weight:var(--euclid-font-normal)}.amount-input:disabled{cursor:not-allowed}.loading-spinner{position:absolute;right:0;display:flex;align-items:center;justify-content:center;width:1.5rem;height:1.5rem}.spinner{width:1rem;height:1rem;border:2px solid var(--euclid-border);border-top:2px solid var(--euclid-interactive-primary);border-radius:50%;animation:euclid-spin 1s linear infinite}.token-selector{display:flex;align-items:center;margin-left:var(--euclid-space-4);padding:var(--euclid-space-2) var(--euclid-space-3);border-radius:var(--euclid-radius-lg);background:var(--euclid-surface-secondary);border:1px solid var(--euclid-border);transition:all var(--euclid-transition-fast);min-width:120px;justify-content:center}.token-selector--clickable{cursor:pointer}.token-selector--clickable:hover:not(.token-selector--empty){background:var(--euclid-surface-secondary);transform:translateY(-1px)}.token-selector--empty{border-style:dashed;color:var(--euclid-text-muted)}.token-selector--clickable.token-selector--empty:hover{background:var(--euclid-surface-secondary);border-color:var(--euclid-interactive-primary);color:var(--euclid-interactive-primary)}.token-info{display:flex;align-items:center;gap:var(--euclid-space-2);font-weight:var(--euclid-font-medium);color:var(--euclid-text-primary)}.token-logo{width:var(--euclid-space-6);height:var(--euclid-space-6);border-radius:50%;background:var(--euclid-surface-secondary)}.token-symbol{font-size:var(--euclid-text-base);font-weight:var(--euclid-font-semibold)}.select-token{display:flex;align-items:center;gap:var(--euclid-space-2);font-size:var(--euclid-text-sm);font-weight:var(--euclid-font-medium)}.chevron-icon{width:1rem;height:1rem;transition:transform var(--euclid-transition-fast);color:var(--euclid-text-muted)}.token-selector--clickable:hover .chevron-icon{color:var(--euclid-interactive-primary);transform:translateY(1px)}.token-input-footer{display:flex;align-items:center;justify-content:space-between;padding:var(--euclid-space-2) var(--euclid-space-4);background:var(--euclid-surface-secondary);border-top:1px solid var(--euclid-border)}.balance-section{display:flex;align-items:center;gap:var(--euclid-space-1);font-size:var(--euclid-text-sm)}.balance-label{color:var(--euclid-text-secondary);font-weight:var(--euclid-font-normal)}.balance-value{color:var(--euclid-text-primary);font-weight:var(--euclid-font-medium)}.max-button{padding:var(--euclid-space-1) var(--euclid-space-3);background:var(--euclid-interactive-primary);color:var(--euclid-white);border:none;border-radius:var(--euclid-radius-lg);font-size:var(--euclid-text-sm);font-weight:var(--euclid-font-semibold);cursor:pointer;transition:all var(--euclid-transition-fast)}.max-button:hover:not(:disabled){background:var(--euclid-interactive-primary-hover);transform:translateY(-1px)}.max-button:active:not(:disabled){transform:translateY(0)}.max-button:disabled{background:var(--euclid-text-muted);cursor:not-allowed;transform:none}.error-message{margin-top:var(--euclid-space-2);font-size:var(--euclid-text-sm);color:var(--euclid-danger-500);font-weight:var(--euclid-font-medium)}@media (max-width: 640px){.token-input-main{min-height:3rem;flex-direction:column;align-items:stretch;gap:var(--euclid-space-3)}.input-section{order:2}.token-selector{order:1;margin-left:0;justify-content:flex-start}}@media (prefers-reduced-motion: reduce){.token-selector,.max-button,.spinner,.chevron-icon{animation:none !important;transition:none !important}}.token-selector--clickable:focus-visible,.max-button:focus-visible{outline:2px solid var(--euclid-interactive-primary);outline-offset:2px}.amount-input:focus-visible{outline:none}@media (prefers-color-scheme: dark){:host{--gray-100:#212529;--gray-200:#343a40;--gray-300:#495057;--gray-400:#6c757d;--gray-500:#adb5bd;--gray-600:#ced4da;--gray-700:#dee2e6;--gray-800:#e9ecef;--gray-900:#f8f9fa;--white-color:#212529;--dark-color:#f8f9fa}}.token-input-wrapper{width:100%}.token-input-label{display:block;font-size:var(--font-size-sm);font-weight:var(--font-weight-medium);color:var(--gray-700);margin-bottom:0.5rem}.token-input{position:relative;background:var(--white-color);border:2px solid var(--gray-300);border-radius:var(--border-radius-lg);transition:all var(--transition-fast);overflow:hidden}.token-input:hover:not(.token-input--disabled){border-color:var(--gray-400)}.token-input--focused{border-color:var(--primary-color);box-shadow:0 0 0 3px rgba(0, 123, 255, 0.1)}.token-input--disabled{background:var(--gray-100);border-color:var(--gray-200);opacity:0.6;cursor:not-allowed}.token-input--error{border-color:var(--danger-color);box-shadow:0 0 0 3px rgba(220, 53, 69, 0.1)}.token-input--loading{pointer-events:none}.token-input-main{display:flex;align-items:center;min-height:3.5rem;padding:0.75rem 1rem}.input-section{flex:1;position:relative;display:flex;align-items:center}.amount-input{width:100%;background:transparent;border:none;outline:none;font-size:var(--font-size-lg);font-weight:var(--font-weight-medium);color:var(--gray-900);padding:0;margin:0}.amount-input::placeholder{color:var(--gray-400);font-weight:var(--font-weight-normal)}.amount-input:disabled{cursor:not-allowed}.loading-spinner{position:absolute;right:0;display:flex;align-items:center;justify-content:center;width:1.5rem;height:1.5rem}.spinner{width:1rem;height:1rem;border:2px solid var(--gray-300);border-top:2px solid var(--primary-color);border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.token-selector{display:flex;align-items:center;margin-left:1rem;padding:0.5rem 0.75rem;border-radius:var(--border-radius);background:var(--gray-100);border:1px solid var(--gray-200);transition:all var(--transition-fast);min-width:120px;justify-content:center}.token-selector--clickable{cursor:pointer}.token-selector--clickable:hover:not(.token-selector--empty){background:var(--gray-200);transform:translateY(-1px)}.token-selector--empty{border-style:dashed;color:var(--gray-500)}.token-selector--clickable.token-selector--empty:hover{background:var(--gray-200);border-color:var(--primary-color);color:var(--primary-color)}.token-info{display:flex;align-items:center;gap:0.5rem;font-weight:var(--font-weight-medium);color:var(--gray-900)}.token-logo{width:1.5rem;height:1.5rem;border-radius:50%;background:var(--gray-200)}.token-symbol{font-size:var(--font-size-base);font-weight:var(--font-weight-semibold)}.select-token{display:flex;align-items:center;gap:0.5rem;font-size:var(--font-size-sm);font-weight:var(--font-weight-medium)}.chevron-icon{width:1rem;height:1rem;transition:transform var(--transition-fast);color:var(--gray-500)}.token-selector--clickable:hover .chevron-icon{color:var(--primary-color);transform:translateY(1px)}.token-input-footer{display:flex;align-items:center;justify-content:space-between;padding:0.5rem 1rem;background:var(--gray-50);border-top:1px solid var(--gray-200)}@media (prefers-color-scheme: dark){.token-input-footer{background:var(--gray-200)}}.balance-section{display:flex;align-items:center;gap:0.25rem;font-size:var(--font-size-sm)}.balance-label{color:var(--gray-600);font-weight:var(--font-weight-normal)}.balance-value{color:var(--gray-900);font-weight:var(--font-weight-medium)}.max-button{padding:0.25rem 0.75rem;background:var(--primary-color);color:var(--white-color);border:none;border-radius:var(--border-radius);font-size:var(--font-size-sm);font-weight:var(--font-weight-semibold);cursor:pointer;transition:all var(--transition-fast)}.max-button:hover:not(:disabled){background:var(--primary-color-dark);transform:translateY(-1px)}.max-button:active:not(:disabled){transform:translateY(0)}.max-button:disabled{background:var(--gray-400);cursor:not-allowed;transform:none}.error-message{margin-top:0.5rem;font-size:var(--font-size-sm);color:var(--danger-color);font-weight:var(--font-weight-medium)}@media (max-width: 640px){.token-input-main{flex-direction:column;align-items:stretch;gap:0.75rem;padding:1rem}.input-section{order:2}.token-selector{order:1;margin-left:0;justify-content:space-between;min-width:auto}.token-input-footer{flex-direction:column;gap:0.5rem;align-items:stretch}.balance-section{justify-content:center}.max-button{align-self:stretch}}@media (prefers-contrast: high){.token-input{border-width:3px}.token-input--focused{box-shadow:0 0 0 4px rgba(0, 123, 255, 0.3)}.token-input--error{box-shadow:0 0 0 4px rgba(220, 53, 69, 0.3)}}@media (prefers-reduced-motion: reduce){*{animation-duration:0.01ms !important;animation-iteration-count:1 !important;transition-duration:0.01ms !important}.spinner{animation:none}}.token-selector--clickable:focus-visible,.max-button:focus-visible{outline:2px solid var(--primary-color);outline-offset:2px}.amount-input:focus-visible{outline:none;}";const he=class{constructor(i){e(this,i);this.valueChange=t(this,"valueChange");this.tokenSelect=t(this,"tokenSelect");this.maxClick=t(this,"maxClick");this.value="";this.placeholder="0.0";this.disabled=false;this.showBalance=true;this.showMax=true;this.loading=false;this.tokenSelectable=true;this.focused=false;this.hasError=false;this.handleInputChange=e=>{const t=e.target;let i=t.value;i=i.replace(/[^0-9.]/g,"");const a=i.split(".");if(a.length>2){i=a[0]+"."+a.slice(1).join("")}if(this.token?.decimals&&a.length===2){const e=a[1];if(e.length>this.token.decimals){i=a[0]+"."+e.slice(0,this.token.decimals)}}this.value=i;t.value=i;this.valueChange.emit(i)};this.handleInputFocus=()=>{this.focused=true};this.handleInputBlur=()=>{this.focused=false};this.handleTokenClick=()=>{if(this.tokenSelectable&&!this.disabled){this.tokenSelect.emit()}};this.handleMaxClick=()=>{if(this.token?.balance&&!this.disabled){this.value=this.token.balance;if(this.inputRef){this.inputRef.value=this.token.balance}this.valueChange.emit(this.token.balance);this.maxClick.emit()}}}onValueChange(e){this.validateInput(e)}onErrorChange(e){this.hasError=!!e}onTokenChange(){this.updateUserBalance()}componentWillLoad(){this.setupStoreSubscriptions();this.updateUserBalance()}disconnectedCallback(){}setupStoreSubscriptions(){r.onChange("balances",(()=>{this.updateUserBalance()}))}updateUserBalance(){if(this.token?.symbol){const e=r.getAllConnectedWallets();if(e.length>0){const t=e[0].chainUID;const i=r.getWalletBalance(t,this.token.symbol);this.userBalance=i?.amount||"0"}else{this.userBalance="0"}}}validateInput(e){this.hasError=false;if(!e)return;const t=parseFloat(e);if(isNaN(t)||t<0){this.hasError=true;return}if(this.token?.balance&&this.showBalance){const e=parseFloat(this.token.balance);if(t>e){this.hasError=true;return}}}formatBalance(e){const t=parseFloat(e);if(isNaN(t))return"0";if(t<.001)return"<0.001";if(t<1)return t.toFixed(6);if(t<1e3)return t.toFixed(3);if(t<1e6)return(t/1e3).toFixed(2)+"K";return(t/1e6).toFixed(2)+"M"}render(){const e={"token-input":true,"token-input--focused":this.focused,"token-input--disabled":this.disabled,"token-input--error":this.hasError||!!this.error,"token-input--loading":this.loading};const t={"token-selector":true,"token-selector--clickable":this.tokenSelectable&&!this.disabled,"token-selector--empty":!this.token};return i("div",{key:"af5bb9191c5857ad09a45f7236931db2dac46a32",class:"token-input-wrapper"},this.label&&i("label",{key:"1e2d736acedf3308002ed4832013afcb80b855e1",class:"token-input-label"},this.label),i("div",{key:"931aabc6772eda1af2f1fd8bc3b353212772ff8a",class:e},i("div",{key:"15d3d0f9a7a59a28eb853ae22aa4724c2b7f40a3",class:"token-input-main"},i("div",{key:"720a4852ef244ee99d08c93d85ba9d12a38f9f2d",class:"input-section"},i("input",{key:"3753af07b1874a7cd7d7ebfb0b9d1d5ac9cdda91",ref:e=>this.inputRef=e,type:"text",inputMode:"decimal",placeholder:this.placeholder,value:this.value,disabled:this.disabled,onInput:this.handleInputChange,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,class:"amount-input"}),this.loading&&i("div",{key:"da238af13d7fa039c2761d17610a820bef5dda48",class:"loading-spinner"},i("div",{key:"8307923ac0ba92338b3b69f7c30b5b461a5a80ca",class:"spinner"}))),i("div",{key:"078f93cc4d38836ac4ebd3bdefd065cd7fe47c15",class:t,onClick:this.tokenSelectable&&!this.disabled?this.handleTokenClick:undefined},i("slot",{key:"f26478d546f91da6168ad373351628ed70fc7c05",name:"token"},this.token?i("div",{class:"token-info"},this.token.logoUrl&&i("img",{src:this.token.logoUrl,alt:this.token.symbol,class:"token-logo"}),i("span",{class:"token-symbol"},this.token.symbol),this.tokenSelectable&&!this.disabled&&i("svg",{class:"chevron-icon",viewBox:"0 0 20 20",fill:"currentColor"},i("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"}))):i("div",{class:"select-token"},i("span",null,"Select Token"),this.tokenSelectable&&!this.disabled&&i("svg",{class:"chevron-icon",viewBox:"0 0 20 20",fill:"currentColor"},i("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})))))),(this.showBalance||this.showMax)&&this.token&&i("div",{key:"02e1a4f5905e795d478b60dc2748013bcf19e1be",class:"token-input-footer"},this.showBalance&&(this.userBalance||this.token.balance)&&i("div",{key:"4a87100332f9f5532840e8955e71df881e99ec29",class:"balance-section"},i("span",{key:"7f2cad7de49240b5b9a1d23ea666b3b68a8b025e",class:"balance-label"},"Balance:"),i("span",{key:"4243cb3a196419a1a4fd019c2468e999c752a61e",class:"balance-value"},this.formatBalance(this.userBalance||this.token.balance||"0")," ",this.token.symbol)),this.showMax&&this.token.balance&&i("button",{key:"d059f9d0262fdddff8f517d80bde15ab262b5cc1",class:"max-button",onClick:this.handleMaxClick,disabled:this.disabled,type:"button"},"MAX"))),(this.error||this.hasError)&&i("div",{key:"6ffeabc9cb09e8f2ff7e6e09a825bfe4402b0f50",class:"error-message"},this.error||"Invalid amount"))}static get watchers(){return{value:["onValueChange"],error:["onErrorChange"],token:["onTokenChange"]}}};he.style=ue;const pe=class{constructor(t){e(this,t);this.isInitialized=false;this.trackingTransactions=new Map}async componentWillLoad(){await this.initialize()}async componentDidLoad(){}disconnectedCallback(){this.stopTracking()}async initialize(){console.log("🔍 Initializing Transaction Tracker Controller...");this.startTracking();this.isInitialized=true;console.log("✅ Transaction Tracker Controller initialized")}startTracking(){this.trackingInterval=window.setInterval((()=>{this.checkPendingTransactions()}),1e4)}stopTracking(){if(this.trackingInterval){clearInterval(this.trackingInterval)}}async trackTransaction(e,t,i){console.log("🔍 Starting to track transaction:",{txHash:e,chainUID:t,type:i});this.trackingTransactions.set(e,{chainUID:t,type:i,pollCount:0});await this.checkTransactionStatus(e,t,i)}async checkPendingTransactions(){const e=Array.from(this.trackingTransactions.entries()).map((([e,{chainUID:t,type:i,pollCount:a}])=>this.checkTransactionStatus(e,t,i,a)));await Promise.allSettled(e)}async checkTransactionStatus(e,t,i,a=0){try{console.log(`🔍 Checking transaction status: ${e}`);const s=await v.trackTransactionWrapped(e,t);if(s.success&&s.data){const{status:o}=s.data;r.updateTransactionStatus(t,e,o);if(o==="confirmed"||o==="failed"){this.trackingTransactions.delete(e);D(_.TRANSACTION.FINALIZED,{txHash:e,chainUID:t,type:i,status:o});console.log(`✅ Transaction finalized: ${e} - Status: ${o}`);if(o==="confirmed"){this.refreshUserDataAfterSuccess(t,i)}}else{const s=a+1;if(s>=120){console.warn(`⚠️ Transaction tracking timeout: ${e}`);this.trackingTransactions.delete(e);r.updateTransactionStatus(t,e,"failed");D(_.TRANSACTION.TIMEOUT,{txHash:e,chainUID:t,type:i})}else{this.trackingTransactions.set(e,{chainUID:t,type:i,pollCount:s})}}}else{console.warn(`⚠️ Failed to check transaction status: ${e}`,s.error)}}catch(t){console.error(`❌ Error checking transaction status: ${e}`,t)}}refreshUserDataAfterSuccess(e,t){D(_.USER.REFRESH_DATA);if(t==="add_liquidity"||t==="remove_liquidity"){D(_.LIQUIDITY.POSITIONS_REFRESH)}D(_.USER.BALANCES_REFRESH,{chainUID:e})}getTrackingStats(){const e={totalTracking:this.trackingTransactions.size,byType:{},byChain:{}};this.trackingTransactions.forEach((({chainUID:t,type:i})=>{e.byType[i]=(e.byType[i]||0)+1;e.byChain[t]=(e.byChain[t]||0)+1}));return e}async checkTransactionManually(e,t){try{const i=await v.trackTransactionWrapped(e,t);if(i.success&&i.data){return{success:true,status:i.data.status}}else{return{success:false,error:i.error||"Failed to check transaction status"}}}catch(e){return{success:false,error:e instanceof Error?e.message:"Unknown error"}}}async handleTransactionSubmitted(e){const{txHash:t,chainUID:i,type:a}=e.detail;console.log("🔍 Transaction submitted, starting tracking:",e.detail);await this.trackTransaction(t,i,a)}async handleTrackTransactionRequest(e){const{txHash:t,chainUID:i,type:a}=e.detail;console.log("🔍 Manual transaction tracking requested:",e.detail);await this.trackTransaction(t,i,a)}handleStopTrackingTransaction(e){const{txHash:t}=e.detail;console.log("⏹️ Stopping transaction tracking:",t);this.trackingTransactions.delete(t)}handleGetTrackingStats(){const e=this.getTrackingStats();D(_.TRANSACTION.STATS_RESPONSE,e)}onInitializedChange(e){if(e){console.log("🔍 Transaction Tracker Controller ready")}}render(){return null}static get watchers(){return{isInitialized:["onInitializedChange"]}}};const fe=class{constructor(t){e(this,t);this.isInitialized=false;this.isLoading=false;this.error=null;this.retryCount=0;this.maxRetries=3;this.walletChangeTimeout=null}async componentWillLoad(){this.euclidConfig=this.config?JSON.parse(this.config):c;this.apiClient=h(this.euclidConfig);await this.initialize()}async componentDidLoad(){}disconnectedCallback(){this.clearPeriodicRefresh();r.dispose?.()}async initialize(){console.log("👤 Initializing User Data Controller...");r.onChange("wallets",(async e=>{if(this.walletChangeTimeout){clearTimeout(this.walletChangeTimeout)}this.walletChangeTimeout=window.setTimeout((async()=>{const t=Array.from(e.values()).filter((e=>e.isConnected));if(t.length>0){await this.handleWalletConnection(t)}else{this.handleWalletDisconnection()}this.walletChangeTimeout=null}),200)}));const e=r.getAllConnectedWallets();if(e.length>0){await this.handleWalletConnection(e)}this.isInitialized=true;console.log("✅ User Data Controller initialized")}async handleWalletConnection(e){try{this.isLoading=true;this.error=null;console.log("🔗 Wallets connected, loading user data...");await Promise.all([this.loadUserBalances(),this.loadLiquidityPositions(),this.loadUserTransactions()]);this.setupPeriodicRefresh();this.retryCount=0}catch(e){console.error("❌ Failed to load user data:",e);await this.handleLoadError(e)}finally{this.isLoading=false}}handleWalletDisconnection(){if(r.state.isConnected||r.getAllConnectedWallets().length>0){console.log("🔌 Wallets disconnected, clearing user data...");this.clearPeriodicRefresh();this.retryCount=0;r.clear()}}async loadUserBalances(){const e=r.getAllConnectedWallets();for(const t of e){try{console.log(`💰 Loading balances for ${t.chainUID}:${t.address.slice(0,8)}...`);const e=await this.apiClient.getBalance(t.address,t.chainUID);if(e.success&&e.data){const i=e.data;if(i.balance?.all){const e=i.balance.all.map((e=>({amount:e.amount,token_id:e.denom,token:e.denom,balance:e.amount,chain_uid:t.chainUID,token_type:{native:{denom:e.denom}}})));r.updateWalletBalances(t.chainUID,e)}}}catch(e){console.warn(`⚠️ Failed to load balance for ${t.chainUID}:`,e.message)}}console.log(`✅ Updated balances for connected wallets`)}async loadLiquidityPositions(){const e=r.getAllConnectedWallets();for(const t of e){try{console.log(`🏊 Loading liquidity positions for ${t.chainUID}:${t.address.slice(0,8)}...`);console.log("Liquidity positions loading - implementation pending")}catch(e){console.warn(`⚠️ Failed to load liquidity positions for ${t.chainUID}:`,e.message)}}}async loadUserTransactions(){const e=r.getAllConnectedWallets();for(const t of e){try{console.log(`📊 Loading transactions for ${t.chainUID}:${t.address.slice(0,8)}...`);console.log("Transactions loading - implementation pending")}catch(e){console.warn(`⚠️ Failed to load transactions for ${t.chainUID}:`,e.message)}}}calculatePoolShare(e,t){try{const i=parseFloat(e);const a=parseFloat(String(t.totalSupply||t.liquidity||"0"));if(a===0)return 0;return i/a*100}catch{return 0}}calculateTokenAmount(e,t){try{const i=parseFloat(String(t.reserve||t.balance||"0"));const a=i*e/100;return a.toString()}catch{return"0"}}calculatePositionValue(e,t){try{const i=parseFloat(String(t.tvl||t.liquidity||"0"));const a=i*e/100;return a.toString()}catch{return"0"}}setupPeriodicRefresh(){this.clearPeriodicRefresh();this.refreshTimer=window.setInterval((async()=>{const e=r.getAllConnectedWallets();if(e.length>0){console.log("🔄 Refreshing wallet data...");await this.refreshUserData()}}),this.euclidConfig.refreshIntervals.balances);console.log(`👤 User data refresh interval set to ${this.euclidConfig.refreshIntervals.balances}ms`)}clearPeriodicRefresh(){if(this.refreshTimer){clearInterval(this.refreshTimer);this.refreshTimer=null}}async refreshUserData(){const e=r.getAllConnectedWallets();if(e.length===0)return;try{this.isLoading=true;await Promise.all([this.loadUserBalances(),this.loadLiquidityPositions()]);console.log("Portfolio value calculation - implementation pending");this.retryCount=0}catch(e){console.warn("⚠️ Failed to refresh user data:",e);await this.handleLoadError(e)}finally{this.isLoading=false}}async handleLoadError(e){this.retryCount++;if(this.retryCount<this.maxRetries){console.log(`🔄 Retrying user data load (${this.retryCount}/${this.maxRetries})...`);const e=Math.pow(2,this.retryCount)*1e3;setTimeout((()=>{this.refreshUserData()}),e)}else{console.error("❌ Max retries reached for user data loading");this.error=e.message||"Failed to load user data"}}async handleRefreshRequest(){console.log("🔄 Manual user data refresh requested");await this.refreshUserData()}handleClearRequest(){console.log("🗑️ User data clear requested");r.clear();this.clearPeriodicRefresh()}onInitializedChange(e){if(e){D(_.USER.CONTROLLER_READY,{timestamp:Date.now()})}}render(){return null}static get watchers(){return{isInitialized:["onInitializedChange"]}}};const ve=":host{display:block}.wallet-content{width:100%}.step-header{margin-bottom:var(--euclid-spacing-5);text-align:center}.step-header h3{margin:0 0 var(--euclid-spacing-2) 0;font-size:var(--euclid-text-size-lg);font-weight:var(--euclid-font-weight-semibold);color:var(--euclid-text-primary)}.step-header p{margin:0;color:var(--euclid-text-secondary);font-size:var(--euclid-text-size-sm)}.back-button{background:none;border:none;color:var(--euclid-text-secondary);cursor:pointer;font-size:var(--euclid-text-size-sm);padding:var(--euclid-spacing-2);margin-bottom:var(--euclid-spacing-3);border-radius:var(--euclid-radius-sm);transition:all var(--euclid-transition-duration-fast)}.back-button:hover{color:var(--euclid-text-primary);background:var(--euclid-surface-secondary)}.wallet-content euclid-data-list{max-height:400px}.wallet-grid{display:grid;grid-template-columns:repeat(auto-fill, minmax(160px, 1fr));gap:var(--euclid-spacing-3)}.wallet-card{display:flex;flex-direction:column;align-items:center;padding:var(--euclid-spacing-4);border:2px solid var(--euclid-border);border-radius:var(--euclid-radius-lg);background:var(--euclid-surface);cursor:pointer;transition:all var(--euclid-transition-duration-fast);text-align:center}.wallet-card:hover:not(.wallet-card--not-installed){border-color:var(--euclid-border-hover);background:var(--euclid-surface-secondary);transform:translateY(-1px)}.wallet-card--not-installed{opacity:0.6}.wallet-card--not-installed:hover{border-color:var(--euclid-warning-300);background:var(--euclid-warning-50);transform:translateY(-1px)}.wallet-icon{width:3rem;height:3rem;border-radius:var(--euclid-radius-lg);display:flex;align-items:center;justify-content:center;margin-bottom:var(--euclid-spacing-3);background:var(--euclid-surface-secondary)}.wallet-emoji{font-size:1.5rem}.wallet-info{display:flex;flex-direction:column;gap:var(--euclid-spacing-1);width:100%}.wallet-name{font-size:var(--euclid-text-size-sm);font-weight:var(--euclid-font-weight-medium);color:var(--euclid-text-primary)}.wallet-description{font-size:var(--euclid-text-size-xs);color:var(--euclid-text-secondary);line-height:1.3}.install-badge{display:inline-block;font-size:var(--euclid-text-size-xs);padding:var(--euclid-spacing-1) var(--euclid-spacing-2);border-radius:var(--euclid-radius-sm);background:var(--euclid-warning-100);color:var(--euclid-warning-700);margin-top:var(--euclid-spacing-2);font-weight:var(--euclid-font-weight-medium)}@media (max-width: 640px){.wallet-grid{grid-template-columns:repeat(2, 1fr);gap:var(--euclid-spacing-2)}.wallet-card{padding:var(--euclid-spacing-3)}.wallet-icon{width:2.5rem;height:2.5rem}}@media (max-width: 480px){.wallet-grid{grid-template-columns:1fr}.step-header{margin-bottom:var(--euclid-spacing-4)}.step-header h3{font-size:var(--euclid-text-size-base)}}.no-wallets{text-align:center;padding:var(--euclid-spacing-6);color:var(--euclid-text-secondary)}.no-wallets p{margin:0 0 var(--euclid-spacing-2) 0;font-size:var(--euclid-text-size-sm)}.wallet-card:focus-visible,.chain-card:focus-visible{outline:2px solid var(--euclid-border-focus);outline-offset:2px}.back-button:focus-visible{outline:2px solid var(--euclid-border-focus);outline-offset:2px}";const me=class{constructor(t){e(this,t);this.walletProviders=[];this.selectedChain=null;this.step="chains";this.handleChainSelect=e=>{console.log("🌐 Chain selected:",e.display_name,e.chain_uid);this.selectedChain=e;this.step="wallets"};this.handleChainSelected=e=>{const t=e.detail.item;this.handleChainSelect(t)};this.handleBackToChains=()=>{this.step="chains";this.selectedChain=null};this.handleWalletConnect=async e=>{console.log("🔗 Wallet clicked:",e);if(!e.installed){console.log("❌ Wallet not installed, opening install URL");this.openInstallUrl(e.id);return}if(!this.selectedChain){console.error("❌ No chain selected");return}console.log("📡 Dispatching wallet connection request:",{chainUID:this.selectedChain.chain_uid,walletType:e.id});D(_.WALLET.CONNECT_REQUEST,{chainUID:this.selectedChain.chain_uid,walletType:e.id});o.closeWalletModal()}}componentWillLoad(){this.detectWallets()}detectWallets(){const e=ne.getAvailableWallets();const t={metamask:{name:"MetaMask",icon:"🦊",description:"Connect using MetaMask wallet"},keplr:{name:"Keplr",icon:"🔗",description:"Connect using Keplr wallet"},phantom:{name:"Phantom",icon:"👻",description:"Connect using Phantom wallet"},cosmostation:{name:"Cosmostation",icon:"🌌",description:"Connect using Cosmostation wallet"},walletconnect:{name:"WalletConnect",icon:"🌐",description:"Connect using WalletConnect"}};this.walletProviders=e.map((e=>{const i=t[e.type]||{name:e.type,icon:"🔗",description:`Connect using ${e.type} wallet`};return{id:e.type,name:i.name,icon:i.icon,installed:e.installed,description:i.description}}));console.log("🔍 Detected wallets:",this.walletProviders)}openInstallUrl(e){const t={metamask:"https://metamask.io/download/",keplr:"https://www.keplr.app/download",phantom:"https://phantom.app/download",walletconnect:"https://walletconnect.com/"};const i=t[e];if(i){window.open(i,"_blank")}}getCompatibleWallets(){if(!this.selectedChain)return[];const e=this.selectedChain.type.toLowerCase();const t=e==="evm";const i=e==="cosmwasm";return this.walletProviders.filter((e=>{if(t){return["metamask","phantom","walletconnect"].includes(e.id)}else if(i){return["keplr","cosmostation","walletconnect"].includes(e.id)}return false}))}render(){if(this.step==="chains"){return this.renderChainSelection()}else{return this.renderWalletSelection()}}renderChainSelection(){return i("div",{class:"wallet-content"},i("div",{class:"step-header"},i("h3",null,"Select Blockchain Network"),i("p",null,"Choose the blockchain network you want to connect to")),i("euclid-data-list",{dataType:"chains",displayMode:"compact",itemsPerPage:20,infiniteScroll:true,useParentScroll:true,searchable:true,sortable:false,showStats:false,filterable:false,showEndMessage:false,onItemSelected:this.handleChainSelected}))}renderWalletSelection(){const e=this.getCompatibleWallets();return i("div",{class:"wallet-content"},i("div",{class:"step-header"},i("button",{class:"back-button",onClick:this.handleBackToChains},"← Back to Chains"),i("h3",null,"Connect Wallet to ",this.selectedChain?.display_name),i("p",null,"Choose a compatible wallet for this ",this.selectedChain?.type.toUpperCase()," network")),i("div",{class:"wallet-grid"},e.map((e=>i("button",{key:e.id,class:{"wallet-card":true,"wallet-card--not-installed":!e.installed},onClick:()=>this.handleWalletConnect(e),type:"button"},i("div",{class:"wallet-icon"},i("span",{class:"wallet-emoji"},e.icon)),i("div",{class:"wallet-info"},i("div",{class:"wallet-name"},e.name),i("div",{class:"wallet-description"},e.description),!e.installed&&i("span",{class:"install-badge"},"Install Required")))))),e.length===0&&i("div",{class:"no-wallets"},i("p",null,"No compatible wallets found for ",this.selectedChain?.type.toUpperCase()," networks."),i("p",null,"Please install a compatible wallet extension.")))}};me.style=ve;const be=class{constructor(t){e(this,t);this.isInitialized=false}async componentWillLoad(){this.euclidConfig=this.config?JSON.parse(this.config):c}async componentDidLoad(){await this.initialize()}async initialize(){console.log("🔗 Initializing Wallet Controller...");await this.detectAvailableWallets();this.setupWalletEventListeners();this.isInitialized=true;console.log("✅ Wallet Controller initialized")}async detectAvailableWallets(){const e=[];if(window.keplr){e.push("keplr")}if(window.ethereum?.isMetaMask){e.push("metamask")}if(window.cosmostation){e.push("cosmostation")}console.log("🔍 Available wallets detected:",e);return e}setupWalletEventListeners(){if(window.ethereum){const e=window.ethereum;if(e.on){e.on("accountsChanged",(e=>{console.log("MetaMask accounts changed:",e);this.handleEvmAccountChange(e)}));e.on("chainChanged",(e=>{console.log("MetaMask chain changed:",e);this.handleEvmChainChange(e)}))}}window.addEventListener("keplr_keystorechange",(()=>{console.log("Keplr keystore changed");this.handleKeplrKeystoreChange()}))}async handleEvmAccountChange(e){if(e.length===0){this.disconnectEvmWallets()}}handleEvmChainChange(e){console.log("Chain changed to:",e)}handleKeplrKeystoreChange(){}disconnectEvmWallets(){const e=["ethereum","bsc","polygon","arbitrum","base","manta","sepolia"];e.forEach((e=>{r.removeWallet(e)}))}async handleWalletConnectionRequest(e){const{chainUID:t,walletType:i}=e.detail;console.log("🎯 Wallet controller received connection request:",{chainUID:t,walletType:i});try{console.log("🔄 Attempting to connect wallet...");await this.connectWallet(t,i);console.log("✅ Wallet connection successful!")}catch(e){console.error("❌ Failed to connect wallet:",e);D(_.WALLET.CONNECT_FAILED,{chainUID:t,walletType:i,error:e instanceof Error?e.message:"Unknown error"})}}handleWalletDisconnectionRequest(e){const{chainUID:t}=e.detail;console.log("🔌 Wallet disconnection requested:",t);r.disconnectWallet(t);D(_.WALLET.DISCONNECT_SUCCESS,{chainUID:t})}async connectWallet(e,t){console.log("🔗 connectWallet called with:",{chainUID:e,walletType:t});let i=m.getChain(e);if(!i){console.warn(`Chain ${e} not found in store, using fallback configuration`);i=this.getFallbackChainConfig(e,t);if(!i){throw new Error(`Chain configuration not found for ${e} and no fallback available`)}}console.log("🔗 Using chain config:",i);const a=["keplr","metamask","cosmostation","walletconnect","phantom"];if(!a.includes(t)){throw new Error(`Unsupported wallet type: ${t}`)}console.log("✅ Wallet type validation passed");console.log("🔗 Calling WalletAdapterFactory.connectWallet...");const s=await ne.connectWallet(t,i);console.log("🔗 Wallet adapter result:",s);if(s.success&&s.address){console.log("✅ Connection successful, adding to store...");r.addWallet(e,{address:s.address,name:t,walletType:t,type:t,isConnected:true,balances:[]});console.log("📡 Emitting connection success event...");D(_.WALLET.CONNECT_SUCCESS,{chainUID:e,walletType:t,address:s.address})}else{console.error("❌ Wallet connection failed:",s.error);throw new Error(s.error||"Failed to connect wallet")}}getFallbackChainConfig(e,t){const i={ethereum:{chain_uid:"ethereum",chain_id:"1",display_name:"Ethereum",type:"EVM",explorer_url:"https://etherscan.io",factory_address:"",token_factory_address:"",logo:""},bsc:{chain_uid:"bsc",chain_id:"56",display_name:"BNB Smart Chain",type:"EVM",explorer_url:"https://bscscan.com",factory_address:"",token_factory_address:"",logo:""},polygon:{chain_uid:"polygon",chain_id:"137",display_name:"Polygon",type:"EVM",explorer_url:"https://polygonscan.com",factory_address:"",token_factory_address:"",logo:""},arbitrum:{chain_uid:"arbitrum",chain_id:"42161",display_name:"Arbitrum One",type:"EVM",explorer_url:"https://arbiscan.io",factory_address:"",token_factory_address:"",logo:""},"cosmoshub-4":{chain_uid:"cosmoshub-4",chain_id:"cosmoshub-4",display_name:"Cosmos Hub",type:"Cosmwasm",explorer_url:"https://mintscan.io/cosmos",factory_address:"",token_factory_address:"",logo:""},"osmosis-1":{chain_uid:"osmosis-1",chain_id:"osmosis-1",display_name:"Osmosis",type:"Cosmwasm",explorer_url:"https://mintscan.io/osmosis",factory_address:"",token_factory_address:"",logo:""}};const a=i[e];if(!a){return null}const s=["metamask","phantom","walletconnect"].includes(t);const o=["keplr","cosmostation"].includes(t);if(a.type==="EVM"&&!s){return null}if(a.type==="Cosmwasm"&&!o){return null}return a}render(){return null}};export{g as euclid_address_book,x as euclid_button,k as euclid_config_provider,P as euclid_core_provider,R as euclid_data_list,N as euclid_demo_playground,B as euclid_liquidity_card,U as euclid_liquidity_controller,K as euclid_market_data_controller,G as euclid_modal,X as euclid_portfolio_overview,te as euclid_swap_card,le as euclid_swap_controller,de as euclid_token_content,he as euclid_token_input,pe as euclid_tx_tracker_controller,fe as euclid_user_data_controller,me as euclid_wallet_content,be as euclid_wallet_controller};
//# sourceMappingURL=p-beb6d90c.entry.js.map