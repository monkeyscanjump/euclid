{"version":3,"file":"wallet-adapter.js","sourceRoot":"","sources":["../../src/utils/wallet-adapter.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Wallet Adapter Utility\n *\n * Abstracts the actual connection logic for different wallet types.\n * Used by euclid-wallet-controller to maintain separation of concerns.\n */\n\nimport type { EuclidChainConfig } from './types/api.types';\n\nexport type WalletType = 'keplr' | 'metamask' | 'phantom' | 'cosmostation' | 'walletconnect' | 'other';\n\n// Declare global window extensions for wallets\ndeclare global {\n  interface Window {\n    keplr?: {\n      enable: (chainId: string) => Promise<void>;\n      experimentalSuggestChain: (chainInfo: unknown) => Promise<void>;\n      getOfflineSigner: (chainId: string) => {\n        getAccounts: () => Promise<Array<{ address: string }>>;\n      };\n      getKey: (chainId: string) => Promise<{ bech32Address: string }>;\n    };\n    ethereum?: {\n      isMetaMask?: boolean;\n      request: (args: { method: string; params?: unknown[] }) => Promise<unknown>;\n    };\n    cosmostation?: {\n      cosmos: {\n        request: (args: { method: string; params: unknown }) => Promise<unknown>;\n      };\n    };\n    solana?: {\n      isPhantom?: boolean;\n      connect: () => Promise<{ publicKey: { toString: () => string } }>;\n      disconnect: () => Promise<void>;\n    };\n  }\n}export interface WalletConnectionResult {\n  success: boolean;\n  address?: string;\n  chainId?: string;\n  error?: string;\n}\n\nexport interface WalletAdapter {\n  isInstalled(): boolean;\n  connect(chainConfig: EuclidChainConfig): Promise<WalletConnectionResult>;\n  disconnect(chainUID: string): Promise<void>;\n  getAddress(chainUID: string): Promise<string | null>;\n  switchChain(chainConfig: EuclidChainConfig): Promise<boolean>;\n}\n\n// Keplr Wallet Adapter\nexport class KeplrAdapter implements WalletAdapter {\n  private get keplr() {\n    return window.keplr;\n  }\n\n  isInstalled(): boolean {\n    return !!window.keplr;\n  }\n\n  async connect(chainConfig: EuclidChainConfig): Promise<WalletConnectionResult> {\n    try {\n      if (!this.isInstalled()) {\n        return { success: false, error: 'Keplr wallet not installed' };\n      }\n\n      // Suggest chain if not already added\n      if (chainConfig.type === 'Cosmwasm') {\n        try {\n          await this.keplr.experimentalSuggestChain({\n            chainId: chainConfig.chain_id,\n            chainName: chainConfig.display_name,\n            rpc: 'https://rpc.cosmos.network', // Default RPC\n            rest: 'https://api.cosmos.network', // Default REST\n            bip44: { coinType: 118 },\n            bech32Config: {\n              bech32PrefixAccAddr: this.getAddressPrefix(chainConfig.chain_id),\n              bech32PrefixAccPub: this.getAddressPrefix(chainConfig.chain_id) + 'pub',\n              bech32PrefixValAddr: this.getAddressPrefix(chainConfig.chain_id) + 'valoper',\n              bech32PrefixValPub: this.getAddressPrefix(chainConfig.chain_id) + 'valoperpub',\n              bech32PrefixConsAddr: this.getAddressPrefix(chainConfig.chain_id) + 'valcons',\n              bech32PrefixConsPub: this.getAddressPrefix(chainConfig.chain_id) + 'valconspub'\n            },\n            currencies: [{\n              coinDenom: 'ATOM', // Default\n              coinMinimalDenom: 'uatom',\n              coinDecimals: 6,\n            }],\n            feeCurrencies: [{\n              coinDenom: 'ATOM', // Default\n              coinMinimalDenom: 'uatom',\n              coinDecimals: 6,\n            }],\n            stakeCurrency: {\n              coinDenom: 'ATOM', // Default\n              coinMinimalDenom: 'uatom',\n              coinDecimals: 6,\n            }\n          });\n        } catch (suggestError) {\n          console.warn('Failed to suggest chain to Keplr:', suggestError);\n        }\n      }\n\n      // Enable the chain\n      await this.keplr.enable(chainConfig.chain_id);\n\n      // Get the offline signer and accounts\n      const offlineSigner = this.keplr.getOfflineSigner(chainConfig.chain_id);\n      const accounts = await (offlineSigner as { getAccounts: () => Promise<Array<{ address: string }>> }).getAccounts();\n\n      if (accounts.length === 0) {\n        return { success: false, error: 'No accounts found' };\n      }\n\n      return {\n        success: true,\n        address: accounts[0].address,\n        chainId: chainConfig.chain_id,\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Failed to connect to Keplr',\n      };\n    }\n  }\n\n  async disconnect(chainUID: string): Promise<void> {\n    // Keplr doesn't have a programmatic disconnect method\n    // The user needs to disconnect from the Keplr extension directly\n    console.log('Keplr disconnect requested for:', chainUID);\n  }\n\n  async getAddress(chainUID: string): Promise<string | null> {\n    try {\n      if (!this.isInstalled()) return null;\n\n      // Use Keplr's getKey method to get the address\n      const key = await (this.keplr as unknown as { getKey: (chainId: string) => Promise<{ bech32Address: string }> }).getKey(chainUID);\n      return key.bech32Address;\n    } catch {\n      return null;\n    }\n  }\n\n  async switchChain(chainConfig: EuclidChainConfig): Promise<boolean> {\n    try {\n      await this.keplr.enable(chainConfig.chain_id);\n      return true;\n    } catch {\n      return false;\n    }\n  }\n\n  private getAddressPrefix(chainId: string): string {\n    // Common Cosmos chain prefixes\n    const prefixes: Record<string, string> = {\n      'cosmoshub-4': 'cosmos',\n      'osmosis-1': 'osmo',\n      'juno-1': 'juno',\n      'stargaze-1': 'stars',\n    };\n    return prefixes[chainId] || 'cosmos';\n  }\n}\n\n// MetaMask Wallet Adapter\nexport class MetaMaskAdapter implements WalletAdapter {\n  private get ethereum() {\n    return window.ethereum;\n  }\n\n  isInstalled(): boolean {\n    return !!window.ethereum && window.ethereum.isMetaMask;\n  }\n\n  async connect(chainConfig: EuclidChainConfig): Promise<WalletConnectionResult> {\n    try {\n      if (!this.isInstalled()) {\n        return { success: false, error: 'MetaMask not installed' };\n      }\n\n      if (chainConfig.type !== 'EVM') {\n        return { success: false, error: 'MetaMask only supports EVM chains' };\n      }\n\n      // Request account access\n      const accounts = await this.ethereum.request({\n        method: 'eth_requestAccounts'\n      });\n\n      if (!Array.isArray(accounts) || accounts.length === 0) {\n        return { success: false, error: 'No accounts found' };\n      }\n\n      // Switch to or add the correct network\n      const switched = await this.switchChain(chainConfig);\n      if (!switched) {\n        return { success: false, error: 'Failed to switch network' };\n      }\n\n      return {\n        success: true,\n        address: accounts[0],\n        chainId: chainConfig.chain_id,\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Failed to connect to MetaMask',\n      };\n    }\n  }\n\n  async disconnect(_chainUID: string): Promise<void> {\n    // MetaMask doesn't have a programmatic disconnect method\n    // The connection persists until the user disconnects from MetaMask directly\n    // Parameter kept for interface consistency but not used in MetaMask\n  }\n\n  async getAddress(_chainUID: string): Promise<string | null> {\n    try {\n      if (!this.isInstalled()) return null;\n\n      const accounts = await this.ethereum.request({\n        method: 'eth_accounts'\n      });\n      return Array.isArray(accounts) && accounts.length > 0 ? accounts[0] : null;\n    } catch {\n      return null;\n    }\n  }\n\n  async switchChain(chainConfig: EuclidChainConfig): Promise<boolean> {\n    try {\n      const chainIdHex = `0x${parseInt(chainConfig.chain_id).toString(16)}`;\n\n      // Try to switch to the chain\n      try {\n        await this.ethereum.request({\n          method: 'wallet_switchEthereumChain',\n          params: [{ chainId: chainIdHex }],\n        });\n        return true;\n      } catch (switchError: unknown) {\n        // Chain not added to MetaMask, try to add it\n        if ((switchError as { code?: number }).code === 4902) {\n          await this.ethereum.request({\n            method: 'wallet_addEthereumChain',\n            params: [{\n              chainId: chainIdHex,\n              chainName: chainConfig.display_name,\n              rpcUrls: ['https://rpc.example.com'], // Default RPC\n              nativeCurrency: {\n                name: 'ETH',\n                symbol: 'ETH',\n                decimals: 18,\n              },\n              blockExplorerUrls: chainConfig.explorer_url ? [chainConfig.explorer_url] : [],\n            }],\n          });\n          return true;\n        }\n        throw switchError;\n      }\n    } catch {\n      return false;\n    }\n  }\n}\n\n// Cosmostation Adapter (similar to Keplr but for Cosmostation wallet)\nexport class CosmostationAdapter implements WalletAdapter {\n  private get cosmostation() {\n    return window.cosmostation;\n  }\n\n  isInstalled(): boolean {\n    return !!window.cosmostation;\n  }\n\n  async connect(chainConfig: EuclidChainConfig): Promise<WalletConnectionResult> {\n    try {\n      if (!this.isInstalled()) {\n        return { success: false, error: 'Cosmostation wallet not installed' };\n      }\n\n      if (chainConfig.type !== 'Cosmwasm') {\n        return { success: false, error: 'Cosmostation only supports Cosmos chains' };\n      }\n\n      const account = await this.cosmostation.cosmos.request({\n        method: 'cos_requestAccount',\n        params: { chainName: chainConfig.chain_id },\n      });\n\n      return {\n        success: true,\n        address: (account as {address: string}).address,\n        chainId: chainConfig.chain_id,\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Failed to connect to Cosmostation',\n      };\n    }\n  }\n\n  async disconnect(chainUID: string): Promise<void> {\n    console.log('Cosmostation disconnect requested for:', chainUID);\n  }\n\n  async getAddress(chainUID: string): Promise<string | null> {\n    try {\n      if (!this.isInstalled()) return null;\n\n      const account = await this.cosmostation.cosmos.request({\n        method: 'cos_account',\n        params: { chainName: chainUID },\n      });\n      return (account as {address?: string})?.address || null;\n    } catch {\n      return null;\n    }\n  }\n\n  async switchChain(_chainConfig: EuclidChainConfig): Promise<boolean> {\n    // Cosmostation handles chain switching automatically\n    return true;\n  }\n}\n\n// Phantom Wallet Adapter\nexport class PhantomAdapter implements WalletAdapter {\n  private get phantom() {\n    return (window as { phantom?: { ethereum?: { request: (args: { method: string; params?: unknown[] }) => Promise<unknown> } } }).phantom?.ethereum;\n  }\n\n  isInstalled(): boolean {\n    return !!this.phantom;\n  }\n\n  async connect(chainConfig: EuclidChainConfig): Promise<WalletConnectionResult> {\n    try {\n      if (!this.isInstalled()) {\n        return { success: false, error: 'Phantom wallet not installed' };\n      }\n\n      if (chainConfig.type !== 'EVM') {\n        return { success: false, error: 'Phantom only supports EVM chains' };\n      }\n\n      // Request account access\n      const accounts = await this.phantom.request({\n        method: 'eth_requestAccounts'\n      });\n\n      if (!Array.isArray(accounts) || accounts.length === 0) {\n        return { success: false, error: 'No accounts found' };\n      }\n\n      return {\n        success: true,\n        address: accounts[0],\n        chainId: chainConfig.chain_id,\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Failed to connect to Phantom',\n      };\n    }\n  }\n\n  async disconnect(_chainUID: string): Promise<void> {\n    // Phantom doesn't have a programmatic disconnect method\n  }\n\n  async getAddress(_chainUID: string): Promise<string | null> {\n    try {\n      if (!this.isInstalled()) return null;\n\n      const accounts = await this.phantom.request({\n        method: 'eth_accounts'\n      });\n      return Array.isArray(accounts) && accounts.length > 0 ? accounts[0] : null;\n    } catch {\n      return null;\n    }\n  }\n\n  async switchChain(chainConfig: EuclidChainConfig): Promise<boolean> {\n    try {\n      const chainIdHex = `0x${parseInt(chainConfig.chain_id).toString(16)}`;\n\n      await this.phantom.request({\n        method: 'wallet_switchEthereumChain',\n        params: [{ chainId: chainIdHex }],\n      });\n      return true;\n    } catch {\n      return false;\n    }\n  }\n}\n\n// Wallet Adapter Factory\nexport class WalletAdapterFactory {\n  private static adapters: Map<WalletType, WalletAdapter> = new Map();\n\n  static {\n    this.adapters.set('keplr', new KeplrAdapter());\n    this.adapters.set('metamask', new MetaMaskAdapter());\n    this.adapters.set('phantom', new PhantomAdapter());\n    this.adapters.set('cosmostation', new CosmostationAdapter());\n  }\n\n  static getAdapter(walletType: WalletType): WalletAdapter | null {\n    return this.adapters.get(walletType) || null;\n  }\n\n  static getAvailableWallets(): Array<{ type: WalletType; installed: boolean }> {\n    return Array.from(this.adapters.entries()).map(([type, adapter]) => ({\n      type,\n      installed: adapter.isInstalled(),\n    }));\n  }\n\n  static async connectWallet(\n    walletType: WalletType,\n    chainConfig: EuclidChainConfig\n  ): Promise<WalletConnectionResult> {\n    const adapter = this.getAdapter(walletType);\n    if (!adapter) {\n      return { success: false, error: `Adapter not found for ${walletType}` };\n    }\n\n    return adapter.connect(chainConfig);\n  }\n\n  static async disconnectWallet(walletType: WalletType, chainUID: string): Promise<void> {\n    const adapter = this.getAdapter(walletType);\n    if (adapter) {\n      await adapter.disconnect(chainUID);\n    }\n  }\n}\n"]}