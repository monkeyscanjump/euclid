import{r as e,c as t,h as i,H as a,d as s}from"./p-uEsOKkhe.js";import{w as o,a as r,b as n,l,s as c,D as d,c as u}from"./p-DsDkRGkv.js";import{m as h}from"./p-BJphfuWS.js";import{m as p,D as f,E as m}from"./p-9CRWQAc1.js";import{a as g,E as b,d as v,r as y,p as x,l as w}from"./p-DpGAwWdH.js";function k(){const e=[];if(o.state.connectedWallets){for(const[t,i]of Object.entries(o.state.connectedWallets)){const a=h.state.chains.find((e=>e.chain_uid===t));if(a&&i.address){e.push({id:`${t}-${i.address}`,address:i.address,chainUID:t,chainName:a.display_name,chainLogo:a.logo,chainType:a.type,walletType:i.walletType||"Connected",provider:i.walletType||"Unknown",isConnected:true,label:`${i.name||i.walletType||"Wallet"} (${a.display_name})`})}}}return e}function M(e,t,i="osmosis-1"){if(!t.trim())return e;const a=t.split(",").map((e=>e.trim())).filter((e=>e.length>0));const s=[...e];for(const e of a){const t=s.some((t=>t.address===e&&t.chainUID===i));if(!t){const t=h.state.chains.find((e=>e.chain_uid===i));if(t){s.push({id:`custom-${i}-${e}`,address:e,chainUID:i,chainName:t.display_name,chainLogo:t.logo,chainType:t.type,walletType:"custom",provider:"Custom",isConnected:false,label:`Custom Wallet (${t.display_name})`})}}}return s}function D(e){o.onChange("connectedWallets",e);o.onChange("isConnected",e);o.onChange("address",e);o.onChange("wallets",e)}const z=":host{display:block;width:100%}.address-book{background:var(--euclid-surface);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-lg);height:700px;display:flex;flex-direction:column;overflow:hidden}.header{display:flex;justify-content:space-between;align-items:center;padding:var(--euclid-space-4);border-bottom:1px solid var(--euclid-border);background:var(--euclid-surface-secondary)}.header h2{margin:0;font-size:var(--euclid-text-lg);font-weight:var(--euclid-font-semibold);color:var(--euclid-text-primary)}.address-form{background:var(--euclid-surface-tertiary);border-bottom:1px solid var(--euclid-border);padding:var(--euclid-space-4);position:relative;z-index:10}.form-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--euclid-space-4)}.form-header h3{margin:0;font-weight:var(--euclid-font-medium);color:var(--euclid-text-primary)}.close-btn{background:none;border:none;font-size:var(--euclid-text-lg);cursor:pointer;padding:var(--euclid-space-1);border-radius:var(--euclid-radius-sm);color:var(--euclid-text-tertiary);transition:all var(--euclid-transition-fast)}.close-btn:hover{background:var(--euclid-surface-secondary);color:var(--euclid-text-secondary)}.form-fields{display:grid;gap:var(--euclid-space-3);margin-bottom:var(--euclid-space-4)}.field{display:flex;flex-direction:column;gap:var(--euclid-space-1)}.field label{font-size:var(--euclid-text-sm);font-weight:var(--euclid-font-medium);color:var(--euclid-text-secondary)}.field input,.field select{padding:var(--euclid-space-2) var(--euclid-space-3);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-md);background:var(--euclid-surface);color:var(--euclid-text-primary);font-size:var(--euclid-text-sm);transition:border-color var(--euclid-transition-fast)}.field input:focus,.field select:focus{outline:none;border-color:var(--euclid-primary)}.form-actions{display:flex;gap:var(--euclid-space-2);justify-content:flex-end}.content{display:flex;flex:1;overflow:hidden}.sidebar{width:320px;background:var(--euclid-surface-secondary);border-right:1px solid var(--euclid-border);overflow-y:auto;padding:var(--euclid-space-3)}.chain-item{display:flex;align-items:center;padding:var(--euclid-space-4);border-radius:var(--euclid-radius-lg);cursor:pointer;margin-bottom:var(--euclid-space-2);transition:all var(--euclid-transition-fast);border:1px solid transparent;background:var(--euclid-surface)}.wallets-item{display:flex;align-items:center;padding:var(--euclid-space-4);border-radius:var(--euclid-radius-lg);cursor:pointer;margin-bottom:var(--euclid-space-3);transition:all var(--euclid-transition-fast);border:1px solid transparent;background:var(--euclid-surface);border-bottom:1px solid var(--euclid-border)}.wallets-item:hover,.chain-item:hover{border-color:var(--euclid-border-focus);box-shadow:0 2px 8px rgba(0, 0, 0, 0.1);transform:translateY(-1px)}.wallets-item.selected,.chain-item.selected{background:var(--euclid-primary-50);border-color:var(--euclid-primary-500);box-shadow:0 4px 16px rgba(var(--euclid-primary-500-rgb), 0.2)}.chain-logo{width:48px;height:48px;border-radius:var(--euclid-radius-md);object-fit:cover;margin-right:var(--euclid-space-3);flex-shrink:0}.wallets-icon{width:48px;height:48px;border-radius:var(--euclid-radius-md);background:var(--euclid-primary-100);color:var(--euclid-primary-700);display:flex;align-items:center;justify-content:center;font-size:24px;margin-right:var(--euclid-space-3);flex-shrink:0}.chain-info{flex:1;min-width:0;display:flex;flex-direction:column;gap:var(--euclid-space-1)}.chain-name{font-weight:var(--euclid-font-semibold);font-size:var(--euclid-text-base);color:var(--euclid-text-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.chain-type{font-size:var(--euclid-text-xs);color:var(--euclid-text-tertiary);text-transform:uppercase;letter-spacing:0.5px;background:var(--euclid-surface-tertiary);padding:2px var(--euclid-space-1);border-radius:var(--euclid-radius-sm);display:inline-block;width:fit-content}.chain-badges{display:flex;flex-direction:column;align-items:flex-end;gap:var(--euclid-space-1)}.count{background:var(--euclid-primary-100);color:var(--euclid-primary-700);padding:var(--euclid-space-1) var(--euclid-space-2);border-radius:var(--euclid-radius-full);font-size:var(--euclid-text-xs);font-weight:var(--euclid-font-semibold);min-width:24px;text-align:center}.chain-item.selected .count{background:var(--euclid-primary-500);color:white}.active{color:var(--euclid-success-500);font-size:var(--euclid-text-sm)}.main{flex:1;background:var(--euclid-surface);display:flex;flex-direction:column;overflow:hidden}.chain-section{display:flex;flex-direction:column;height:100%}.chain-header{display:flex;justify-content:space-between;align-items:center;padding:var(--euclid-space-4);border-bottom:1px solid var(--euclid-border);background:var(--euclid-surface-secondary)}.chain-header .chain-header-info{display:flex;align-items:center;gap:var(--euclid-space-3)}.chain-header .logo{width:48px;height:48px;border-radius:var(--euclid-radius-md);object-fit:cover}.chain-header h3{margin:0;font-size:var(--euclid-text-xl);font-weight:var(--euclid-font-semibold);color:var(--euclid-text-primary)}.meta{display:flex;align-items:center;gap:var(--euclid-space-2);margin-top:var(--euclid-space-1)}.badge{padding:3px var(--euclid-space-2);border-radius:var(--euclid-radius-full);font-size:var(--euclid-text-xs);font-weight:var(--euclid-font-medium);text-transform:uppercase;letter-spacing:0.5px}.badge.evm{background:var(--euclid-primary-100);color:var(--euclid-primary-700)}.badge.cosmwasm{background:var(--euclid-success-100);color:var(--euclid-success-700)}.chain-id{font-size:var(--euclid-text-xs);color:var(--euclid-text-tertiary);font-family:var(--euclid-font-mono)}.actions{display:flex;gap:var(--euclid-space-2);align-items:center}.addresses{flex:1;overflow-y:auto;padding:var(--euclid-space-4)}.empty{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;text-align:center;gap:var(--euclid-space-4)}.empty .icon{font-size:3rem;opacity:0.5}.empty h4{margin:0;font-size:var(--euclid-text-lg);color:var(--euclid-text-secondary)}.empty p{margin:0;color:var(--euclid-text-tertiary);max-width:300px}.empty .actions{display:flex;gap:var(--euclid-space-2)}.address-list{display:flex;flex-direction:column;gap:var(--euclid-space-3)}.wallet-list{display:grid;grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));gap:var(--euclid-space-4);padding:var(--euclid-space-4) 0}.wallet-item{display:flex;flex-direction:column;padding:var(--euclid-space-5);background:var(--euclid-surface);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-lg);cursor:pointer;transition:all 0.2s ease}.wallet-item:hover{border-color:var(--euclid-primary-200);box-shadow:0 4px 16px rgba(0, 0, 0, 0.06)}.wallet-item.active{background:var(--euclid-surface);border-color:var(--euclid-primary-300);box-shadow:0 2px 12px rgba(var(--euclid-primary-500-rgb), 0.12)}.wallet-card-header{display:flex;align-items:center;gap:var(--euclid-space-3);margin-bottom:var(--euclid-space-4)}.wallet-chain-logo{width:44px;height:44px;border-radius:var(--euclid-radius-md);object-fit:cover}.wallet-header-info{flex:1}.wallet-provider{display:flex;align-items:center;gap:var(--euclid-space-2);font-weight:var(--euclid-font-semibold);font-size:var(--euclid-text-base);color:var(--euclid-text-primary);margin-bottom:var(--euclid-space-1)}.wallet-connection-status{width:6px;height:6px;border-radius:50%;background:var(--euclid-success-500)}.wallet-chain-name{font-size:var(--euclid-text-sm);color:var(--euclid-text-secondary)}.wallet-card-body{flex:1;margin-bottom:var(--euclid-space-3)}.wallet-address{font-family:var(--euclid-font-mono);font-size:var(--euclid-text-sm);color:var(--euclid-text-secondary);background:var(--euclid-surface-secondary);padding:var(--euclid-space-2) var(--euclid-space-3);border-radius:var(--euclid-radius-md);word-break:break-all;line-height:1.4}.wallet-card-footer{display:flex;align-items:center;justify-content:space-between;gap:var(--euclid-space-2)}.wallet-chain-badge{font-size:var(--euclid-text-xs);color:var(--euclid-text-tertiary);text-transform:uppercase;font-weight:var(--euclid-font-medium);letter-spacing:0.5px}.wallet-status-badge{font-size:var(--euclid-text-xs);color:var(--euclid-text-tertiary)}.wallet-status-badge.connected{color:var(--euclid-success-600)}.wallet-status-badge.saved{color:var(--euclid-text-tertiary)}@media (max-width: 768px){.wallet-list{grid-template-columns:1fr;gap:var(--euclid-space-3)}.wallet-item{padding:var(--euclid-space-4)}}.address-item{display:flex;justify-content:space-between;align-items:center;padding:var(--euclid-space-4);background:var(--euclid-surface-secondary);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-lg);cursor:pointer;transition:all var(--euclid-transition-fast)}.address-item:hover{border-color:var(--euclid-primary-300);transform:translateY(-1px);box-shadow:0 4px 12px rgba(0, 0, 0, 0.1)}.address-item.active{background:var(--euclid-primary-50);border-color:var(--euclid-primary-300)}.address-info{flex:1}.label{display:flex;align-items:center;gap:var(--euclid-space-2);font-weight:var(--euclid-font-semibold);color:var(--euclid-text-primary);margin-bottom:var(--euclid-space-1)}.status{color:var(--euclid-success-500)}.address{font-family:var(--euclid-font-mono);font-weight:var(--euclid-font-medium);color:var(--euclid-text-secondary);background:var(--euclid-surface-tertiary);padding:var(--euclid-space-1) var(--euclid-space-2);border-radius:var(--euclid-radius-sm);display:inline-block;margin-bottom:var(--euclid-space-1)}.address-item .meta{display:flex;gap:var(--euclid-space-2);font-size:var(--euclid-text-xs);color:var(--euclid-text-tertiary)}.type{background:var(--euclid-surface-tertiary);padding:2px var(--euclid-space-1);border-radius:var(--euclid-radius-sm);text-transform:uppercase;font-weight:var(--euclid-font-medium);letter-spacing:0.5px}.last-used{font-style:italic}.balance{text-align:right;font-weight:var(--euclid-font-semibold);color:var(--euclid-text-primary)}.address-item .actions{display:flex;gap:var(--euclid-space-1);margin-left:var(--euclid-space-3);opacity:0;transition:opacity var(--euclid-transition-fast)}.address-item:hover .actions{opacity:1}.btn-edit,.btn-remove{background:var(--euclid-surface);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-sm);padding:var(--euclid-space-1);cursor:pointer;font-size:var(--euclid-text-sm);color:var(--euclid-text-tertiary);transition:all var(--euclid-transition-fast);width:28px;height:28px;display:flex;align-items:center;justify-content:center}.btn-edit:hover{background:var(--euclid-surface-secondary);color:var(--euclid-text-secondary);border-color:var(--euclid-primary-300)}.btn-remove:hover{background:var(--euclid-error-100);color:var(--euclid-error-700);border-color:var(--euclid-error-300)}@media (max-width: 768px){.content{flex-direction:column}.sidebar{width:100%;max-height:250px;border-right:none;border-bottom:1px solid var(--euclid-border);padding:var(--euclid-space-2)}.chain-item{padding:var(--euclid-space-3);margin-bottom:var(--euclid-space-1)}.chain-logo{width:40px;height:40px}.address-item{flex-direction:column;align-items:flex-start;gap:var(--euclid-space-3)}.address-item .actions{opacity:1;align-self:flex-end;margin-left:0}}";const I=class{constructor(i){e(this,i);this.addressSelected=t(this,"addressSelected");this.addressAdded=t(this,"addressAdded");this.addressUpdated=t(this,"addressUpdated");this.addressRemoved=t(this,"addressRemoved");this.savedAddresses=[];this.refreshTrigger=0;this.isEditing=false;this.editingAddress=null;this.newAddressForm={};this.selectedChainUID="";this.viewMode="wallets";this.handleAddAddress=()=>{this.isEditing=true;this.editingAddress=null;this.newAddressForm={address:"",chainUID:"",walletType:"manual",label:""}};this.handleEditAddress=e=>{this.isEditing=true;this.editingAddress=e;this.newAddressForm={...e}};this.handleSaveAddress=()=>{if(!this.newAddressForm.address||!this.newAddressForm.label){return}if(this.editingAddress){const e=this.savedAddresses.findIndex((e=>e.id===this.editingAddress.id));if(e!==-1){this.savedAddresses[e]={...this.editingAddress,...this.newAddressForm};this.addressUpdated.emit(this.savedAddresses[e])}}else{const e={id:`manual-${Date.now()}`,address:this.newAddressForm.address,chainUID:this.newAddressForm.chainUID||"ethereum",walletType:this.newAddressForm.walletType||"manual",label:this.newAddressForm.label,addedAt:new Date};this.savedAddresses=[...this.savedAddresses,e];this.addressAdded.emit(e)}this.saveAddresses();this.handleCancelEdit()};this.handleCancelEdit=()=>{this.isEditing=false;this.editingAddress=null;this.newAddressForm={}};this.handleRemoveAddress=e=>{this.savedAddresses=this.savedAddresses.filter((t=>t.id!==e.id));this.saveAddresses();this.addressRemoved.emit(e)};this.handleSelectAddress=e=>{e.lastUsed=new Date;this.saveAddresses();this.addressSelected.emit(e)};this.handleConnectWallet=()=>{r.openWalletModal()};this.handleConnectWalletForChain=e=>{r.openWalletModal(e)};this.handleChainSelect=e=>{this.selectedChainUID=e;this.viewMode="chain";this.isEditing=false;this.editingAddress=null;this.newAddressForm={}};this.handleWalletsSelect=()=>{this.viewMode="wallets";this.selectedChainUID="";this.isEditing=false;this.editingAddress=null;this.newAddressForm={}};this.handleSelectWallet=e=>{}}async componentWillLoad(){await this.loadSavedAddresses()}componentDidLoad(){this.ensureChainSelected();h.onChange("chains",(()=>{this.ensureChainSelected()}));D((()=>{this.refreshTrigger=Date.now()}))}ensureChainSelected(){if(!this.selectedChainUID&&this.viewMode!=="wallets"){this.viewMode="wallets"}}handleWalletConnectSuccess(){this.refreshTrigger=Date.now()}async loadSavedAddresses(){try{const e=await n.getAddressBook();this.savedAddresses=e.map((e=>({...e,addedAt:new Date(e.addedAt),lastUsed:e.lastUsed?new Date(e.lastUsed):undefined})))}catch(e){console.error("Failed to load saved addresses from IndexedDB:",e);try{const e=localStorage.getItem("euclid-address-book");if(e){this.savedAddresses=JSON.parse(e).map((e=>({...e,addedAt:new Date(e.addedAt),lastUsed:e.lastUsed?new Date(e.lastUsed):undefined})));await this.saveAddresses();localStorage.removeItem("euclid-address-book")}}catch(e){console.error("Failed to load addresses from localStorage:",e);this.savedAddresses=[]}}}async saveAddresses(){try{await n.setAddressBook(this.savedAddresses)}catch(e){console.error("Failed to save addresses to IndexedDB:",e);try{localStorage.setItem("euclid-address-book",JSON.stringify(this.savedAddresses));console.warn("📇 Fallback: Saved addresses to localStorage instead")}catch(e){console.error("Failed to save addresses to localStorage fallback:",e)}}}formatAddress(e){return`${e.slice(0,6)}...${e.slice(-4)}`}getDisplayedAddresses(){const e=this.savedAddresses;return e.sort(((e,t)=>{if(e.lastUsed&&t.lastUsed){return t.lastUsed.getTime()-e.lastUsed.getTime()}if(e.lastUsed&&!t.lastUsed)return-1;if(!e.lastUsed&&t.lastUsed)return 1;return t.addedAt.getTime()-e.addedAt.getTime()}))}getAllChains(){return h.state.chains.sort(((e,t)=>{if(e.type!==t.type){return e.type==="EVM"?-1:1}return e.display_name.localeCompare(t.display_name)}))}getWalletsForChain(e){const t=this.getConnectedWallets().filter((t=>t.chainUID===e));const i=this.getDisplayedAddresses().filter((t=>t.chainUID===e));const a=this.getAllChains().find((t=>t.chain_uid===e));const s=i.map((e=>this.convertAddressToWallet(e,a)));const o=[...t];s.forEach((e=>{const t=o.some((t=>t.address===e.address));if(!t){o.push(e)}}));return o}getConnectedWallets(){return k()}convertAddressToWallet(e,t){return{id:e.id,address:e.address,chainUID:e.chainUID,chainName:t?.display_name||"Unknown Chain",chainLogo:t?.logo||"",chainType:t?.type||"Unknown",walletType:e.walletType,provider:e.walletType,isConnected:false,label:e.label}}getSelectedChain(){return this.getAllChains().find((e=>e.chain_uid===this.selectedChainUID))}getSelectedChainAddresses(){return this.getWalletsForChain(this.selectedChainUID)}renderAddressForm(){return i("div",{class:"address-form"},i("div",{class:"form-header"},i("h3",null,this.editingAddress?"Edit Address":"Add Address"),i("button",{class:"close-btn",onClick:this.handleCancelEdit,type:"button"},"✕")),i("div",{class:"form-fields"},i("div",{class:"field"},i("label",null,"Label"),i("input",{type:"text",placeholder:"e.g., My Main Wallet",value:this.newAddressForm.label||"",onInput:e=>{this.newAddressForm={...this.newAddressForm,label:e.target.value}}})),i("div",{class:"field"},i("label",null,"Address"),i("input",{type:"text",placeholder:"0x... or cosmos...",value:this.newAddressForm.address||"",onInput:e=>{this.newAddressForm={...this.newAddressForm,address:e.target.value}}})),i("div",{class:"field"},i("label",null,"Chain"),i("select",{onInput:e=>{this.newAddressForm={...this.newAddressForm,chainUID:e.target.value}}},i("option",{value:""},"Select a chain..."),this.getAllChains().map((e=>i("option",{key:e.chain_uid,value:e.chain_uid,selected:this.newAddressForm.chainUID===e.chain_uid},e.display_name," (",e.type,")")))))),i("div",{class:"form-actions"},i("euclid-button",{variant:"secondary",onClick:this.handleCancelEdit},"Cancel"),i("euclid-button",{variant:"primary",onClick:this.handleSaveAddress,disabled:!this.newAddressForm.address||!this.newAddressForm.label},this.editingAddress?"Update":"Add"," Address")))}renderWalletsList(){const e=this.getConnectedWallets();return i("div",{class:"wallets-section"},i("div",{class:"chain-header"},i("div",{class:"chain-header-info"},i("div",{class:"wallets-icon"},"💼"),i("div",null,i("h3",null,"Connected Wallets"),i("div",{class:"meta"},i("span",{class:"badge"},"All Chains"),i("span",{class:"chain-id"},e.length," wallets")))),i("div",{class:"actions"},i("euclid-button",{variant:"primary",size:"sm",onClick:()=>r.openWalletModal()},"+ Connect Wallet"))),i("div",{class:"addresses"},e.length===0?i("div",{class:"empty"},i("div",{class:"icon"},"💼"),i("h4",null,"No connected wallets"),i("p",null,"Connect a wallet to start managing your addresses across all chains"),i("div",{class:"actions"},i("euclid-button",{variant:"primary",onClick:()=>r.openWalletModal()},"Connect Wallet"))):i("div",{class:"wallet-list"},e.map((e=>i("euclid-wallet",{key:e.id,wallet:e,clickable:true,showConnectionStatus:true,showChainInfo:true,onWalletClick:e=>this.handleSelectWallet(e.detail)}))))))}render(){const e=this.getAllChains();const t=this.getSelectedChain();const a=this.getSelectedChainAddresses();return i("div",{key:"a3d41eb620ef324bdf0d8e5f48c7032ff7f72e9b",class:"address-book"},i("div",{key:"b17d30101e3c527d000759be2cc8c93166b51b76",class:"header"},i("h2",{key:"eb4a71bc0ded025ac41518a4848b6dfdab7d1d3d"},"📖 Address Book"),i("euclid-button",{key:"d65ee374f6f50d5e2fccce9f1421d69d19eb1e22",variant:"ghost",size:"sm",onClick:()=>{this.refreshTrigger=Date.now()}},"🔄 Sync")),this.isEditing&&this.renderAddressForm(),i("div",{key:"eac19ae7aafd977f4cf22239796c19ef8fd480d1",class:"content"},i("div",{key:"667589462ea1ca6e2431ffda7ad1724260606b02",class:"sidebar"},i("div",{key:"a5739ea66f17a69edfff9e1875eacf6b0c622eff",class:`wallets-item ${this.viewMode==="wallets"?"selected":""}`,onClick:this.handleWalletsSelect},i("div",{key:"13ed354a9919c8c2eceaa0f9612f6af835279c11",class:"wallets-icon"},"💼"),i("div",{key:"cc18184b47479586c837bb5269aa0a250a53f9e0",class:"chain-info"},i("div",{key:"87c74d86d745e85bf46258134e776e52c37d8e95",class:"chain-name"},"Wallets"),i("div",{key:"40a3275cb541855136e89d81dbd67334f4e05be2",class:"chain-type"},"All Chains")),i("div",{key:"b95e31dfe75048bceea24385c9f97124bb9179e5",class:"chain-badges"},i("span",{key:"d3f59732383cded91c3c9d0431001ce27b1998b8",class:"count"},this.getConnectedWallets().length))),e.map((e=>{const t=this.getWalletsForChain(e.chain_uid);const a=this.selectedChainUID===e.chain_uid&&this.viewMode==="chain";const s=t.length>0;return i("div",{key:e.chain_uid,class:`chain-item ${a?"selected":""}`,onClick:()=>this.handleChainSelect(e.chain_uid)},i("img",{src:e.logo,alt:e.display_name,class:"chain-logo"}),i("div",{class:"chain-info"},i("div",{class:"chain-name"},e.display_name),i("div",{class:"chain-type"},e.type)),s&&i("div",{class:"chain-badges"},i("span",{class:"count"},t.length)))}))),i("div",{key:"4a17a67b8396fe99676e6bec1c644924781b0fe7",class:"main"},this.viewMode==="wallets"?this.renderWalletsList():t?i("div",{class:"chain-section"},i("div",{class:"chain-header"},i("div",{class:"chain-header-info"},i("img",{src:t.logo,alt:t.display_name,class:"logo"}),i("div",null,i("h3",null,t.display_name),i("div",{class:"meta"},i("span",{class:`badge ${t.type.toLowerCase()}`},t.type),i("span",{class:"chain-id"},t.chain_id)))),i("div",{class:"actions"},i("euclid-button",{variant:"secondary",size:"sm",onClick:()=>this.handleConnectWalletForChain(this.selectedChainUID)},"🔗 Connect"),i("euclid-button",{variant:"primary",size:"sm",onClick:()=>{this.handleAddAddress();this.newAddressForm={...this.newAddressForm,chainUID:this.selectedChainUID}}},"+ Add"))),i("div",{class:"addresses"},a.length===0?i("div",{class:"empty"},i("div",{class:"icon"},"📭"),i("h4",null,"No addresses for ",t.display_name),i("p",null,"Connect a wallet or add an address manually"),i("div",{class:"actions"},i("euclid-button",{variant:"primary",onClick:()=>this.handleConnectWalletForChain(this.selectedChainUID)},"Connect Wallet"),i("euclid-button",{variant:"ghost",onClick:()=>{this.handleAddAddress();this.newAddressForm={...this.newAddressForm,chainUID:this.selectedChainUID}}},"Add Manually"))):i("div",{class:"address-list"},a.map((e=>i("euclid-wallet",{key:e.id,wallet:e,clickable:true,showConnectionStatus:true,showChainInfo:false,onWalletClick:e=>this.handleSelectWallet(e.detail)})))))):i("div",{class:"empty"},i("div",{class:"icon"},"⛓️"),i("h3",null,"Select a chain"),i("p",null,"Choose a blockchain network from the sidebar to view and manage addresses")))))}};I.style=z;class C{async getChains(e){const{getChainsImpl:t}=await import("./p-BIUdfm4p.js");return t(e)}async getContracts(e){const{getContractsImpl:t}=await import("./p-BIUdfm4p.js");return t(e)}async getChainConfig(e){const{getChainConfigImpl:t}=await import("./p-BIUdfm4p.js");return t(e)}async getEvmChainConfig(e){const{getEvmChainConfigImpl:t}=await import("./p-BIUdfm4p.js");return t(e)}async getKeplrConfig(e){const{getKeplrConfigImpl:t}=await import("./p-BIUdfm4p.js");return t(e)}async getRouterConfig(){const{getRouterConfigImpl:e}=await import("./p-BIUdfm4p.js");return e()}async getAllEvmChains(){const{getAllEvmChainsImpl:e}=await import("./p-BIUdfm4p.js");return e()}async getAllFactoryPools(e,t,i){const{getAllPoolsImpl:a}=await import("./p-BI_jTsQf.js");return a(e,t,i)}async getAllFactoryTokens(e,t,i){const{getAllTokensImpl:a}=await import("./p-BI_jTsQf.js");return a(e,t,i)}async getAllowedDenoms(e){const{getAllowedDenomsImpl:t}=await import("./p-BI_jTsQf.js");return t(e)}async getEscrow(e,t){const{getEscrowImpl:i}=await import("./p-BI_jTsQf.js");return i(e,t)}async getTokenAddress(e,t){const{getTokenAddressImpl:i}=await import("./p-BI_jTsQf.js");return i(e,t)}async getPartnerFeesCollected(e,t){const{getPartnerFeesCollectedImpl:i}=await import("./p-BI_jTsQf.js");return i(e,t)}async getFactoryState(e){const{getStateImpl:t}=await import("./p-BI_jTsQf.js");return t(e)}async getFactoryVLP(e,t){const{getVLPImpl:i}=await import("./p-BI_jTsQf.js");return i(e,t)}async getAllRouterChains(){const{getAllChainsImpl:e}=await import("./p-COrKldGS.js");return e()}async getAllEscrows(e,t){const{getAllEscrowsImpl:i}=await import("./p-COrKldGS.js");return i(e,t)}async getAllRouterTokens(e,t){const{getAllTokensImpl:i}=await import("./p-COrKldGS.js");return i(e,t)}async getAllVLPs(e,t){const{getAllVLPsImpl:i}=await import("./p-COrKldGS.js");return i(e,t)}async getRouterChain(e){const{getChainImpl:t}=await import("./p-COrKldGS.js");return t(e)}async getEscrows(e,t,i){const{getEscrowsImpl:a}=await import("./p-COrKldGS.js");return a(e,t,i)}async simulateEscrowRelease(e,t){const{simulateEscrowReleaseImpl:i}=await import("./p-COrKldGS.js");return i(e,t)}async simulateRouterSwap(e,t,i,a,s){const{simulateSwapImpl:o}=await import("./p-COrKldGS.js");return o(e,t,i,a,s)}async getRouterState(){const{getStateImpl:e}=await import("./p-COrKldGS.js");return e()}async getTokenDenoms(e){const{getTokenDenomsImpl:t}=await import("./p-COrKldGS.js");return t(e)}async getTokenPairFromVLP(e){const{getTokenPairFromVLPImpl:t}=await import("./p-COrKldGS.js");return t(e)}async getRouterVLP(e){const{getVLPImpl:t}=await import("./p-COrKldGS.js");return t(e)}async getAllVLPPools(e,t,i,a){const{getAllPoolsImpl:s}=await import("./p-BW4or_ss.js");return s(e,t,i,a)}async getAllVLPPositions(e,t,i,a){const{getAllPositionsImpl:s}=await import("./p-BW4or_ss.js");return s(e,t,i,a)}async getVLPAssetList(e,t){const{getAssetListImpl:i}=await import("./p-BW4or_ss.js");return i(e,t)}async getMyVLPPositions(e,t,i,a,s){const{getMyPositionsImpl:o}=await import("./p-BW4or_ss.js");return o(e,t,i,a,s)}async getVLPPool(e,t,i){const{getPoolImpl:a}=await import("./p-BW4or_ss.js");return a(e,t,i)}async getVLPPosition(e,t,i){const{getPositionImpl:a}=await import("./p-BW4or_ss.js");return a(e,t,i)}async getVLPTotalFeesCollected(e,t,i){const{getTotalFeesCollectedImpl:a}=await import("./p-BW4or_ss.js");return a(e,t,i)}async getAllVCoinBalances(e,t,i,a){const{getAllBalancesImpl:s}=await import("./p-DKTrW-XD.js");return s(e,t,i,a)}async getVCoinTotalSupply(e,t){const{getTotalSupplyImpl:i}=await import("./p-DKTrW-XD.js");return i(e,t)}async getVCoinUserBalance(e,t,i){const{getUserBalanceImpl:a}=await import("./p-DKTrW-XD.js");return a(e,t,i)}async getPoolInfo(e,t,i){const{getPoolImpl:a}=await import("./p-76n2fJbz.js");return a(e,t,i)}async getPoolFees(e,t,i){const{getPoolFeesImpl:a}=await import("./p-76n2fJbz.js");return a(e,t,i)}async simulateJoinPool(e,t,i){const{getSimulateJoinPoolImpl:a}=await import("./p-76n2fJbz.js");return a(e,t,i)}async simulateExitPool(e,t,i,a){const{getSimulateExitPoolImpl:s}=await import("./p-76n2fJbz.js");return s(e,t,i,a)}async getTokenMetadata(e){const{getTokenMetadataImpl:t}=await import("./p-DSbD_X6d.js");return t(e)}async getTokenById(e){const{getTokenByIdImpl:t}=await import("./p-DSbD_X6d.js");return t(e)}async searchTokens(e,t){const{searchTokensImpl:i}=await import("./p-DSbD_X6d.js");return i(e,t)}async getTokenBySymbol(e,t){const{getTokenBySymbolImpl:i}=await import("./p-DSbD_X6d.js");return i(e,t)}async getTokenPrice(e){const{getTokenPriceImpl:t}=await import("./p-DSbD_X6d.js");return t(e)}async getTokenHistory(e,t,i){const{getTokenHistoryImpl:a}=await import("./p-DSbD_X6d.js");return a(e,t,i)}async getTokenSupply(e){const{getTokenSupplyImpl:t}=await import("./p-DSbD_X6d.js");return t(e)}async getTokenTransfers(e,t,i){const{getTokenTransfersImpl:a}=await import("./p-DSbD_X6d.js");return a(e,t,i)}async getTokenHolders(e,t,i){const{getTokenHoldersImpl:a}=await import("./p-DSbD_X6d.js");return a(e,t,i)}async getTopTokens(e,t,i){const{getTopTokensImpl:a}=await import("./p-DSbD_X6d.js");return a(e,t,i)}async getContractInfo(e,t){const{getContractInfoImpl:i}=await import("./p-Dz8aNEA-.js");return i(e,t)}async getContractState(e,t,i){const{getContractStateImpl:a}=await import("./p-Dz8aNEA-.js");return a(e,t,i)}async getRoutes(e,t,i,a,s){const{getRoutesImpl:o}=await import("./p-B0XCj4bo.js");return o(e,t,i,a,s)}async postTransaction(e){const{postTransactionImpl:t}=await import("./p-B0XCj4bo.js");return t(e)}async getTransactionStatus(e){const{getTransactionStatusImpl:t}=await import("./p-B0XCj4bo.js");return t(e)}async getTransactionDetails(e){const{getTransactionDetailsImpl:t}=await import("./p-B0XCj4bo.js");return t(e)}async getGasEstimate(e){const{getGasEstimateImpl:t}=await import("./p-B0XCj4bo.js");return t(e)}async getChainGasPrice(e){const{getChainGasPriceImpl:t}=await import("./p-B0XCj4bo.js");return t(e)}async getBalances(e,t){const{getBalancesImpl:i}=await import("./p-B0XCj4bo.js");return i(e,t)}async getNonce(e,t){const{getNonceImpl:i}=await import("./p-B0XCj4bo.js");return i(e,t)}async getAllPools(e=true){const{getAllPoolsImpl:t}=await import("./p-DnCZD1Nj.js");return t(e)}async getPoolById(e){const{getPoolByIdImpl:t}=await import("./p-DnCZD1Nj.js");return t(e)}async getOptimalRoute(e){const{getOptimalRouteImpl:t}=await import("./p-DyDlh5fQ.js");return t(e)}async getBestRoute(e){const{getBestRouteImpl:t}=await import("./p-DyDlh5fQ.js");return t(e)}async buildSwapTransaction(e){const{buildSwapTransactionImpl:t}=await import("./p-DrDKirgn.js");return t(e)}async buildAddLiquidityTransaction(e){const{buildAddLiquidityTransactionImpl:t}=await import("./p-DrDKirgn.js");return t(e)}async buildRemoveLiquidityTransaction(e){const{buildRemoveLiquidityTransactionImpl:t}=await import("./p-DrDKirgn.js");return t(e)}async simulateSwap(e){const{simulateSwapImpl:t}=await import("./p-DrDKirgn.js");return t(e)}async getUserBalances(e){const{getUserBalancesImpl:t}=await import("./p-DDUxMSn-.js");return t(e)}async getLoadingStats(){const e=Object.keys(require.cache||{}).filter((e=>e.includes("/lazy/"))).map((e=>e.split("/").pop()?.replace(".js","")));return{loadedModules:e,totalModules:["chains","factory","router","vlp","vcoin","pool","tokens","cw","rest-transactions","pools","routing","transactions","user"].length,totalEndpoints:73,implementedEndpoints:73,completionPercentage:100,lazyLoadingActive:true,bundleOptimized:true}}}const T=new C;const N=":host{display:flex;flex-direction:column;width:100%;height:100%;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;box-sizing:border-box}.api-tester{display:flex;flex-direction:column;height:100%;max-height:100%;min-height:600px;background:#ffffff;border:1px solid #e1e5e9;border-radius:8px;overflow:hidden;box-sizing:border-box}.header{flex-shrink:0;padding:20px 24px;background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);color:white;border-bottom:1px solid #e1e5e9}.header h1{margin:0 0 8px 0;font-size:24px;font-weight:700}.header p{margin:0;font-size:14px;opacity:0.9}.controls{flex-shrink:0;display:flex;gap:20px;padding:16px 24px;background:#f8f9fa;border-bottom:1px solid #e1e5e9}.filter-section,.params-section{flex:1}.controls label{display:block;margin-bottom:6px;font-size:13px;font-weight:600;color:#495057}.controls select{width:100%;padding:8px 12px;border:1px solid #ced4da;border-radius:4px;background:white;font-size:14px;color:#495057}.controls select:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 2px rgba(102, 126, 234, 0.2)}.controls textarea{width:100%;height:60px;padding:8px 12px;border:1px solid #ced4da;border-radius:4px;background:white;font-family:'Monaco', 'Menlo', 'Ubuntu Mono', monospace;font-size:12px;color:#495057;resize:none}.controls textarea:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 2px rgba(102, 126, 234, 0.2)}.content{flex:1;display:flex;min-height:0}.endpoints-list{width:400px;flex-shrink:0;display:flex;flex-direction:column;background:white;border-right:1px solid #e1e5e9}.endpoints-list h3{margin:0;padding:16px 20px;font-size:16px;font-weight:600;color:#495057;background:#f8f9fa;border-bottom:1px solid #e1e5e9;flex-shrink:0}.endpoints-container{flex:1;overflow-y:auto;padding:12px;max-height:calc(100vh - 300px);}.endpoint-item{padding:12px 16px;margin-bottom:8px;border:1px solid #e1e5e9;border-radius:6px;background:white;cursor:pointer;transition:all 0.15s ease}.endpoint-item:hover{background:#f8f9fa;border-color:#667eea;transform:translateY(-1px);box-shadow:0 2px 8px rgba(0, 0, 0, 0.1)}.endpoint-item.selected{background:#e7f1ff;border-color:#667eea;box-shadow:0 0 0 2px rgba(102, 126, 234, 0.2)}.endpoint-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px}.endpoint-name{font-weight:600;color:#212529;font-size:14px}.endpoint-type{font-size:9px;font-weight:700;padding:3px 6px;background:#667eea;color:white;border-radius:3px;text-transform:uppercase;letter-spacing:0.5px}.endpoint-meta{display:flex;align-items:center;gap:8px;flex-wrap:wrap}.category{font-size:11px;font-weight:500;padding:2px 6px;background:#e9ecef;color:#6c757d;border-radius:3px}.params{font-size:10px;color:#868e96;font-family:'Monaco', 'Menlo', 'Ubuntu Mono', monospace}.results-panel{flex:1;display:flex;flex-direction:column;background:white;min-width:0}.selected-endpoint{flex-shrink:0;padding:20px 24px;background:#f8f9fa;border-bottom:1px solid #e1e5e9}.selected-endpoint h3{margin:0 0 12px 0;font-size:18px;font-weight:700;color:#212529}.endpoint-details{display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:12px}.endpoint-details p{margin:0;font-size:14px;color:#6c757d}.endpoint-details strong{color:#495057}.loading{flex:1;display:flex;align-items:center;justify-content:center;font-size:16px;color:#667eea;animation:pulse 1.5s ease-in-out infinite}@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.5}}.result{flex:1;padding:24px;overflow-y:auto;min-height:0;max-height:calc(100vh - 300px);}.result h4{margin:0 0 16px 0;font-size:16px;font-weight:600;color:#212529}.result-meta{display:flex;gap:12px;margin-bottom:16px;font-size:12px}.result-meta span{padding:4px 8px;background:#e9ecef;color:#495057;border-radius:4px;font-weight:500}.result-data{background:#1e1e1e;color:#d4d4d4;padding:16px;border-radius:6px;font-family:'Monaco', 'Menlo', 'Ubuntu Mono', monospace;font-size:12px;line-height:1.5;white-space:pre-wrap;word-break:break-word}.empty-state{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;color:#6c757d;padding:40px}.empty-state h3{margin:0 0 8px 0;font-size:18px;color:#495057}.empty-state p{margin:0;font-size:14px;max-width:300px}.endpoints-container::-webkit-scrollbar,.result::-webkit-scrollbar{width:6px}.endpoints-container::-webkit-scrollbar-track,.result::-webkit-scrollbar-track{background:#f1f3f4}.endpoints-container::-webkit-scrollbar-thumb,.result::-webkit-scrollbar-thumb{background:#c1c8cd;border-radius:3px}.endpoints-container::-webkit-scrollbar-thumb:hover,.result::-webkit-scrollbar-thumb:hover{background:#a8b1b8}@media (max-width: 768px){.content{flex-direction:column}.endpoints-list{width:100%;height:40vh}.results-panel{height:60vh}.controls{flex-direction:column;gap:12px}}.bundle-stats{flex-shrink:0;padding:16px 24px;background:#f0f9ff;border-bottom:1px solid #e1e5e9}.bundle-stats h3{margin:0 0 12px 0;font-size:16px;color:#1e40af}.stats-grid{display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:16px}.stat-item{display:flex;justify-content:space-between;align-items:center;padding:8px 12px;background:white;border:1px solid #dbeafe;border-radius:6px}.stat-label{font-weight:500;color:#374151;font-size:14px}.stat-value{font-weight:600;color:#1e40af;font-size:14px}.lazy-info{color:#059669;font-weight:500;font-size:12px}.endpoint-type.lazy{background:#059669}.endpoint-type.core{background:#7c3aed}.bundle-impact{display:flex;flex-direction:column;gap:4px;margin-top:8px;padding:8px;background:#f0f9ff;border-radius:4px;border:1px solid #dbeafe}.impact-label{font-weight:500;color:#1e40af;font-size:12px}.impact-status{font-weight:600;font-size:12px}.impact-status.loaded{color:#059669}.impact-status.cached{color:#7c3aed}.impact-details{color:#6b7280;font-size:11px;font-family:monospace}";const j=class{constructor(t){e(this,t);this.endpoints=[];this.selectedEndpoint=null;this.isLoading=false;this.result=null;this.error=null;this.customParams="{}";this.selectedCategory="all";this.bundleStats={coreSize:0,lazyModulesLoaded:[]}}componentWillLoad(){this.discoverEndpoints();this.measureBundleSize()}measureBundleSize(){const e=document.querySelectorAll("script");let t=0;e.forEach((e=>{if(e.src&&e.src.includes("euclid")){t+=50}}));this.bundleStats.coreSize=t}discoverEndpoints(){const e=[];const t=Object.getPrototypeOf(T);const i=Object.getOwnPropertyNames(t).filter((e=>e!=="constructor"&&typeof t[e]==="function"));i.forEach((i=>{const a=this.categorizeMethod(i);const s=this.isLazyLoadedMethod(i);e.push({name:this.formatMethodName(i),type:s?"lazy":"core",category:a,method:T[i].bind(T),params:this.extractMethodParams(t[i]),isLazyLoaded:s,moduleSize:s?"~2-5KB":"~0.1KB"})}));this.endpoints=e.sort(((e,t)=>e.name.localeCompare(t.name)))}isLazyLoadedMethod(e){const t=["getChains","getChainConfig","getEvmChainConfig","getKeplrConfig","getRouterConfig","getAllEvmChains","getAllTokens","getAllowedDenoms","getEscrow","getTokenAddress","getPartnerFeesCollected","getState","getVLP","getAllPools","getTokenMetadata","getTokenById","getTokenDenoms","getTokenTransfers","getAllChainsRouter","getRoute","getSimulateSwap","getEstimateSwap","getSwapTransaction","getAllPoolsVLP","getUserPositions","getRewards","getClaimableRewards","getBalance","getUserPositions","getStakedAmount","getAllPoolsPool","getPoolById","getPoolStatistics","getPoolHistory","getContractInfo","getContractState","buildSwapTransaction","buildAddLiquidityTransaction","buildRemoveLiquidityTransaction","simulateSwap","getBalances","getTransactionHistory"];return t.includes(e)}categorizeMethod(e){if(e.includes("Chain")||e.includes("chain"))return"Chain";if(e.includes("Token")||e.includes("token"))return"Token";if(e.includes("Pool")||e.includes("pool"))return"Pool";if(e.includes("Route")||e.includes("route"))return"Routing";if(e.includes("Transaction")||e.includes("transaction")||e.includes("Tx"))return"Transaction";if(e.includes("User")||e.includes("user")||e.includes("Balance"))return"User";if(e.includes("Swap")||e.includes("swap"))return"Swap";if(e.includes("Liquidity")||e.includes("liquidity"))return"Liquidity";return"Other"}formatMethodName(e){return e.replace(/([A-Z])/g," $1").replace(/^./,(e=>e.toUpperCase())).trim()}extractMethodParams(e){const t=e.toString();const i=t.match(/\(([^)]*)\)/);if(!i)return[];return i[1].split(",").map((e=>e.trim())).filter((e=>e&&!e.startsWith("..."))).map((e=>e.split(/[=:]/)[0].trim())).filter((e=>e))}get categories(){const e=new Set(["all"]);this.endpoints.forEach((t=>e.add(t.category)));return Array.from(e).sort()}getCategoryCount(e){if(e==="all")return this.endpoints.length;return this.endpoints.filter((t=>t.category===e)).length}get filteredEndpoints(){if(this.selectedCategory==="all")return this.endpoints;return this.endpoints.filter((e=>e.category===this.selectedCategory))}async testEndpoint(e){if(!e)return;this.isLoading=true;this.error=null;this.result=null;this.selectedEndpoint=e;const t=Date.now();let i=null;try{if(e.isLazyLoaded){const a=this.getModuleNameFromEndpoint(e.name);const s=this.bundleStats.lazyModulesLoaded.includes(a);let o={};try{o=JSON.parse(this.customParams)}catch{}let r;const n=performance.now();if(e.params&&e.params.length>0){const t=e.params.map((e=>o[e]||this.getDefaultParamValue(e)));r=await e.method(...t)}else{r=await e.method()}const l=performance.now();const c=l-n;const d=!s&&c>50;if(d&&!this.bundleStats.lazyModulesLoaded.includes(a)){this.bundleStats.lazyModulesLoaded=[...this.bundleStats.lazyModulesLoaded,a];i={moduleLoaded:true,moduleName:a,estimatedSize:e.moduleSize||"~2-5KB"}}else{i={moduleLoaded:false,moduleName:a,estimatedSize:s?"Already loaded":"From cache"}}const u=Date.now()-t;this.result={data:r,duration:u,timestamp:(new Date).toISOString(),bundleImpact:i}}else{let i={};try{i=JSON.parse(this.customParams)}catch{}let a;if(e.params&&e.params.length>0){const t=e.params.map((e=>i[e]||this.getDefaultParamValue(e)));a=await e.method(...t)}else{a=await e.method()}const s=Date.now()-t;this.result={data:a,duration:s,timestamp:(new Date).toISOString(),bundleImpact:null}}}catch(e){const i=Date.now()-t;this.error=e instanceof Error?e.message:String(e);this.result={error:this.error,duration:i,timestamp:(new Date).toISOString(),bundleImpact:null}}finally{this.isLoading=false}}getModuleNameFromEndpoint(e){const t=e.toLowerCase();if(t.includes("chain"))return"chains";if(t.includes("token"))return"tokens";if(t.includes("pool"))return"pools";if(t.includes("factory"))return"factory";if(t.includes("router"))return"router";if(t.includes("vlp"))return"vlp";if(t.includes("vcoin"))return"vcoin";if(t.includes("transaction")||t.includes("swap")||t.includes("liquidity"))return"transactions";return"core"}getDefaultParamValue(e){if(e.includes("limit"))return 10;if(e.includes("offset"))return 0;if(e.includes("chainUid")||e.includes("chain_uid"))return"osmosis";if(e.includes("tokenId")||e.includes("token_id"))return"euclid";if(e.includes("token_in"))return"euclid";if(e.includes("token_out"))return"osmo";if(e.includes("amount"))return"1000000";if(e.includes("address"))return"osmo1example";if(e.includes("txHash")||e.includes("tx_hash"))return"0x123";if(e.includes("poolId")||e.includes("pool_id"))return"pool123";if(e.includes("verified"))return true;if(e.includes("timeframe")||e.includes("period"))return"24h";return undefined}render(){return i("div",{key:"58a9d959584e973ea7caceec5b315f13cf4709da",class:"api-tester"},i("header",{key:"59619397bdce22d18ac3caa54ef150fd93934373",class:"header"},i("h1",{key:"e15aca33d1e2f8360a09e79cf9b03969444e99b1"},"🧪 Euclid API Tester"),i("p",{key:"a0b9d51a8e5893ff6f55aca521cef54a60e6a455"},"Auto-discovered ",this.endpoints.length," endpoints from new lazy-loaded core API")),i("div",{key:"876086d701ad63a723fa53dc33644c6d8f0a1693",class:"bundle-stats"},i("h3",{key:"2faa53d8df3e2e0a96c4e703393d009d6f442a5b"},"📦 Bundle Performance"),i("div",{key:"3ff392d49d8aa58be93eab8b5825afd8767534ed",class:"stats-grid"},i("div",{key:"b22c3fbb25208fc9af83185c687c3419b3de6fdc",class:"stat-item"},i("span",{key:"4d89b68d7b20bc6af889d0782db3975ed8dfca55",class:"stat-label"},"Core Size:"),i("span",{key:"f1e7f0fa896e797c519d61c2557327a4407b2df9",class:"stat-value"},this.bundleStats.coreSize,"KB")),i("div",{key:"ce76059b93fa6643445b3601d337710ed878baf0",class:"stat-item"},i("span",{key:"599723662870482be12be0076719cc5405853fad",class:"stat-label"},"Lazy Modules Loaded:"),i("span",{key:"ea066237b9bf1b1b75d9a17706d98135170024c9",class:"stat-value"},this.bundleStats.lazyModulesLoaded.length)),i("div",{key:"7659fbea4db78343997197dda87d2897cebd798c",class:"stat-item"},i("span",{key:"5d805753e335494eb27652bbc1d12351ed98a0d2",class:"stat-label"},"Modules:"),i("span",{key:"d14deac4e5ee998b6434eeac90378864750593c7",class:"stat-value"},this.bundleStats.lazyModulesLoaded.join(", ")||"None yet")))),i("div",{key:"dcace17cf53ffaace730c7543c1c6537b20fdd74",class:"controls"},i("div",{key:"ed5e97249f9ba39e48755a6616fa52626a4a6bf6",class:"filter-section"},i("label",{key:"c4e004949a3d6fdc4211b51041f15f56c865d82a"},"Category:"),i("select",{key:"f91d2f048605f854fd98f740bf39e44e647adf4f",onInput:e=>this.selectedCategory=e.target.value},this.categories.map((e=>i("option",{value:e,selected:this.selectedCategory===e},e," (",this.getCategoryCount(e),")"))))),i("div",{key:"c875c0a8a764845b3ae85d46018065ac393978d1",class:"params-section"},i("label",{key:"832d3c0dcbb7aca7740f2baeb290bdb50b834595"},"Custom Parameters (JSON):"),i("textarea",{key:"7add277cf447a94ac9fbe3c7c3eab83fa8569452",value:this.customParams,onInput:e=>this.customParams=e.target.value,placeholder:'{"tokenId": "euclid", "limit": 10}',rows:3}))),i("div",{key:"6316f3101bb2f6f79969f475bfad93ee473a200f",class:"content"},i("div",{key:"8f8819ab3dfb9439c202c67f7ee8b059f78c6f3a",class:"endpoints-list"},i("h3",{key:"be35d767aa1301510eb00b4480d5e67edd9d6e14"},"Available Endpoints (",this.filteredEndpoints.length,")"),i("div",{key:"e67fd86493f50c6f628a5212b54590e5834d6cd7",class:"endpoints-container"},this.filteredEndpoints.map((e=>i("div",{class:`endpoint-item ${this.selectedEndpoint===e?"selected":""}`,onClick:()=>this.testEndpoint(e)},i("div",{class:"endpoint-header"},i("span",{class:"endpoint-name"},e.name),i("span",{class:`endpoint-type ${e.type}`},e.isLazyLoaded?"🚀 LAZY":"⚡ CORE")),i("div",{class:"endpoint-meta"},i("span",{class:"category"},e.category),e.isLazyLoaded&&i("span",{class:"lazy-info"},"Size: ",e.moduleSize),e.params&&e.params.length>0&&i("span",{class:"params"},"Params: ",e.params.join(", ")))))))),i("div",{key:"9ff69d7d5d2bac7294f40092fe457e35a33c3aa9",class:"results-panel"},this.selectedEndpoint?i("div",{class:"selected-endpoint"},i("h3",null,"Testing: ",this.selectedEndpoint.name),i("div",{class:"endpoint-details"},i("p",null,i("strong",null,"Type:")," ",this.selectedEndpoint.type),i("p",null,i("strong",null,"Category:")," ",this.selectedEndpoint.category),this.selectedEndpoint.params&&this.selectedEndpoint.params.length>0&&i("p",null,i("strong",null,"Parameters:")," ",this.selectedEndpoint.params.join(", ")))):null,this.isLoading&&i("div",{key:"db56a2f42eab296aea7cfa4aa2f689c7278cebc7",class:"loading"},"🔄 Testing endpoint..."),!this.selectedEndpoint&&!this.isLoading&&i("div",{key:"7cc3e613dab5b7af32ad6b5b1dcb380fb307fba7",class:"empty-state"},i("h3",{key:"d50032708e6fb5bd11ee9f447f945c06db54057c"},"Select an Endpoint"),i("p",{key:"7b359f65019223010310a307be0da3d07fbf9ece"},"Choose an endpoint from the list to test it and see the results")),this.result&&i("div",{key:"ba7320f6789b1f8e64cb94aab8010f1bc321b87b",class:"result"},i("h4",{key:"c6e96eb68c4859eb937aba0e4660c2e8868d3b81"},"Result"),i("div",{key:"58237c334f54711f4a7eb70075502f679618f8ea",class:"result-meta"},i("span",{key:"595ffe95bc789010e108e63f319bc6cdeb766ab2"},"Duration: ",this.result.duration,"ms"),i("span",{key:"9c0373438e1ab4e6cec515cdb1e42d0b6d4b1fb4"},"Time: ",new Date(this.result.timestamp).toLocaleTimeString()),this.result.bundleImpact&&i("div",{key:"612db8c20d93e6877a8ba1796d175bb30d0bfefd",class:"bundle-impact"},i("span",{key:"629da27263a28878ca6c5fa625360446012873d6",class:"impact-label"},"Bundle Impact:"),i("span",{key:"a382b4272115a1cc5512b88a11679ec35c0f135e",class:`impact-status ${this.result.bundleImpact.moduleLoaded?"loaded":"cached"}`},this.result.bundleImpact.moduleLoaded?"📦 New Module Loaded":"⚡ From Cache"),i("span",{key:"780ecfec637e2c4b500a7cf7becc304284759252",class:"impact-details"},this.result.bundleImpact.moduleName," (",this.result.bundleImpact.estimatedSize,")"))),i("pre",{key:"ea02986595c3a1316ed1441a99e4d6b5212c18ee",class:"result-data"},JSON.stringify(this.result.data||this.result.error,null,2))))))}};j.style=N;const L=":host{display:inline-block}.euclid-button{display:inline-flex;align-items:center;justify-content:center;gap:var(--euclid-space-2);font-family:var(--euclid-font-sans);font-weight:var(--euclid-button-font-weight);text-decoration:none;cursor:pointer;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;transition:var(--euclid-button-transition);border:var(--euclid-border-1) solid transparent;border-radius:var(--euclid-button-border-radius);position:relative;overflow:hidden;outline:none;vertical-align:middle}.euclid-button:focus-visible{outline:2px solid var(--euclid-interactive-primary);outline-offset:2px}.euclid-button--sm{padding:var(--euclid-space-2) var(--euclid-space-3);font-size:var(--euclid-text-sm);min-height:var(--euclid-space-8);line-height:var(--euclid-leading-tight)}.euclid-button--md{padding:var(--euclid-space-3) var(--euclid-space-4);font-size:var(--euclid-text-base);min-height:var(--euclid-space-10);line-height:var(--euclid-leading-normal)}.euclid-button--lg{padding:var(--euclid-space-4) var(--euclid-space-6);font-size:var(--euclid-text-lg);min-height:var(--euclid-space-12);line-height:var(--euclid-leading-normal)}.euclid-button--primary{background-color:var(--euclid-interactive-primary);color:var(--euclid-text-inverse);box-shadow:var(--euclid-button-shadow)}.euclid-button--primary:hover:not(.euclid-button--disabled):not(.euclid-button--loading){background-color:var(--euclid-interactive-primary-hover);box-shadow:var(--euclid-button-shadow-hover);transform:translateY(-1px)}.euclid-button--primary:active:not(.euclid-button--disabled):not(.euclid-button--loading){background-color:var(--euclid-interactive-primary-active);transform:translateY(0);box-shadow:var(--euclid-button-shadow)}.euclid-button--secondary{background-color:var(--euclid-surface);color:var(--euclid-text-primary);border-color:var(--euclid-border);box-shadow:var(--euclid-button-shadow)}.euclid-button--secondary:hover:not(.euclid-button--disabled):not(.euclid-button--loading){background-color:var(--euclid-surface-secondary);border-color:var(--euclid-border-hover);box-shadow:var(--euclid-button-shadow-hover);transform:translateY(-1px)}.euclid-button--secondary:active:not(.euclid-button--disabled):not(.euclid-button--loading){background-color:var(--euclid-background-secondary);transform:translateY(0)}.euclid-button--danger{background-color:var(--euclid-danger-600);color:var(--euclid-text-inverse);box-shadow:var(--euclid-button-shadow)}.euclid-button--danger:hover:not(.euclid-button--disabled):not(.euclid-button--loading){background-color:var(--euclid-danger-700);box-shadow:var(--euclid-button-shadow-hover);transform:translateY(-1px)}.euclid-button--danger:active:not(.euclid-button--disabled):not(.euclid-button--loading){background-color:var(--euclid-danger-700);transform:translateY(0);box-shadow:var(--euclid-button-shadow)}.euclid-button--ghost{background-color:transparent;color:var(--euclid-text-secondary);border-color:transparent}.euclid-button--ghost:hover:not(.euclid-button--disabled):not(.euclid-button--loading){background-color:var(--euclid-surface-secondary);color:var(--euclid-text-primary)}.euclid-button--ghost:active:not(.euclid-button--disabled):not(.euclid-button--loading){background-color:var(--euclid-background-secondary)}.euclid-button--disabled{opacity:0.5;cursor:not-allowed;transform:none !important;box-shadow:none !important}.euclid-button--loading{cursor:default;pointer-events:none}.euclid-button--full-width{width:100%}.euclid-button__content{display:flex;align-items:center;justify-content:center;gap:var(--euclid-space-2);transition:opacity var(--euclid-transition-fast)}.euclid-button__content--hidden{opacity:0}.euclid-button__spinner{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);display:flex;align-items:center;justify-content:center}.euclid-button__spinner-icon{width:1rem;height:1rem;animation:euclid-spin 1s linear infinite;border:2px solid currentColor;border-top-color:transparent;border-radius:var(--euclid-radius-full)}.euclid-button--sm .euclid-button__spinner-icon{width:0.875rem;height:0.875rem}.euclid-button--lg .euclid-button__spinner-icon{width:1.25rem;height:1.25rem}@media (prefers-contrast: high){.euclid-button{border-width:var(--euclid-border-2)}.euclid-button--primary{border-color:var(--euclid-interactive-primary)}.euclid-button--secondary{border-color:var(--euclid-text-primary)}.euclid-button--danger{border-color:var(--euclid-danger-600)}}@media (prefers-reduced-motion: reduce){.euclid-button{transition:none}.euclid-button:hover{transform:none}.euclid-button__spinner-icon{animation:none}}@media (pointer: coarse){.euclid-button--sm{min-height:var(--euclid-space-10);padding:var(--euclid-space-2_5) var(--euclid-space-4)}.euclid-button--md{min-height:var(--euclid-space-12);padding:var(--euclid-space-3_5) var(--euclid-space-5)}.euclid-button--lg{min-height:var(--euclid-space-16);padding:var(--euclid-space-5) var(--euclid-space-7)}}";const S=class{constructor(t){e(this,t);this.variant="primary";this.size="md";this.loading=false;this.disabled=false;this.fullWidth=false;this.type="button";this.handleClick=e=>{if(this.disabled||this.loading){e.preventDefault();e.stopPropagation();return}}}render(){const e={"euclid-button":true,[`euclid-button--${this.variant}`]:true,[`euclid-button--${this.size}`]:true,"euclid-button--loading":this.loading,"euclid-button--disabled":this.disabled,"euclid-button--full-width":this.fullWidth};const t={class:e,disabled:this.disabled||this.loading,onClick:this.handleClick,"aria-busy":this.loading?"true":"false"};if(this.href&&!this.disabled&&!this.loading){return i(a,null,i("a",{href:this.href,class:e,role:"button","aria-busy":this.loading?"true":"false"},this.loading&&i("span",{class:"euclid-button__spinner","aria-hidden":"true"},i("svg",{viewBox:"0 0 24 24",class:"euclid-button__spinner-icon"},i("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2",fill:"none","stroke-linecap":"round","stroke-dasharray":"60","stroke-dashoffset":"60"}))),i("span",{class:{"euclid-button__content":true,"euclid-button__content--hidden":this.loading}},i("slot",null))))}return i(a,null,i("button",{type:this.type,...t},this.loading&&i("span",{class:"euclid-button__spinner","aria-hidden":"true"},i("svg",{viewBox:"0 0 24 24",class:"euclid-button__spinner-icon"},i("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2",fill:"none","stroke-linecap":"round","stroke-dasharray":"60","stroke-dashoffset":"60"}))),i("span",{class:{"euclid-button__content":true,"euclid-button__content--hidden":this.loading}},i("slot",null))))}};S.style=L;const A=class{constructor(t){e(this,t);this.environment="testnet"}componentWillLoad(){this.euclidConfig=this.computeConfiguration();this.provideConfigToChildren()}computeConfiguration(){let e={...f};if(this.environment&&m[this.environment]){e=p(e,m[this.environment])}const t={};if(this.graphqlEndpoint)t.graphqlEndpoint=this.graphqlEndpoint;if(this.restEndpoint)t.restEndpoint=this.restEndpoint;if(this.apiTimeout!==undefined)t.apiTimeout=this.apiTimeout;if(this.defaultChain)t.defaultChain=this.defaultChain;if(this.defaultWallet)t.defaultWallet=this.defaultWallet;if(this.supportedChains){t.supportedChains=this.supportedChains.split(",").map((e=>e.trim()))}if(this.supportedWallets){t.supportedWallets=this.supportedWallets.split(",").map((e=>e.trim()))}if(this.defaultSlippage!==undefined){t.ui={...e.ui,defaultSlippage:this.defaultSlippage}}if(this.refreshIntervals){try{t.refreshIntervals=JSON.parse(this.refreshIntervals)}catch(e){console.warn("Invalid refreshIntervals JSON, using defaults:",e)}}if(this.featureFlags){try{t.features=JSON.parse(this.featureFlags)}catch(e){console.warn("Invalid featureFlags JSON, using defaults:",e)}}return p(e,t)}provideConfigToChildren(){globalThis.__euclidConfig=this.euclidConfig;window.dispatchEvent(new CustomEvent("euclid:config-updated",{detail:{config:this.euclidConfig}}))}render(){return i("slot",{key:"ebe37d611ea5300dc61b18cf11957999cf40bdcf"})}};const O=":host{display:block;width:100%;height:100%}.euclid-loading{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:200px;padding:var(--euclid-spacing-8);text-align:center;color:var(--euclid-text-secondary);font-family:var(--euclid-font-family-sans)}.loading-spinner{width:var(--euclid-spacing-8);height:var(--euclid-spacing-8);border:3px solid var(--euclid-border);border-top:3px solid var(--euclid-interactive-primary);border-radius:50%;animation:euclid-spin 1s linear infinite;margin-bottom:var(--euclid-spacing-4)}.euclid-loading p{margin:0;font-size:var(--euclid-text-size-sm);font-weight:var(--euclid-font-weight-medium)}.euclid-provider-content{width:100%;height:100%}";const E=class{constructor(t){e(this,t);this.isInitialized=false;this.environment="testnet";this.handleWalletConnectFromModal=e=>{const{provider:t,chainId:i}=e.detail;console.log("🔗 Wallet connection request from modal:",t.type,i);g(b.WALLET.CONNECT_REQUEST,{chainUID:i||"ethereum",walletType:t.type});r.closeWalletModal()};this.handleTokenSelectFromModal=e=>{const{token:t}=e.detail;console.log("🪙 Token selection from modal:",t.symbol);g(b.UI.TOKEN_SELECTED,{tokenId:t.id,data:t});r.closeTokenModal()}}async componentWillLoad(){this.euclidConfig=this.computeConfiguration()}async componentDidLoad(){await this.initialize()}computeConfiguration(){let e={...f};if(this.environment&&m[this.environment]){e=p(e,m[this.environment])}const t={};if(this.graphqlEndpoint)t.graphqlEndpoint=this.graphqlEndpoint;if(this.restEndpoint)t.restEndpoint=this.restEndpoint;if(this.apiTimeout!==undefined)t.apiTimeout=this.apiTimeout;if(this.defaultChain)t.defaultChain=this.defaultChain;if(this.defaultWallet)t.defaultWallet=this.defaultWallet;if(this.supportedChains){t.supportedChains=this.supportedChains.split(",").map((e=>e.trim()))}if(this.supportedWallets){t.supportedWallets=this.supportedWallets.split(",").map((e=>e.trim()))}if(this.defaultSlippage!==undefined){t.ui={...e.ui,defaultSlippage:this.defaultSlippage}}if(this.refreshIntervals){try{t.refreshIntervals=JSON.parse(this.refreshIntervals)}catch(e){console.warn("Invalid refreshIntervals JSON, using defaults:",e)}}if(this.featureFlags){try{t.features=JSON.parse(this.featureFlags)}catch(e){console.warn("Invalid featureFlags JSON, using defaults:",e)}}return p(e,t)}async initialize(){console.log("🌌 Initializing Euclid Protocol Core Provider...");r.initialize();o.initialize();await this.loadInitialMarketData();this.isInitialized=true;console.log("✅ Euclid Protocol Core Provider initialized successfully")}async loadInitialMarketData(){console.log("📊 Delegating initial market data loading to Market Data Controller...");g(b.MARKET.LOAD_INITIAL)}handleWalletConnect(e){console.log("🔗 Wallet connection event received:",e.detail)}handleWalletDisconnect(e){console.log("🔌 Wallet disconnection event received:",e.detail)}render(){return i(a,{key:"8d5de78a48126de7c68e21a81cb7616e93c310f2"},!this.isInitialized&&i("div",{key:"41fca2cf8f91c275824e0bdab667b40d4b5fdd07",class:"euclid-loading"},i("div",{key:"49a9b52ea1e03946cdea273625d55ffe96b98a1a",class:"loading-spinner"}),i("p",{key:"d1eeb1d0f93464cb6facc72ed04af238c6ce0138"},"Initializing Euclid Protocol...")),this.isInitialized&&i("div",{key:"3fc4e40d70b495bf409738bb4edad64edf4262ca"},i("euclid-wallet-controller",{key:"40c3e129c887194f81fc26cda1f76e82ff5a8f53",config:JSON.stringify(this.euclidConfig)}),i("euclid-market-data-controller",{key:"840e00e7e24a1958c270a621ddf76334d2ca8b84",config:JSON.stringify(this.euclidConfig)}),i("euclid-user-data-controller",{key:"667c353aa80a2b8b5ac33bad285456632bca64ef",config:JSON.stringify(this.euclidConfig)}),i("euclid-swap-controller",{key:"5ddf4b21d3e34a1fdea9fbb4d21f7fd1b861362f",config:JSON.stringify(this.euclidConfig)}),i("euclid-liquidity-controller",{key:"44d1ab1104b76ea9259da885b53e879e7d3556b7",config:JSON.stringify(this.euclidConfig)}),i("euclid-tx-tracker-controller",{key:"f6121922d1409d05d268d1308e769f9fbbd32c35",config:JSON.stringify(this.euclidConfig)}),i("euclid-modal",{key:"5c981830c95bd93a27eb6af7fe8bfed92a2800cb"})),i("div",{key:"924fb1a067c1790a344098996ceacd60bcf4f765",class:"euclid-provider-content"},i("slot",{key:"731d210b10c3ad448f330dcf65804d902ec5f122"})))}};E.style=O;class P{constructor(e,t,i){this.triggerElements=new Set;this.state={displayedItemsCount:0,hasMoreData:true,isLoadingMore:false,isComponentVisible:true};this.hostElement=e;this.config=t;this.callbacks=i}initialize(e){this.contentElement=e;this.setupIntersectionObservers()}updateState(e){this.state={...this.state,...e};this.callbacks.onStateChange(this.state)}updateTriggerElements(){if(!this.itemObserver)return;this.triggerElements.forEach((e=>{this.itemObserver?.unobserve(e)}));this.triggerElements.clear();const e=this.hostElement?.shadowRoot?.querySelector(".data-content");if(!e)return;const t=e.querySelectorAll(".data-item");const i=Math.min(this.config.triggerItems,t.length);for(let e=t.length-i;e<t.length;e++){if(e>=0&&t[e]){this.triggerElements.add(t[e]);this.itemObserver.observe(t[e])}}}findScrollContainer(e){let t=e.parentElement;while(t&&t!==document.documentElement){const e=window.getComputedStyle(t);const i=e.overflowY==="auto"||e.overflowY==="scroll";const a=e.overflow==="auto"||e.overflow==="scroll";const s=t.scrollHeight>t.clientHeight;const o=s&&(i||a||t.tagName==="BODY"||t.classList.contains("container")||t.classList.contains("scroll")||t.classList.contains("scrollable"));if(o){return t}t=t.parentElement}const i=document.body;if(i&&i.scrollHeight>i.clientHeight){return i}return null}setupIntersectionObservers(){let e=null;if(this.config.useParentScroll){e=this.findScrollContainer(this.hostElement)}else{e=this.contentElement||null}this.componentObserver=new IntersectionObserver((e=>{e.forEach((e=>{const t=e.isIntersecting;this.updateState({isComponentVisible:t});if(!t){this.pauseItemObserver()}else{this.resumeItemObserver()}}))}),{root:this.config.useParentScroll?e:null,rootMargin:"50px",threshold:.1});if(this.hostElement){this.componentObserver.observe(this.hostElement)}this.itemObserver=new IntersectionObserver((e=>{if(!this.state.isComponentVisible||this.state.isLoadingMore||!this.state.hasMoreData)return;e.forEach((e=>{if(e.isIntersecting&&this.triggerElements.has(e.target)){this.handleLoadMore()}}))}),{root:e,rootMargin:"20px",threshold:this.config.threshold})}handleLoadMore(){if(this.state.isLoadingMore||!this.state.hasMoreData)return;if(this.loadMoreDebounceTimer){clearTimeout(this.loadMoreDebounceTimer)}this.loadMoreDebounceTimer=setTimeout((()=>{this.callbacks.onLoadMore()}),this.config.debounceTime)}pauseItemObserver(){if(this.itemObserver){this.triggerElements.forEach((e=>{this.itemObserver?.unobserve(e)}))}}resumeItemObserver(){if(this.itemObserver&&this.triggerElements.size>0){this.triggerElements.forEach((e=>{this.itemObserver?.observe(e)}))}}destroy(){if(this.componentObserver){this.componentObserver.disconnect();this.componentObserver=undefined}if(this.itemObserver){this.itemObserver.disconnect();this.itemObserver=undefined}this.triggerElements.clear();if(this.loadMoreDebounceTimer){clearTimeout(this.loadMoreDebounceTimer)}}}class U{constructor(e={}){this.worker=null;this.messageId=0;this.pendingMessages=new Map;this.debounceTimers=new Map;this.retryCount=0;this.maxRetries=3;this.workerDisabled=false;this.config={workerPath:"/build/workers/data-list.worker.js",batchSize:50,debounceTime:200,timeout:5e3,...e};this.initializeWorker()}initializeWorker(){if(!this.worker&&!this.workerDisabled){try{this.worker=new Worker(this.config.workerPath);this.worker.addEventListener("message",this.handleWorkerMessage.bind(this));this.worker.addEventListener("error",this.handleWorkerError.bind(this));console.log("🚀 DataListWorker initialized successfully");this.retryCount=0}catch(e){console.error("❌ Failed to initialize DataListWorker:",e);this.handleWorkerFailure()}}}handleWorkerMessage(e){const{id:t,type:i,payload:a}=e.data;const s=this.pendingMessages.get(t);if(!s){console.warn("⚠️ Received response for unknown message ID:",t);return}clearTimeout(s.timeout);this.pendingMessages.delete(t);if(i==="ERROR"){s.reject(new Error(a.error||"Unknown worker error"))}else{if(a.processingTime!==undefined){console.log(`⚡ Worker processing time: ${a.processingTime.toFixed(2)}ms`)}s.resolve(a)}}handleWorkerError(e){console.error("❌ Worker error:",e);this.pendingMessages.forEach((t=>{clearTimeout(t.timeout);t.reject(new Error("Worker error: "+e.message))}));this.pendingMessages.clear();this.handleWorkerFailure()}handleWorkerFailure(){this.retryCount++;console.warn(`⚠️ Worker failure ${this.retryCount}/${this.maxRetries}`);this.terminateWorker();if(this.retryCount>=this.maxRetries){console.error("❌ Worker failed too many times, disabling worker permanently");this.workerDisabled=true;return}const e=Math.min(1e3*Math.pow(2,this.retryCount-1),1e4);setTimeout((()=>{if(!this.workerDisabled){this.initializeWorker()}}),e)}sendMessage(e){if(!this.worker||this.workerDisabled){return Promise.reject(new Error("Worker not available"))}const t=`msg_${++this.messageId}`;const i={id:t,...e};return new Promise(((e,a)=>{const s=setTimeout((()=>{this.pendingMessages.delete(t);a(new Error("Worker timeout"))}),1e4);this.pendingMessages.set(t,{resolve:t=>e(t),reject:a,timeout:s});this.worker.postMessage(i)}))}async processData(e,t,i,a){const s=await this.sendMessage({type:"PROCESS_DATA",payload:{data:e,dataType:t,filterState:i,walletAddress:a}});return{filteredData:s.filteredData||[],totalCount:s.totalCount||0,processingTime:s.processingTime||0}}async getBatch(e,t){const i=await this.sendMessage({type:"GET_BATCH",payload:{startIndex:e,batchSize:t||this.config.batchSize}});return{batchData:i.batchData||[],totalCount:i.totalCount||0,hasMore:i.hasMore||false,processingTime:i.processingTime||0}}async searchDebounced(e,t,i="default"){return new Promise(((t,a)=>{const s=this.debounceTimers.get(i);if(s){clearTimeout(s)}const o=setTimeout((async()=>{try{this.debounceTimers.delete(i);const a=await this.sendMessage({type:"SEARCH",payload:{filterState:{search:e,sortBy:"",sortOrder:"asc"}}});t({filteredData:a.filteredData||[],totalCount:a.totalCount||0,processingTime:a.processingTime||0})}catch(e){a(e)}}),this.config.debounceTime);this.debounceTimers.set(i,o)}))}async sort(e,t){const i=await this.sendMessage({type:"SORT",payload:{filterState:{search:"",sortBy:e,sortOrder:t}}});return{filteredData:i.filteredData||[],totalCount:i.totalCount||0,processingTime:i.processingTime||0}}isWorkerAvailable(){return!this.workerDisabled&&this.worker!==null&&this.worker.constructor===Worker}getMetrics(){return{pendingMessages:this.pendingMessages.size,activeDebounceTimers:this.debounceTimers.size}}terminateWorker(){if(this.worker){this.pendingMessages.forEach((e=>{clearTimeout(e.timeout);e.reject(new Error("Worker terminated"))}));this.pendingMessages.clear();this.debounceTimers.forEach((e=>clearTimeout(e)));this.debounceTimers.clear();this.worker.terminate();this.worker=null;console.log("🔄 DataListWorker terminated")}}destroy(){this.terminateWorker()}}class _{constructor(e,t,i){this.dataType=e;this.config=t;this.callbacks=i;if(t.enableWorker){this.initializeWorker()}}initializeWorker(){this.workerManager=new U({batchSize:50,debounceTime:this.config.debounceTime})}async processData(e,t,i){const a=performance.now();const s=this.config.enableWorker&&this.workerManager?.isWorkerAvailable()&&e.length>this.config.workerThreshold;if(s){try{this.callbacks.onWorkerStateChange(true);const a=await this.workerManager.processData(e,this.dataType,t,i);this.callbacks.onFilterComplete(a.filteredData,a.processingTime);this.callbacks.onPerformanceMetric({processingTime:a.processingTime,operation:"filter_sort",itemCount:e.length})}catch(s){console.error("❌ Worker processing failed, falling back to main thread:",s);const o=this.processDataSync(e,t,i);const r=performance.now()-a;this.callbacks.onFilterComplete(o,r)}finally{this.callbacks.onWorkerStateChange(false)}}else{const s=this.processDataSync(e,t,i);const o=performance.now()-a;this.callbacks.onFilterComplete(s,o)}}processDataSync(e,t,i){let a=[...e];if(t.search){const e=t.search.toLowerCase();a=a.filter((t=>this.searchInItem(t,e)))}a=this.applyTypeSpecificFilters(a,t,i);if(t.sortBy){a=this.applySorting(a,t)}return a}searchInItem(e,t){const i=this.getSearchFields();return i.some((i=>{const a=this.getItemValue(e,i);return a&&a.toString().toLowerCase().includes(t)}))}getSearchFields(){switch(this.dataType){case"tokens":return["displayName","tokenId","name"];case"chains":return["display_name","chain_id","chain_uid"];case"pools":return["token_1","token_2","pool_id"];default:return["name"]}}applyTypeSpecificFilters(e,t,i){switch(this.dataType){case"tokens":return this.applyTokenFilters(e,t);case"chains":return this.applyChainFilters(e,t);case"pools":return this.applyPoolFilters(e,t,i);default:return e}}applyTokenFilters(e,t){let i=[...e];if(t.chainFilter){i=i.filter((e=>e.chain_uids?.includes(t.chainFilter)))}return i}applyChainFilters(e,t){let i=[...e];if(t.typeFilter){i=i.filter((e=>e.type===t.typeFilter))}return i}applyPoolFilters(e,t,i){const a=[...e];return a}applySorting(e,t){return[...e].sort(((e,i)=>{let a,s;switch(this.dataType){case"tokens":({aValue:a,bValue:s}=this.getTokenSortValues(e,i,t.sortBy));break;case"chains":({aValue:a,bValue:s}=this.getChainSortValues(e,i,t.sortBy));break;case"pools":({aValue:a,bValue:s}=this.getPoolSortValues(e,i,t.sortBy));break;default:a=s=0}if(typeof a==="string"&&typeof s==="string"){const e=a.localeCompare(s);return t.sortOrder==="asc"?e:-e}const o=(a||0)-(s||0);return t.sortOrder==="asc"?o:-o}))}getTokenSortValues(e,t,i){switch(i){case"name":return{aValue:e.displayName,bValue:t.displayName};case"price":return{aValue:parseFloat(e.price||"0"),bValue:parseFloat(t.price||"0")};case"volume":return{aValue:e.total_volume_24h||0,bValue:t.total_volume_24h||0};case"marketCap":return{aValue:0,bValue:0};default:return{aValue:e.displayName,bValue:t.displayName}}}getChainSortValues(e,t,i){switch(i){case"name":return{aValue:e.display_name,bValue:t.display_name};case"type":return{aValue:e.type,bValue:t.type};case"chain_id":return{aValue:e.chain_id,bValue:t.chain_id};default:return{aValue:e.display_name,bValue:t.display_name}}}getPoolSortValues(e,t,i){switch(i){case"apr":return{aValue:parseFloat(e.apr?.replace("%","")||"0"),bValue:parseFloat(t.apr?.replace("%","")||"0")};case"tvl":return{aValue:parseFloat(e.total_liquidity||"0"),bValue:parseFloat(t.total_liquidity||"0")};case"volume":return{aValue:parseFloat(e.volume_24h||"0"),bValue:parseFloat(t.volume_24h||"0")};case"fees":return{aValue:parseFloat(e.fees_24h||"0"),bValue:parseFloat(t.fees_24h||"0")};default:return{aValue:e.token_1,bValue:t.token_1}}}getItemValue(e,t){const i=t.split(".");let a=e;for(const e of i){if(a&&typeof a==="object"&&e in a){a=a[e]}else{return null}}return a}async searchDebounced(e){if(this.config.enableWorker&&this.workerManager?.isWorkerAvailable()){try{this.callbacks.onWorkerStateChange(true);const t=await this.workerManager.searchDebounced(e,this.dataType);this.callbacks.onFilterComplete(t.filteredData,t.processingTime);this.callbacks.onPerformanceMetric({processingTime:t.processingTime,operation:"search",itemCount:t.totalCount})}catch(e){console.error("❌ Worker search failed:",e)}finally{this.callbacks.onWorkerStateChange(false)}}}destroy(){if(this.workerManager){this.workerManager.destroy()}}}class q{constructor(e,t){this.filteredData=[];this.state={currentPage:1,totalPages:1,displayedItemsCount:0,hasMoreData:true};this.config=e;this.callbacks=t;if(e.infiniteScroll){this.state.displayedItemsCount=e.itemsPerPage}}updateData(e){this.filteredData=e;this.updatePagination()}getPaginatedData(){if(this.config.infiniteScroll){return this.filteredData.slice(0,this.state.displayedItemsCount)}if(this.config.itemsPerPage<=0){return this.filteredData}const e=(this.state.currentPage-1)*this.config.itemsPerPage;const t=e+this.config.itemsPerPage;return this.filteredData.slice(e,t)}loadMore(){if(!this.config.infiniteScroll){return{newDisplayedCount:this.state.displayedItemsCount,hasMore:false}}const e=this.state.displayedItemsCount;const t=this.filteredData.length;const i=Math.min(this.config.itemsPerPage,t-e);if(i<=0){this.state.hasMoreData=false;this.callbacks.onStateChange(this.state);return{newDisplayedCount:e,hasMore:false}}const a=Math.min(e+i,t,this.config.maxItems);this.state.displayedItemsCount=a;this.state.hasMoreData=a<t&&a<this.config.maxItems;this.callbacks.onStateChange(this.state);this.callbacks.onInfiniteScrollStateChange(false,this.state.hasMoreData,a);return{newDisplayedCount:a,hasMore:this.state.hasMoreData}}goToPage(e){if(this.config.infiniteScroll){return false}if(e>=1&&e<=this.state.totalPages){this.state.currentPage=e;this.callbacks.onStateChange(this.state);this.callbacks.onPageChange(e,this.state.totalPages,this.config.itemsPerPage);return true}return false}resetToFirstPage(){this.state.currentPage=1;if(this.config.infiniteScroll){this.state.displayedItemsCount=Math.min(this.config.itemsPerPage,this.filteredData.length);this.state.hasMoreData=this.state.displayedItemsCount<this.filteredData.length&&this.state.displayedItemsCount<this.config.maxItems}this.callbacks.onStateChange(this.state)}updatePagination(){if(this.config.infiniteScroll){this.state.displayedItemsCount=Math.min(this.state.displayedItemsCount,this.filteredData.length,this.config.maxItems);this.state.hasMoreData=this.state.displayedItemsCount<this.filteredData.length&&this.state.displayedItemsCount<this.config.maxItems;this.state.totalPages=1;this.state.currentPage=1}else{if(this.config.itemsPerPage>0){this.state.totalPages=Math.ceil(this.filteredData.length/this.config.itemsPerPage);if(this.state.currentPage>this.state.totalPages&&this.state.totalPages>0){this.state.currentPage=1}}else{this.state.totalPages=1;this.state.currentPage=1}}this.callbacks.onStateChange(this.state)}getState(){return{...this.state}}}const F=":host{display:block;width:100%;font-family:var(--euclid-font-family, 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif)}.data-list{background:var(--euclid-surface);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-2xl);overflow:visible;box-shadow:var(--euclid-shadow-sm)}.data-header{padding:24px;border-bottom:1px solid var(--euclid-border);background:var(--euclid-surface-secondary)}.data-title{margin:0;font-size:20px;font-weight:600;color:var(--euclid-text-primary)}.data-controls{display:flex;flex-wrap:wrap;gap:16px;padding:20px;background:var(--euclid-surface);border-bottom:1px solid var(--euclid-border);align-items:center}.search-input-container{position:relative;flex:1;min-width:200px}.search-icon{position:absolute;left:12px;top:50%;transform:translateY(-50%);width:18px;height:18px;color:var(--euclid-text-secondary);pointer-events:none;z-index:1}.search-input{width:100%;padding:12px 16px 12px 44px;border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-lg);background:var(--euclid-surface);color:var(--euclid-text-primary);font-size:14px;transition:border-color 0.2s ease, box-shadow 0.2s ease}.search-input:focus{outline:none;border-color:var(--euclid-interactive-primary);box-shadow:0 0 0 3px var(--euclid-interactive-primary-focus)}.search-input::placeholder{color:var(--euclid-text-secondary)}.filters-container{display:flex;flex-wrap:wrap;gap:12px;align-items:center}.filter-item{display:flex;align-items:center}.filter-select,.sort-select{padding:8px 12px;border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-md);background:var(--euclid-surface);color:var(--euclid-text-primary);font-size:14px;min-width:120px;cursor:pointer}.filter-select:focus,.sort-select:focus{outline:none;border-color:var(--euclid-interactive-primary);box-shadow:0 0 0 2px var(--euclid-interactive-primary-focus)}.filter-input{padding:8px 12px;border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-md);background:var(--euclid-surface);color:var(--euclid-text-primary);font-size:14px;min-width:150px}.filter-input:focus{outline:none;border-color:var(--euclid-interactive-primary);box-shadow:0 0 0 2px var(--euclid-interactive-primary-focus)}.filter-checkbox{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:14px;color:var(--euclid-text-primary)}.filter-checkbox input[type=\"checkbox\"]{width:16px;height:16px;accent-color:var(--euclid-interactive-primary)}.checkbox-label{user-select:none}.data-stats{display:flex;flex-wrap:wrap;gap:24px;padding:20px 24px;background:var(--euclid-surface-secondary);border-bottom:1px solid var(--euclid-border)}.stat-item{display:flex;flex-direction:column;gap:4px}.stat-label{font-size:12px;color:var(--euclid-text-secondary);text-transform:uppercase;letter-spacing:0.5px;font-weight:500}.stat-value{font-size:18px;font-weight:700;color:var(--euclid-text-primary)}.data-grid{display:grid;grid-template-columns:repeat(auto-fill, minmax(300px, 1fr));gap:16px;padding:24px}.data-list-container{display:flex;flex-direction:column;gap:12px;padding:24px}.data-compact-container{display:flex;flex-wrap:wrap;gap:8px;padding:20px}.data-content--infinite{max-height:60vh;overflow-y:auto;scroll-behavior:smooth;contain:layout style;position:relative;isolation:isolate;overscroll-behavior:contain;scrollbar-gutter:stable}.data-content--parent-scroll{max-height:none;overflow-y:visible}.data-item{position:relative;transition:opacity 0.2s ease-in-out, transform 0.2s ease-in-out;contain:layout;will-change:auto;transform:translateZ(0)}.data-container--transitioning .data-item{transition:opacity 0.15s ease-in-out}.data-item--updating{opacity:0.8}.data-container--transitioning{min-height:inherit}.data-grid,.data-list-container,.data-compact-container{contain:layout;position:relative}.worker-badge{font-size:0.8em;background:linear-gradient(45deg, #667eea, #764ba2);color:white;padding:2px 6px;border-radius:4px;margin-left:8px;font-weight:normal}.search-processing{position:absolute;right:8px;top:50%;transform:translateY(-50%)}.loading-spinner-small{width:16px;height:16px;border:2px solid #f3f3f3;border-top:2px solid #667eea;border-radius:50%;animation:spin 1s linear infinite}.data-content--processing{opacity:0.8;transition:opacity 0.2s ease}.infinite-scroll-footer{padding:16px 24px;display:flex;justify-content:center;align-items:center;border-top:1px solid var(--euclid-border);background:var(--euclid-surface-secondary)}.infinite-scroll-loading{display:flex;flex-direction:column;align-items:center;gap:12px;color:var(--euclid-text-secondary)}.infinite-scroll-loading .loading-spinner{width:24px;height:24px;border:2px solid var(--euclid-border);border-top-color:var(--euclid-interactive-primary);border-radius:50%;animation:spin 1s linear infinite}.infinite-scroll-loading span{font-size:14px;font-weight:500}.infinite-scroll-end{display:flex;align-items:center;justify-content:center;padding:8px 0}.infinite-scroll-end span{font-size:14px;color:var(--euclid-text-tertiary);font-style:italic}.loading-state{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:16px;padding:60px 24px;text-align:center;color:var(--euclid-text-secondary)}.loading-spinner{width:32px;height:32px;border:3px solid var(--euclid-border);border-top-color:var(--euclid-interactive-primary);border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:16px;padding:60px 24px;text-align:center;color:var(--euclid-text-secondary)}.empty-state svg{width:48px;height:48px;opacity:0.5}.empty-state span{font-size:16px;font-weight:500}.clear-filters-btn{padding:12px 24px;background:var(--euclid-interactive-primary);color:white;border:none;border-radius:var(--euclid-radius-lg);font-size:14px;font-weight:500;cursor:pointer;transition:background-color 0.2s ease}.clear-filters-btn:hover{background:var(--euclid-interactive-primary-hover)}.pagination{display:flex;justify-content:center;align-items:center;gap:8px;padding:20px 24px;border-top:1px solid var(--euclid-border);background:var(--euclid-surface)}.pagination-btn{padding:8px 16px;border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-md);background:var(--euclid-surface);color:var(--euclid-text-primary);font-size:14px;font-weight:500;cursor:pointer;transition:all 0.2s ease}.pagination-btn:hover:not(:disabled){border-color:var(--euclid-interactive-primary);background:var(--euclid-interactive-primary-focus)}.pagination-btn:disabled{opacity:0.5;cursor:not-allowed}.pagination-pages{display:flex;gap:4px;align-items:center}.pagination-page{display:flex;align-items:center;justify-content:center;width:36px;height:36px;border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-md);background:var(--euclid-surface);color:var(--euclid-text-primary);font-size:14px;font-weight:500;cursor:pointer;transition:all 0.2s ease}.pagination-page:hover{border-color:var(--euclid-interactive-primary);background:var(--euclid-interactive-primary-focus)}.pagination-page--active{background:var(--euclid-interactive-primary);border-color:var(--euclid-interactive-primary);color:white}.pagination-page--active:hover{background:var(--euclid-interactive-primary-hover)}.pagination-ellipsis{padding:0 8px;color:var(--euclid-text-secondary);font-weight:500}@media (max-width: 768px){.data-header{padding:16px}.data-title{font-size:18px}.data-controls{flex-direction:column;align-items:stretch;gap:12px;padding:16px}.search-input-container{min-width:unset}.filters-container{justify-content:space-between}.data-stats{flex-direction:column;gap:16px;padding:16px}.data-grid{grid-template-columns:1fr;gap:12px;padding:16px}.data-list-container{gap:8px;padding:16px}.pagination{flex-direction:column;gap:12px;padding:16px}.pagination-pages{order:-1}}@media (max-width: 640px){.data-stats{text-align:center}.stat-item{align-items:center}.filter-select,.sort-select,.filter-input{min-width:unset;width:100%}.filters-container{flex-direction:column;align-items:stretch}}";const B=class{constructor(i){e(this,i);this.itemSelected=t(this,"itemSelected");this.itemHover=t(this,"itemHover");this.filtersChanged=t(this,"filtersChanged");this.pageChanged=t(this,"pageChanged");this.loadMoreRequested=t(this,"loadMoreRequested");this.infiniteScrollStateChanged=t(this,"infiniteScrollStateChanged");this.workerPerformance=t(this,"workerPerformance");this.displayMode="card";this.cardTitle="";this.itemsPerPage=10;this.infiniteScroll=false;this.useParentScroll=false;this.infiniteScrollTriggerItems=3;this.infiniteScrollThreshold=.1;this.maxItems=1e3;this.showFields="";this.searchable=true;this.filterable=true;this.sortable=true;this.showStats=true;this.selectable=true;this.loading=false;this.enableWorker=false;this.walletAddress="";this.showEndMessage=true;this.filteredData=[];this.currentPage=1;this.totalPages=1;this.selectedItemId="";this.filterState={search:"",sortBy:"",sortOrder:"asc"};this.displayedItemsCount=0;this.hasMoreData=true;this.isLoadingMore=false;this.isComponentVisible=true;this.storeData=[];this.storeLoading=false;this.storeError=null;this.isWorkerProcessing=false;this.workerProcessingTime=0;this.componentPoolVersion=0;this.isTransitioning=false;this.memoizedItems=new Map;this.lastRenderHash="";this.updateTimeout=null;this.isConnected=true;this.dataSubscriptionId=null;this.handleSearch=async e=>{const t=e.target;const i=t.value||"";const a={...this.filterState,search:i};this.filterState=a;this.paginationManager?.resetToFirstPage();this.applyFilters()};this.handleSortChange=async e=>{const t=e.target;const[i,a]=t.value.split("_");const s={...this.filterState,sortBy:i,sortOrder:a};this.filterState=s;this.applyFilters()};this.handleFilterChange=(e,t)=>{this.filterState={...this.filterState,[e]:t};this.paginationManager?.resetToFirstPage();this.applyFilters()};this.clearFilters=()=>{const e=this.getDefaultSort();this.filterState={search:"",sortBy:e.key,sortOrder:e.order};this.paginationManager?.resetToFirstPage();this.applyFilters()};this.handleItemSelect=e=>{if(!this.isConnected)return;const t=e.detail;const i=this.getItemId(t);this.selectedItemId=i;try{this.itemSelected.emit({item:t,id:i})}catch(e){console.warn("Failed to emit itemSelected event:",e)}};this.handleItemHover=e=>{if(!this.isConnected)return;const t=e.detail;const i=this.getItemId(t);try{this.itemHover.emit({item:t,id:i})}catch(e){console.warn("Failed to emit itemHover event:",e)}};this.handlePageChange=e=>{this.paginationManager?.goToPage(e)}}get storeKey(){return this.dataType}get itemComponent(){switch(this.dataType){case"tokens":return"euclid-token-item";case"chains":return"euclid-chain-item";case"pools":return"euclid-pool-item";default:return"div"}}get showFieldsArray(){return this.showFields?this.showFields.split(",").map((e=>e.trim())):this.getDefaultFields()}get effectiveCardTitle(){return this.cardTitle||null}componentWillLoad(){this.initializeFilterState();this.syncWithStore();this.initializeManagers();if(this.infiniteScroll){this.displayedItemsCount=this.itemsPerPage;this.hasMoreData=true}this.subscribeToMarketData();h.onChange(this.storeKey,(()=>{this.scheduleDataUpdate()}));h.onChange("loading",(()=>{this.storeLoading=h.state.loading}));h.onChange("error",(()=>{this.storeError=h.state.error}))}scheduleDataUpdate(){if(!this.isConnected)return;if(this.updateTimeout){clearTimeout(this.updateTimeout)}this.updateTimeout=window.setTimeout((()=>{if(!this.isConnected)return;if(this.isTransitioning){this.scheduleDataUpdate();return}this.isTransitioning=true;requestAnimationFrame((()=>{if(!this.isConnected){this.isTransitioning=false;return}this.syncWithStore();this.applyFilters();setTimeout((()=>{this.isTransitioning=false;this.updateTimeout=null}),50)}))}),100)}componentDidLoad(){if(this.infiniteScroll){this.infiniteScrollManager?.initialize(this.contentElement)}}componentDidUpdate(){if(this.infiniteScroll){this.infiniteScrollManager?.updateTriggerElements()}}disconnectedCallback(){this.isConnected=false;this.unsubscribeFromMarketData();this.filterManager?.destroy();this.infiniteScrollManager?.destroy();if(this.updateTimeout){clearTimeout(this.updateTimeout);this.updateTimeout=null}}subscribeToMarketData(){let e;switch(this.dataType){case"tokens":e="tokenPrices";break;case"pools":case"chains":default:e="marketData";break}this.dataSubscriptionId=v.subscribe(`euclid-data-list-${this.dataType}`,e,{dataSubtype:this.dataType});console.log(`📊 Data List subscribed to ${e} for ${this.dataType}`)}unsubscribeFromMarketData(){if(this.dataSubscriptionId){v.unsubscribe(this.dataSubscriptionId);this.dataSubscriptionId=null;console.log(`📊 Data List unsubscribed from ${this.dataType} data`)}}getDefaultFields(){switch(this.dataType){case"tokens":return["logo","name","price","change","volume24h","chains","verified"];case"chains":return["logo","name","type","chain_id"];case"pools":return[];default:return[]}}initializeFilterState(){const e=this.getDefaultSort();this.filterState={search:"",sortBy:e.key,sortOrder:e.order}}initializeManagers(){const e={enableWorker:this.enableWorker||this.infiniteScroll,workerThreshold:this.infiniteScroll?25:50,debounceTime:200};this.filterManager=new _(this.dataType,e,{onFilterComplete:(e,t)=>{if(!this.isConnected)return;this.filteredData=e;this.workerProcessingTime=t||0;this.paginationManager?.updateData(e);try{this.filtersChanged.emit({filters:{...this.filterState},resultCount:e.length})}catch(e){console.warn("Failed to emit filtersChanged event:",e)}},onWorkerStateChange:e=>{if(!this.isConnected)return;this.isWorkerProcessing=e},onPerformanceMetric:e=>{if(!this.isConnected)return;try{this.workerPerformance.emit(e)}catch(e){console.warn("Failed to emit workerPerformance event:",e)}}});const t={itemsPerPage:this.itemsPerPage,maxItems:this.maxItems,infiniteScroll:this.infiniteScroll};this.paginationManager=new q(t,{onStateChange:e=>{if(!this.isConnected)return;if(!this.infiniteScroll){this.currentPage=e.currentPage;this.totalPages=e.totalPages}},onPageChange:(e,t,i)=>{if(!this.isConnected)return;try{this.pageChanged.emit({page:e,totalPages:t,itemsPerPage:i})}catch(e){console.warn("Failed to emit pageChanged event:",e)}},onInfiniteScrollStateChange:(e,t,i)=>{if(!this.isConnected)return;this.isLoadingMore=e;this.hasMoreData=t;this.displayedItemsCount=i;try{this.infiniteScrollStateChanged.emit({isLoading:e,hasMore:t,displayedCount:i})}catch(e){console.warn("Failed to emit infiniteScrollStateChanged event:",e)}}});if(this.infiniteScroll){const e={useParentScroll:this.useParentScroll,triggerItems:this.infiniteScrollTriggerItems,threshold:this.infiniteScrollThreshold,debounceTime:100};this.infiniteScrollManager=new P(this.el,e,{onLoadMore:()=>{this.handleLoadMore()},onStateChange:e=>{this.isComponentVisible=e.isComponentVisible;this.isLoadingMore=e.isLoadingMore}})}this.applyFilters()}getDefaultSort(){switch(this.dataType){case"tokens":return{key:"name",order:"asc"};case"chains":return{key:"name",order:"asc"};case"pools":return{key:"apr",order:"desc"};default:return{key:"name",order:"asc"}}}syncWithStore(){const e=h.state[this.storeKey]||[];this.storeData=Array.isArray(e)?e:[];this.storeLoading=h.state.loading;this.storeError=h.state.error}watchPropsChange(){if(this.dataSubscriptionId){this.unsubscribeFromMarketData();this.subscribeToMarketData()}this.syncWithStore();this.initializeFilterState();this.initializeManagers();if(this.infiniteScroll){this.displayedItemsCount=this.itemsPerPage;this.hasMoreData=true}else{this.currentPage=1;this.displayedItemsCount=0;this.hasMoreData=false}this.selectedItemId="";this.applyFilters()}async applyFilters(){if(this.filterManager&&this.storeData.length>0){await this.filterManager.processData(this.storeData,this.filterState,this.walletAddress)}else if(this.storeData.length===0){this.filteredData=[];this.paginationManager?.updateData([])}if(!this.infiniteScroll&&this.filteredData.length>0){const e=Math.ceil(this.filteredData.length/this.itemsPerPage);if(this.totalPages!==e){this.totalPages=e;if(this.currentPage>e){this.currentPage=1}}}}getStableKey(e){switch(this.dataType){case"tokens":{const t=e;return`token-${t.symbol||t.name||"unknown"}`}case"chains":{const t=e;return`chain-${t.chain_uid||t.chain_id||"unknown"}`}case"pools":{const t=e;return`pool-${t.pool_id||"unknown"}`}default:return`item-${JSON.stringify(e).slice(0,50)}`}}createItemHash(e){return JSON.stringify({item:e,selected:this.selectedItemId===this.getItemId(e),displayMode:this.displayMode,showFields:this.showFieldsArray})}shouldRenderItem(e,t){const i=this.createItemHash(t);const a=this.memoizedItems.get(e);if(!a||a.hash!==i){this.memoizedItems.set(e,{item:t,props:this.getItemProps(t),hash:i});return true}return false}getItemProps(e){const t=this.getItemId(e);const i=this.selectedItemId===t;const a={[this.dataType.slice(0,-1)]:e,selected:i,displayMode:this.displayMode,showFields:this.showFieldsArray,selectable:this.selectable};return this.dataType==="pools"?{...a,tokens:h.state.tokens||[],walletAddress:this.walletAddress}:a}getPaginatedData(){if(this.infiniteScroll){return this.filteredData.slice(0,this.displayedItemsCount)}if(this.itemsPerPage<=0){return this.filteredData}const e=(this.currentPage-1)*this.itemsPerPage;const t=e+this.itemsPerPage;return this.filteredData.slice(e,t)}getItemId(e){switch(this.dataType){case"tokens":return e.tokenId;case"chains":return e.chain_uid;case"pools":return e.pool_id;default:return"unknown"}}handleLoadMore(){if(!this.isConnected||this.isLoadingMore||!this.hasMoreData)return;const e=this.displayedItemsCount;const t=this.filteredData.length;const i=Math.min(this.itemsPerPage,t-e);if(i<=0){this.hasMoreData=false;this.emitInfiniteScrollState();return}this.isLoadingMore=true;this.emitInfiniteScrollState();try{this.loadMoreRequested.emit({currentCount:e,requestedCount:i})}catch(e){console.warn("Failed to emit loadMoreRequested event:",e)}setTimeout((()=>{const a=Math.min(e+i,t,this.maxItems);this.displayedItemsCount=a;this.hasMoreData=a<t&&a<this.maxItems;this.isLoadingMore=false;this.emitInfiniteScrollState();requestAnimationFrame((()=>{this.infiniteScrollManager?.updateTriggerElements()}))}),200)}emitInfiniteScrollState(){if(!this.isConnected)return;try{this.infiniteScrollStateChanged.emit({isLoading:this.isLoadingMore,hasMore:this.hasMoreData,displayedCount:this.displayedItemsCount})}catch(e){console.warn("Failed to emit infiniteScrollStateChanged event:",e)}}renderSearch(){if(!this.searchable)return null;return i("div",{class:"search-input-container"},i("svg",{class:"search-icon",viewBox:"0 0 24 24",fill:"currentColor"},i("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})),i("input",{type:"text",class:"search-input",placeholder:`Search ${this.dataType}...`,value:this.filterState.search,onInput:this.handleSearch}),this.isWorkerProcessing&&i("div",{class:"search-processing"},i("div",{class:"loading-spinner-small"})))}renderFilters(){if(!this.filterable)return null;const e=[];if(this.dataType==="tokens"){e.push(i("label",{class:"filter-checkbox"},i("input",{type:"checkbox",checked:Boolean(this.filterState.showFavorites),onChange:e=>this.handleFilterChange("showFavorites",e.target.checked)}),i("span",{class:"checkbox-label"},"Show Favorites")))}if(this.dataType==="chains"){e.push(i("select",{class:"filter-select",onChange:e=>this.handleFilterChange("typeFilter",e.target.value)},i("option",{value:""},"All Types"),i("option",{value:"EVM"},"EVM"),i("option",{value:"Cosmwasm"},"CosmWasm")))}if(this.dataType==="pools"&&this.walletAddress){e.push(i("label",{class:"filter-checkbox"},i("input",{type:"checkbox",checked:Boolean(this.filterState.showMyPools),onChange:e=>this.handleFilterChange("showMyPools",e.target.checked)}),i("span",{class:"checkbox-label"},"My Pools Only")))}return e.length>0?i("div",{class:"filters-container"},e):null}renderSorting(){if(!this.sortable)return null;const e=this.getSortOptions();return i("select",{class:"sort-select",onChange:this.handleSortChange},e.flatMap((e=>[i("option",{key:`${e.key}_asc`,value:`${e.key}_asc`,selected:this.filterState.sortBy===e.key&&this.filterState.sortOrder==="asc"},e.label," (A-Z)"),i("option",{key:`${e.key}_desc`,value:`${e.key}_desc`,selected:this.filterState.sortBy===e.key&&this.filterState.sortOrder==="desc"},e.label," (Z-A)")])))}getSortOptions(){switch(this.dataType){case"tokens":return[{key:"name",label:"Name"},{key:"price",label:"Price"},{key:"volume",label:"Volume"},{key:"marketCap",label:"Market Cap"}];case"chains":return[{key:"name",label:"Name"},{key:"type",label:"Type"},{key:"chain_id",label:"Chain ID"}];case"pools":return[{key:"apr",label:"APR"},{key:"tvl",label:"TVL"},{key:"volume",label:"Volume"},{key:"fees",label:"Fees"}];default:return[]}}renderStats(){if(!this.showStats)return null;const e=this.getStats();return i("div",{class:"data-stats"},e.map((e=>i("div",{key:e.key,class:"stat-item"},i("div",{class:"stat-label"},e.label),i("div",{class:"stat-value"},e.value)))))}getStats(){const e=this.storeData.length;const t=this.filteredData.length;const i=[{key:"total",label:`Total ${this.dataType}`,value:e.toString()},{key:"filtered",label:"Filtered",value:t.toString()}];if(this.dataType==="tokens"){const e=this.storeData;const t=new Set(e.flatMap((e=>e.chain_uids||[]))).size;i.push({key:"chains",label:"Chains",value:t.toString()})}if((this.enableWorker||this.infiniteScroll)&&this.workerProcessingTime>0){i.push({key:"performance",label:"Processing",value:`${this.workerProcessingTime.toFixed(1)}ms (worker)`})}return i}renderPagination(){if(this.infiniteScroll||this.totalPages<=1)return null;return i("div",{class:"pagination"},i("button",{class:"pagination-btn",onClick:()=>this.handlePageChange(this.currentPage-1),disabled:this.currentPage===1,type:"button"},"Previous"),i("div",{class:"pagination-pages"},Array.from({length:Math.min(this.totalPages,5)},((e,t)=>{const a=t+1;return i("button",{key:a,class:{"pagination-page":true,"pagination-page--active":a===this.currentPage},onClick:()=>this.handlePageChange(a),type:"button"},a)})),this.totalPages>5&&i("span",{class:"pagination-ellipsis"},"...")),i("button",{class:"pagination-btn",onClick:()=>this.handlePageChange(this.currentPage+1),disabled:this.currentPage===this.totalPages,type:"button"},"Next"))}renderInfiniteScrollLoader(){if(!this.infiniteScroll)return null;if(!this.showEndMessage&&!this.isLoadingMore)return null;return i("div",{class:"infinite-scroll-footer"},this.isLoadingMore&&i("div",{class:"infinite-scroll-loading"},i("div",{class:"loading-spinner"}),i("span",null,"Loading more ",this.dataType,"...")),!this.hasMoreData&&this.displayedItemsCount>0&&this.showEndMessage&&i("div",{class:"infinite-scroll-end"},i("span",null,"All ",this.dataType," loaded (",this.displayedItemsCount," of ",this.filteredData.length,")")))}render(){const e=(this.storeLoading||this.loading)&&this.storeData.length===0;const t=this.getPaginatedData();const a=this.itemComponent;return i("div",{key:"fe8b1eb22944c7d09894fd518def02d776dcbf8c",class:"data-list"},this.effectiveCardTitle&&i("div",{key:"b9afd37eb8f0cfe4b9c960ddc02ec6d809e6e5be",class:"data-header"},i("h3",{key:"f43419cbd500f83002d5624d575ca2e676aee244",class:"data-title"},this.effectiveCardTitle,(this.enableWorker||this.infiniteScroll)&&i("span",{key:"37beede6a93092e0cac1c53e0c11fdec2016ff41",class:"worker-badge"},"⚡ Worker",this.infiniteScroll&&!this.enableWorker?" (auto)":""))),(this.searchable||this.filterable||this.sortable)&&i("div",{key:"30d02574fd91ebe72efa7fddac3380a7f809ed6b",class:"data-controls"},this.renderSearch(),this.renderFilters(),this.renderSorting()),this.renderStats(),i("div",{key:"8e9362328288eb3be8dfe87ab75b91c0d57c28fb",class:{"data-content":true,"data-content--infinite":this.infiniteScroll&&!this.useParentScroll,"data-content--parent-scroll":this.infiniteScroll&&this.useParentScroll,"data-content--processing":this.isWorkerProcessing},ref:e=>this.contentElement=e},e||this.isWorkerProcessing?i("div",{class:"loading-state"},i("div",{class:"loading-spinner"}),i("span",null,"Loading ",this.dataType,"...",this.isWorkerProcessing&&" (worker processing)")):t.length===0?i("div",{class:"empty-state"},i("svg",{viewBox:"0 0 64 64",fill:"currentColor"},i("path",{d:"M31.968,0c-1.9626667,28.448-3.552,29.984-32,32c28.448,1.9626667,29.984,3.552,32,32c1.9626667-28.448,3.552-29.984,32-32C35.52,29.984,33.9306667,28.448,31.968,0z"})),i("span",null,"No ",this.dataType," found"),i("button",{class:"clear-filters-btn",onClick:this.clearFilters,type:"button"},"Clear Filters")):i("div",{class:{"data-grid":this.displayMode==="card"||this.displayMode==="grid","data-list-container":this.displayMode==="list-item","data-compact-container":this.displayMode==="compact","data-container--transitioning":this.isTransitioning}},t.map((e=>{const t=this.getStableKey(e);const s=this.getItemProps(e);const o={};if(this.selectable){o.onTokenClick=this.handleItemSelect;o.onChainSelect=this.handleItemSelect;o.onPoolSelect=this.handleItemSelect;o.onItemSelect=this.handleItemSelect}o.onTokenHover=this.handleItemHover;o.onChainHover=this.handleItemHover;o.onPoolHover=this.handleItemHover;o.onItemHover=this.handleItemHover;return i(a,{key:t,class:{"data-item":true,"data-item--updating":this.isTransitioning},...s,...o})}))),this.renderInfiniteScrollLoader()),this.renderPagination())}get el(){return s(this)}static get watchers(){return{dataType:["watchPropsChange"],showFields:["watchPropsChange"],infiniteScroll:["watchPropsChange"]}}};B.style=F;const W=':host{display:block;width:100%;height:100%;font-family:var(--euclid-font-sans)}.demo-playground{display:flex;flex-direction:column;height:100%;background:var(--euclid-surface);border:var(--euclid-border-1) solid var(--euclid-border);border-radius:var(--euclid-radius-xl);overflow:hidden;box-shadow:var(--euclid-shadow-lg)}.component-selector{margin-bottom:var(--euclid-space-6);padding:var(--euclid-space-4);background:var(--euclid-primary-50);border:var(--euclid-border-1) solid var(--euclid-primary-200);border-radius:var(--euclid-radius-lg)}.selector-label{display:flex;flex-direction:column;gap:var(--euclid-space-2)}.selector-title{font-weight:var(--euclid-font-semibold);color:var(--euclid-primary-700);font-size:var(--euclid-text-xs);text-transform:uppercase;letter-spacing:0.05em}.component-dropdown{padding:var(--euclid-space-3);border:var(--euclid-border-1) solid var(--euclid-border);border-radius:var(--euclid-radius-md);background:var(--euclid-surface);color:var(--euclid-text-primary);font-size:var(--euclid-text-sm);font-family:var(--euclid-font-sans);cursor:pointer;transition:var(--euclid-transition-base)}.component-dropdown:focus{outline:none;border-color:var(--euclid-border-focus);box-shadow:var(--euclid-shadow-focus)}.component-dropdown:hover{border-color:var(--euclid-border-hover)}.playground-content{display:flex;flex:1;min-height:0;}@media (max-width: 1024px){.playground-content{flex-direction:column}}.demo-section{flex:1;padding:var(--euclid-space-8);background:var(--euclid-surface);overflow:auto;min-height:0}.demo-section.api-tester-container{overflow:hidden;max-height:100%;min-height:600px;padding:var(--euclid-space-4);}.demo-section.api-tester-container euclid-api-tester{height:100%;max-height:100%}@media (max-width: 1024px){.controls-section{flex:0 0 auto;border-right:none;border-bottom:var(--euclid-border-1) solid var(--euclid-border)}}.controls-section{flex:0 0 400px;background:var(--euclid-surface-secondary);padding:var(--euclid-space-6);border-right:var(--euclid-border-1) solid var(--euclid-border);display:flex;flex-direction:column}.controls-panel{display:flex;flex-direction:column;flex:1;width:100%;min-height:0;}.controls-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--euclid-space-6)}.controls-actions{display:flex;gap:var(--euclid-space-2);align-items:center}.controls-header h3{margin:0;font-size:var(--euclid-text-lg);font-weight:var(--euclid-font-semibold);color:var(--euclid-text-primary)}.code-toggle{background:var(--euclid-interactive-primary);color:var(--euclid-text-inverse);border:none;padding:var(--euclid-space-3);border-radius:var(--euclid-radius-md);font-size:var(--euclid-text-sm);cursor:pointer;transition:var(--euclid-transition-base);display:flex;align-items:center;justify-content:center;min-width:var(--euclid-button-height-base);height:var(--euclid-button-height-base)}.code-toggle svg{width:16px;height:16px}.code-toggle:hover{background:var(--euclid-interactive-primary-hover)}.code-toggle.active{background:var(--euclid-interactive-success)}.reset-button{background:var(--euclid-surface);color:var(--euclid-text-secondary);border:var(--euclid-border-1) solid var(--euclid-border);padding:var(--euclid-space-3);border-radius:var(--euclid-radius-md);font-size:var(--euclid-text-sm);cursor:pointer;transition:var(--euclid-transition-base);display:flex;align-items:center;justify-content:center;min-width:var(--euclid-button-height-base);height:var(--euclid-button-height-base)}.reset-button svg{width:16px;height:16px}.reset-button:hover{border-color:var(--euclid-border-hover);color:var(--euclid-interactive-primary);background:var(--euclid-primary-50)}.code-display{background:var(--euclid-gray-900);color:var(--euclid-gray-100);padding:var(--euclid-space-4);border-radius:var(--euclid-radius-md);margin-bottom:var(--euclid-space-6);font-family:var(--euclid-font-mono);font-size:var(--euclid-text-sm);overflow-x:auto;border:var(--euclid-border-1) solid var(--euclid-gray-700)}.code-display pre{margin:0;white-space:pre-wrap;word-break:break-word}.code-display code{color:var(--euclid-gray-100)}.controls-grid{display:grid;grid-template-columns:1fr;align-content:start;gap:var(--euclid-space-4);flex:1;overflow-y:auto;min-height:0;}.control-item{background:var(--euclid-surface);padding:var(--euclid-space-4);border-radius:var(--euclid-radius-lg);border:var(--euclid-border-1) solid var(--euclid-border);transition:var(--euclid-transition-base);align-self:start;}.control-item:hover{border-color:var(--euclid-border-hover);box-shadow:var(--euclid-shadow-sm)}.control-label{display:flex;flex-direction:column;gap:var(--euclid-space-2);cursor:pointer}.control-name{font-weight:var(--euclid-font-medium);color:var(--euclid-text-primary);font-size:var(--euclid-text-sm);line-height:var(--euclid-leading-snug)}.control-description{font-size:var(--euclid-text-xs);color:var(--euclid-text-secondary);margin-top:var(--euclid-space-1);line-height:var(--euclid-leading-relaxed)}input[type="text"],input[type="number"],select{width:100%;padding:var(--euclid-input-padding-y) var(--euclid-input-padding-x);border:var(--euclid-input-border-width) solid var(--euclid-border);border-radius:var(--euclid-input-border-radius);font-size:var(--euclid-input-font-size);font-family:var(--euclid-font-sans);background:var(--euclid-surface);color:var(--euclid-text-primary);transition:var(--euclid-transition-base);line-height:var(--euclid-input-line-height)}input[type="text"]:focus,input[type="number"]:focus,select:focus{outline:none;border-color:var(--euclid-border-focus);box-shadow:var(--euclid-shadow-focus)}input[type="text"]:hover,input[type="number"]:hover,select:hover{border-color:var(--euclid-border-hover)}input[type="checkbox"]{width:18px;height:18px;border:var(--euclid-border-2) solid var(--euclid-border);border-radius:var(--euclid-radius-base);background:var(--euclid-surface);cursor:pointer;position:relative;appearance:none;transition:var(--euclid-transition-base);flex-shrink:0}input[type="checkbox"]:checked{background:var(--euclid-interactive-primary);border-color:var(--euclid-interactive-primary)}input[type="checkbox"]:checked::after{content:\'✓\';position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);color:var(--euclid-text-inverse);font-size:12px;font-weight:var(--euclid-font-bold)}input[type="checkbox"]:hover{border-color:var(--euclid-border-hover)}input[type="checkbox"]:focus{outline:none;border-color:var(--euclid-border-focus);box-shadow:var(--euclid-shadow-focus)}.control-item:has(input[type="checkbox"]) .control-label{flex-direction:row;align-items:center;gap:var(--euclid-space-3)}.control-item:has(input[type="checkbox"]) .control-text{flex:1;display:flex;flex-direction:column;gap:var(--euclid-space-1)}.control-item:has(input[type="checkbox"]) .control-name{line-height:var(--euclid-leading-snug)}.control-item:has(input[type="checkbox"]) .control-description{margin-top:0}@media (max-width: 768px){.playground-content{grid-template-columns:1fr}.demo-section,.control-item{padding:var(--euclid-space-4)}.controls-section{padding:var(--euclid-space-4)}}.controls-grid::-webkit-scrollbar{width:6px}.controls-grid::-webkit-scrollbar-track{background:#f1f1f1}.controls-grid::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}.controls-grid::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.github-link{padding-top:var(--euclid-space-6);border-top:var(--euclid-border-1) solid var(--euclid-border);flex-shrink:0;}.github-link-anchor{display:flex;align-items:center;gap:var(--euclid-space-2);padding:var(--euclid-space-3);background:var(--euclid-primary-50);border:var(--euclid-border-1) solid var(--euclid-primary-200);border-radius:var(--euclid-radius-lg);text-decoration:none;color:var(--euclid-text-primary);font-size:var(--euclid-text-sm);transition:var(--euclid-transition-base)}.github-link-anchor:hover{background:var(--euclid-primary-100);border-color:var(--euclid-primary-300);transform:translateY(-1px);box-shadow:var(--euclid-shadow-md)}.github-icon{width:18px;height:18px;color:var(--euclid-primary-600);flex-shrink:0}.github-text{font-family:var(--euclid-font-mono);font-weight:var(--euclid-font-medium);color:var(--euclid-text-secondary)}.core-provider-demo{padding:var(--euclid-spacing-lg);display:flex;flex-direction:column;gap:var(--euclid-spacing-lg)}.provider-info{background:var(--euclid-surface-secondary);padding:var(--euclid-spacing-lg);border-radius:var(--euclid-radius-md);border:1px solid var(--euclid-border-default)}.provider-info h3{color:var(--euclid-text-primary);margin:0 0 var(--euclid-spacing-md) 0;font-size:var(--euclid-text-lg);font-weight:var(--euclid-font-semibold)}.provider-info p{color:var(--euclid-text-secondary);margin:0 0 var(--euclid-spacing-lg) 0;line-height:var(--euclid-line-height-relaxed)}.config-summary{background:var(--euclid-surface-primary);padding:var(--euclid-spacing-md);border-radius:var(--euclid-radius-sm);border:1px solid var(--euclid-border-subtle)}.config-summary h4{color:var(--euclid-text-primary);margin:0 0 var(--euclid-spacing-md) 0;font-size:var(--euclid-text-base);font-weight:var(--euclid-font-medium)}.config-details{display:flex;flex-direction:column;gap:var(--euclid-spacing-xs)}.config-details>div{font-family:var(--euclid-font-mono);font-size:var(--euclid-text-sm);color:var(--euclid-text-secondary)}.config-details strong{color:var(--euclid-text-primary);font-weight:var(--euclid-font-medium)}.provider-children{background:var(--euclid-surface-secondary);padding:var(--euclid-spacing-lg);border-radius:var(--euclid-radius-md);border:1px solid var(--euclid-border-default)}.provider-children h4{color:var(--euclid-text-primary);margin:0 0 var(--euclid-spacing-sm) 0;font-size:var(--euclid-text-base);font-weight:var(--euclid-font-medium)}.provider-children p{color:var(--euclid-text-secondary);margin:0 0 var(--euclid-spacing-md) 0;font-size:var(--euclid-text-sm)}.demo-components{border:1px solid var(--euclid-border-subtle);border-radius:var(--euclid-radius-sm);overflow:hidden}';const Q=class{constructor(t){e(this,t);this.selectedDemo="api-tester";this.environment="testnet";this.activeTab="api-tester";this.currentProps={};this.showCode=false;this.componentDemos=[{id:"api-tester",name:"🧪 API Tester",description:"Test and explore all Euclid Protocol API endpoints with live data",category:"Developer Tools",tagName:"euclid-api-tester",defaultProps:{selectedCategory:"all",showImplementedOnly:false},propDefinitions:[{name:"selectedCategory",type:"select",defaultValue:"all",description:"Filter endpoints by category",options:[{value:"all",label:"All Categories"},{value:"Chain",label:"Chain"},{value:"Token",label:"Token"},{value:"Pool",label:"Pool"},{value:"Factory",label:"Factory"},{value:"Router",label:"Router"},{value:"VLP",label:"VLP"},{value:"Virtual Balance",label:"Virtual Balance"},{value:"CosmWasm",label:"CosmWasm"},{value:"Routes",label:"Routes"},{value:"Transactions",label:"Transactions"}]},{name:"showImplementedOnly",type:"boolean",defaultValue:false,description:"Show only implemented endpoints"}]},{id:"data-list-tokens",name:"📋 Data List",description:"Interactive data list with search, filtering, and infinite scroll - supports tokens, pools, and chains",category:"Display",tagName:"euclid-data-list",defaultProps:{dataType:"tokens",displayMode:"list-item",cardTitle:"Available Tokens",itemsPerPage:10,infiniteScroll:true,searchable:true,sortable:true,showStats:true,enableWorker:true,filterable:true,selectable:true,loading:false,maxItems:1e3,infiniteScrollTriggerItems:3,infiniteScrollThreshold:.1,useParentScroll:false,showFields:"",walletAddress:""},propDefinitions:[{name:"dataType",type:"select",defaultValue:"tokens",description:"Type of data to display",options:[{value:"tokens",label:"Tokens"},{value:"pools",label:"Pools"},{value:"chains",label:"Chains"}]},{name:"displayMode",type:"select",defaultValue:"list-item",description:"How to display the items",options:[{value:"card",label:"Card View"},{value:"list-item",label:"List Item"},{value:"compact",label:"Compact"}]},{name:"cardTitle",type:"string",defaultValue:"Available Tokens",description:"Title displayed at the top of the component"},{name:"itemsPerPage",type:"number",defaultValue:10,description:"Number of items per page",min:1,max:100},{name:"infiniteScroll",type:"boolean",defaultValue:true,description:"Enable infinite scrolling instead of pagination"},{name:"searchable",type:"boolean",defaultValue:true,description:"Show search input"},{name:"sortable",type:"boolean",defaultValue:true,description:"Enable sorting controls"},{name:"filterable",type:"boolean",defaultValue:true,description:"Enable filtering options"},{name:"showStats",type:"boolean",defaultValue:true,description:"Show statistics and counts"},{name:"enableWorker",type:"boolean",defaultValue:true,description:"Use web worker for data processing"},{name:"selectable",type:"boolean",defaultValue:true,description:"Allow item selection"},{name:"loading",type:"boolean",defaultValue:false,description:"Show loading state"},{name:"useParentScroll",type:"boolean",defaultValue:false,description:"Use parent element for scroll detection"},{name:"maxItems",type:"number",defaultValue:1e3,description:"Maximum number of items to display",min:1,max:1e4},{name:"infiniteScrollTriggerItems",type:"number",defaultValue:3,description:"Items from bottom to trigger load more",min:1,max:20}]},{id:"swap-card",name:"🔄 Token Swap",description:"Token swap interface with advanced options",category:"Trading",tagName:"euclid-swap-card",defaultProps:{cardTitle:"Swap Tokens",showAdvanced:true,loading:false,disabled:false,walletAddress:"",defaultSlippage:.5},propDefinitions:[{name:"cardTitle",type:"string",defaultValue:"Swap Tokens",description:"Title of the swap card"},{name:"showAdvanced",type:"boolean",defaultValue:true,description:"Show advanced trading options"},{name:"loading",type:"boolean",defaultValue:false,description:"Show loading state"},{name:"disabled",type:"boolean",defaultValue:false,description:"Disable the swap interface"},{name:"walletAddress",type:"string",defaultValue:"",description:"Connected wallet address"},{name:"defaultSlippage",type:"number",defaultValue:.5,description:"Default slippage tolerance",min:.1,max:10}]},{id:"liquidity-card",name:"💧 Liquidity Pool",description:"Add/remove liquidity interface",category:"Trading",tagName:"euclid-liquidity-card",defaultProps:{cardTitle:"Manage Liquidity",mode:"add",loading:false,disabled:false,walletAddress:"",defaultSlippage:.5},propDefinitions:[{name:"cardTitle",type:"string",defaultValue:"Manage Liquidity",description:"Title of the liquidity card"},{name:"mode",type:"select",defaultValue:"add",description:"Liquidity operation mode",options:[{value:"add",label:"Add Liquidity"},{value:"remove",label:"Remove Liquidity"}]},{name:"loading",type:"boolean",defaultValue:false,description:"Show loading state"},{name:"disabled",type:"boolean",defaultValue:false,description:"Disable the liquidity interface"},{name:"walletAddress",type:"string",defaultValue:"",description:"Connected wallet address"},{name:"defaultSlippage",type:"number",defaultValue:.5,description:"Default slippage tolerance",min:.1,max:10}]},{id:"portfolio",name:"🌐 Portfolio",description:"Multi-chain portfolio tracking with connected and custom wallets",category:"Portfolio",tagName:"euclid-portfolio",defaultProps:{cardTitle:"Portfolio",walletAddress:"",customChainUID:"osmosis-1",includeCustomWallets:true,autoRefresh:true,refreshIntervalMs:6e4,showAnalytics:true},propDefinitions:[{name:"cardTitle",type:"string",defaultValue:"Portfolio",description:"Title of the portfolio card"},{name:"walletAddress",type:"string",defaultValue:"",description:"Custom wallet addresses (comma-separated for multiple)"},{name:"customChainUID",type:"select",defaultValue:"osmosis-1",description:"Chain for custom wallet addresses",options:[{value:"osmosis-1",label:"Osmosis"},{value:"cosmoshub-4",label:"Cosmos Hub"},{value:"ethereum",label:"Ethereum"},{value:"polygon",label:"Polygon"}]},{name:"includeCustomWallets",type:"boolean",defaultValue:true,description:"Include custom wallet addresses"},{name:"autoRefresh",type:"boolean",defaultValue:true,description:"Automatically refresh portfolio data"},{name:"refreshIntervalMs",type:"number",defaultValue:6e4,description:"Auto-refresh interval in milliseconds"},{name:"showAnalytics",type:"boolean",defaultValue:true,description:"Show analytics tab"}]},{id:"address-book",name:"📇 Address Book",description:"Manage and organize saved wallet addresses across multiple chains",category:"Wallet",tagName:"euclid-address-book",defaultProps:{},propDefinitions:[]}]}onSelectedDemoChange(e){this.activeTab=e;this.saveActiveTabToStorage();this.initializeProps()}componentWillLoad(){this.activeTab=this.loadActiveTabFromStorage();this.initializeProps()}getStorageKey(e){return`euclid-demo-props-${e}`}getActiveTabStorageKey(){return"euclid-demo-active-tab"}saveActiveTabToStorage(){try{localStorage.setItem(this.getActiveTabStorageKey(),this.activeTab)}catch(e){console.warn("Failed to save active tab to localStorage:",e)}}loadActiveTabFromStorage(){try{const e=localStorage.getItem(this.getActiveTabStorageKey());if(e&&this.componentDemos.find((t=>t.id===e))){return e}}catch(e){console.warn("Failed to load active tab from localStorage:",e)}return this.selectedDemo||this.componentDemos[0]?.id||"api-tester"}savePropsToStorage(){try{const e=this.getStorageKey(this.activeTab);localStorage.setItem(e,JSON.stringify(this.currentProps))}catch(e){console.warn("Failed to save props to localStorage:",e)}}loadPropsFromStorage(e){try{const t=this.getStorageKey(e.id);const i=localStorage.getItem(t);if(i){const t=JSON.parse(i);return{...e.defaultProps,...t}}}catch(e){console.warn("Failed to load props from localStorage:",e)}return{...e.defaultProps}}initializeProps(){const e=this.componentDemos.find((e=>e.id===this.activeTab));if(e){this.currentProps=this.loadPropsFromStorage(e)}}getCurrentDemo(){return this.componentDemos.find((e=>e.id===this.activeTab))}updateProp(e,t){this.currentProps={...this.currentProps,[e]:t};this.savePropsToStorage()}resetToDefaults(){const e=this.getCurrentDemo();if(e){this.currentProps={...e.defaultProps};this.savePropsToStorage()}}generateComponentCode(){const e=this.getCurrentDemo();if(!e)return"";const t=Object.entries(this.currentProps).filter((([e,t])=>t!==""&&t!==null&&t!==undefined)).map((([e,t])=>{if(typeof t==="boolean"){return t?e:`${e}="false"`}return`${e}="${t}"`})).join("\n    ");return`<${e.tagName}\n    ${t}>\n</${e.tagName}>`}renderControlsPanel(){const e=this.getCurrentDemo();if(!e)return null;return i("div",{class:"controls-panel"},i("div",{class:"component-selector"},i("label",{class:"selector-label"},i("span",{class:"selector-title"},"Component"),i("select",{class:"component-dropdown",onChange:e=>{this.activeTab=e.target.value;this.saveActiveTabToStorage();this.initializeProps()}},this.componentDemos.map((e=>i("option",{value:e.id,selected:this.activeTab===e.id},e.name)))))),i("div",{class:"controls-header"},i("h3",null,"Component Properties"),i("div",{class:"controls-actions"},i("button",{class:"reset-button",onClick:()=>this.resetToDefaults(),title:"Reset to default values"},i("svg",{viewBox:"0 0 24 24",fill:"currentColor"},i("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}))),i("button",{class:`code-toggle ${this.showCode?"active":""}`,onClick:()=>this.showCode=!this.showCode,title:this.showCode?"Hide Code":"Show Code"},i("svg",{viewBox:"0 0 24 24",fill:"currentColor"},i("path",{d:"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0L19.2 12l-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"}))))),this.showCode&&i("div",{class:"code-display"},i("pre",null,i("code",null,this.generateComponentCode()))),i("div",{class:"controls-grid"},e.propDefinitions.map((e=>this.renderControl(e)))),i("div",{class:"github-link"},i("a",{href:"https://github.com/monkeyscanjump/euclid",target:"_blank",rel:"noopener noreferrer",class:"github-link-anchor"},i("svg",{class:"github-icon",viewBox:"0 0 24 24",fill:"currentColor"},i("path",{d:"M12 0C5.374 0 0 5.373 0 12 0 17.302 3.438 21.8 8.207 23.387c.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"})),i("span",{class:"github-text"},"/ monkeyscanjump/euclid"))))}renderControl(e){const t=this.currentProps[e.name];switch(e.type){case"boolean":return i("div",{class:"control-item"},i("label",{class:"control-label"},i("input",{type:"checkbox",checked:Boolean(t),onChange:t=>this.updateProp(e.name,t.target.checked)}),i("div",{class:"control-text"},i("span",{class:"control-name"},e.name),e.description&&i("div",{class:"control-description"},e.description))));case"number":return i("div",{class:"control-item"},i("label",{class:"control-label"},i("span",{class:"control-name"},e.name),i("input",{type:"number",min:e.min,max:e.max,value:String(t),onChange:t=>this.updateProp(e.name,parseInt(t.target.value))})),e.description&&i("div",{class:"control-description"},e.description));case"string":return i("div",{class:"control-item"},i("label",{class:"control-label"},i("span",{class:"control-name"},e.name),i("input",{type:"text",value:String(t),onChange:t=>this.updateProp(e.name,t.target.value)})),e.description&&i("div",{class:"control-description"},e.description));case"select":return i("div",{class:"control-item"},i("label",{class:"control-label"},i("span",{class:"control-name"},e.name),i("select",{onChange:t=>this.updateProp(e.name,t.target.value)},e.options?.map((e=>i("option",{value:String(e.value),selected:t===e.value},e.label))))),e.description&&i("div",{class:"control-description"},e.description));default:return null}}renderDemo(){const e=this.getCurrentDemo();if(!e)return null;const t=this.currentProps;let a;switch(e.tagName){case"euclid-data-list":a=i("euclid-data-list",{key:`${e.id}-${JSON.stringify(t)}`,dataType:t.dataType||"tokens",displayMode:t.displayMode||"list-item",cardTitle:String(t.cardTitle||"Available Tokens"),itemsPerPage:Number(t.itemsPerPage||10),infiniteScroll:Boolean(t.infiniteScroll),searchable:Boolean(t.searchable),sortable:Boolean(t.sortable),filterable:Boolean(t.filterable),showStats:Boolean(t.showStats),enableWorker:Boolean(t.enableWorker),selectable:Boolean(t.selectable),loading:Boolean(t.loading),useParentScroll:Boolean(t.useParentScroll),maxItems:Number(t.maxItems||1e3),infiniteScrollTriggerItems:Number(t.infiniteScrollTriggerItems||3),showFields:String(t.showFields||""),walletAddress:String(t.walletAddress||"")});break;case"euclid-swap-card":a=i("euclid-swap-card",{key:`${e.id}-${JSON.stringify(t)}`,cardTitle:String(t.cardTitle||"Swap Tokens"),showAdvanced:Boolean(t.showAdvanced),loading:Boolean(t.loading),disabled:Boolean(t.disabled),walletAddress:String(t.walletAddress||"")});break;case"euclid-liquidity-card":a=i("euclid-liquidity-card",{key:`${e.id}-${JSON.stringify(t)}`,cardTitle:String(t.cardTitle||"Manage Liquidity"),mode:t.mode||"add",loading:Boolean(t.loading),disabled:Boolean(t.disabled),walletAddress:String(t.walletAddress||"")});break;case"euclid-portfolio":a=i("euclid-portfolio",{key:`${e.id}-${JSON.stringify(t)}`,cardTitle:String(t.cardTitle||"Portfolio"),walletAddress:String(t.walletAddress||""),customChainUID:String(t.customChainUID||"osmosis-1"),includeCustomWallets:Boolean(t.includeCustomWallets??true),autoRefresh:Boolean(t.autoRefresh??true),refreshIntervalMs:Number(t.refreshIntervalMs)||6e4});break;case"euclid-address-book":a=i("euclid-address-book",null);break;case"euclid-api-tester":a=i("euclid-api-tester",{key:`${e.id}-${JSON.stringify(t)}`});break;default:a=i("div",null,"Component not found")}return a}render(){const e=this.activeTab==="api-tester";const t=e?"demo-section api-tester-container":"demo-section";return i("div",{key:"533ce6f5b3a5fd4b7db04e222d3a716a5a2a8632",class:"demo-playground"},i("div",{key:"f1228cf1f1db5238f22419f27bc923eb1d383a3d",class:"playground-content"},i("div",{key:"a79292b37ca98807862c8d31e4fb28b734400503",class:"controls-section"},this.renderControlsPanel()),i("div",{key:"a28f6724ea5a1a8aa9171d58419cda3023f76b56",class:t},i("euclid-config-provider",{key:"ae1dd333a9dfe19147dd000c367aca4c466a7b89",environment:this.environment},this.renderDemo()))))}get el(){return s(this)}static get watchers(){return{selectedDemo:["onSelectedDemoChange"]}}};Q.style=W;const Y=":host{display:contents}.liquidity-card{background:var(--euclid-surface);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-2xl);padding:var(--euclid-spacing-6);max-width:480px;width:100%;box-shadow:var(--euclid-shadow-xl);display:flex;flex-direction:column;gap:var(--euclid-spacing-6)}.liquidity-header{display:flex;justify-content:space-between;align-items:center}.liquidity-title{font-size:var(--euclid-text-size-xl);font-weight:var(--euclid-font-weight-semibold);color:var(--euclid-text-primary);margin:0}.mode-toggle{display:flex;background:var(--euclid-surface-secondary);border-radius:var(--euclid-radius-lg);padding:var(--euclid-spacing-1)}.mode-button{padding:var(--euclid-spacing-2) var(--euclid-spacing-4);border:none;background:transparent;color:var(--euclid-text-secondary);font-size:var(--euclid-text-size-sm);font-weight:var(--euclid-font-weight-medium);cursor:pointer;border-radius:var(--euclid-radius-md);transition:all var(--euclid-transition-duration-fast)}.mode-button--active{background:var(--euclid-surface);color:var(--euclid-text-primary);box-shadow:var(--euclid-shadow-sm)}.mode-button:hover:not(.mode-button--active){color:var(--euclid-text-primary)}.pool-section{display:flex;flex-direction:column;gap:var(--euclid-spacing-4)}.section-header{display:flex;justify-content:space-between;align-items:center}.section-label{font-size:var(--euclid-text-size-sm);font-weight:var(--euclid-font-weight-medium);color:var(--euclid-text-secondary)}.pool-selector{cursor:pointer}.pool-selector:hover{opacity:0.8}.selected-pool{display:flex;align-items:center;gap:var(--euclid-spacing-4);padding:var(--euclid-spacing-4);border:2px solid var(--euclid-border);border-radius:var(--euclid-radius-xl);background:var(--euclid-surface);transition:all var(--euclid-transition-duration-fast)}.select-pool-button{display:flex;align-items:center;justify-content:center;gap:var(--euclid-spacing-2);padding:var(--euclid-spacing-4) var(--euclid-spacing-6);border:2px dashed var(--euclid-border);border-radius:var(--euclid-radius-xl);background:var(--euclid-surface-secondary);color:var(--euclid-text-secondary);font-size:var(--euclid-text-size-base);font-weight:var(--euclid-font-weight-medium);cursor:pointer;transition:all var(--euclid-transition-duration-fast)}.select-pool-button:hover{border-color:var(--euclid-border-hover)}.pool-tokens{display:flex;align-items:center}.token-pair{display:flex;align-items:center}.token-logo{width:2rem;height:2rem;border-radius:50%;background:var(--euclid-surface-secondary);border:2px solid var(--euclid-surface)}.token-logo--overlap{margin-left:-0.5rem}.pool-info{display:flex;flex-direction:column;gap:var(--euclid-spacing-1)}.pool-name{font-size:var(--euclid-text-size-base);font-weight:var(--euclid-font-weight-semibold);color:var(--euclid-text-primary)}.pool-fee{font-size:var(--euclid-text-size-sm);color:var(--euclid-text-secondary)}.pool-stats{display:flex;gap:var(--euclid-spacing-6)}.stat{display:flex;flex-direction:column;gap:var(--euclid-spacing-1)}.stat-label{font-size:var(--euclid-text-size-xs);color:var(--euclid-text-muted)}.stat-value{font-size:var(--euclid-text-size-sm);font-weight:var(--euclid-font-weight-medium);color:var(--euclid-text-primary)}.position-info{padding:var(--euclid-spacing-4);background:var(--euclid-surface-secondary);border-radius:var(--euclid-radius-xl)}.position-header{margin-bottom:var(--euclid-spacing-3)}.position-label{font-size:var(--euclid-text-size-sm);font-weight:var(--euclid-font-weight-medium);color:var(--euclid-text-secondary)}.position-details{display:flex;flex-direction:column;gap:var(--euclid-spacing-3)}.position-row{display:flex;justify-content:space-between;align-items:center}.position-item-label{font-size:var(--euclid-text-size-sm);color:var(--euclid-text-secondary)}.position-item-value{font-size:var(--euclid-text-size-sm);font-weight:var(--euclid-font-weight-medium);color:var(--euclid-text-primary)}.liquidity-inputs{display:flex;flex-direction:column;gap:var(--euclid-spacing-4)}.token-input-section{position:relative}.input-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--euclid-spacing-2)}.input-label{font-size:var(--euclid-text-size-sm);color:var(--euclid-text-secondary)}.balance-label{font-size:var(--euclid-text-size-sm);color:var(--euclid-text-muted);cursor:pointer;transition:color var(--euclid-transition-duration-fast)}.balance-label:hover{color:var(--euclid-text-secondary)}.plus-icon{position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);z-index:10;width:2rem;height:2rem;background:var(--euclid-surface);border:2px solid var(--euclid-border);border-radius:50%;display:flex;align-items:center;justify-content:center;color:var(--euclid-text-secondary)}.plus-icon svg{width:1rem;height:1rem}.token-selector{cursor:pointer}.token-selector:hover{opacity:0.8}.selected-token{display:flex;align-items:center;gap:var(--euclid-spacing-3);padding:var(--euclid-spacing-4);border:2px solid var(--euclid-border);border-radius:var(--euclid-radius-xl);background:var(--euclid-surface)}.select-token-button{display:flex;align-items:center;justify-content:center;gap:var(--euclid-spacing-2);padding:var(--euclid-spacing-4) var(--euclid-spacing-6);border:2px dashed var(--euclid-border);border-radius:var(--euclid-radius-xl);background:var(--euclid-surface-secondary);color:var(--euclid-text-secondary);font-size:var(--euclid-text-size-base);font-weight:var(--euclid-font-weight-medium);cursor:pointer;transition:all var(--euclid-transition-duration-fast)}.select-token-button:hover{border-color:var(--euclid-border-hover)}.token-info{display:flex;flex-direction:column;gap:var(--euclid-spacing-1);flex:1}.token-symbol{font-size:var(--euclid-text-size-base);font-weight:var(--euclid-font-weight-semibold);color:var(--euclid-text-primary)}.token-name{font-size:var(--euclid-text-size-sm);color:var(--euclid-text-secondary)}.dropdown-arrow{color:var(--euclid-text-muted);transition:transform var(--euclid-transition-duration-fast)}.dropdown-arrow--open{transform:rotate(180deg)}.remove-liquidity{display:flex;flex-direction:column;gap:var(--euclid-spacing-4)}.percentage-section{display:flex;flex-direction:column;gap:var(--euclid-spacing-3)}.percentage-label{font-size:var(--euclid-text-size-sm);font-weight:var(--euclid-font-weight-medium);color:var(--euclid-text-secondary)}.percentage-buttons{display:flex;gap:var(--euclid-spacing-2)}.percentage-btn{flex:1;padding:var(--euclid-spacing-3);border:2px solid var(--euclid-border);border-radius:var(--euclid-radius-lg);background:var(--euclid-surface);color:var(--euclid-text-secondary);font-size:var(--euclid-text-size-sm);font-weight:var(--euclid-font-weight-medium);cursor:pointer;transition:all var(--euclid-transition-duration-fast)}.percentage-btn:hover{border-color:var(--euclid-border-hover);color:var(--euclid-text-primary)}.percentage-btn--active{border-color:var(--euclid-interactive-primary);background:var(--euclid-primary-50);color:var(--euclid-primary-700)}.lp-token-display{display:flex;align-items:center;gap:var(--euclid-spacing-3);padding:var(--euclid-spacing-4);border:2px solid var(--euclid-border);border-radius:var(--euclid-radius-xl);background:var(--euclid-surface-secondary)}.lp-token-info{display:flex;flex-direction:column;gap:var(--euclid-spacing-1);flex:1}.lp-symbol{font-size:var(--euclid-text-size-base);font-weight:var(--euclid-font-weight-semibold);color:var(--euclid-text-primary)}.quote-info{padding:var(--euclid-spacing-4);background:var(--euclid-surface-secondary);border-radius:var(--euclid-radius-xl)}.quote-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--euclid-spacing-2)}.quote-row:last-child{margin-bottom:0}.quote-label{font-size:var(--euclid-text-size-sm);color:var(--euclid-text-secondary)}.quote-value{font-size:var(--euclid-text-size-sm);font-weight:var(--euclid-font-weight-medium);color:var(--euclid-text-primary)}.quote-value--warning{color:var(--euclid-warning-600)}.quote-value--danger{color:var(--euclid-danger-600)}.advanced-section{border-top:1px solid var(--euclid-border);padding-top:var(--euclid-spacing-4)}.advanced-toggle{display:flex;align-items:center;gap:var(--euclid-spacing-2);padding:var(--euclid-spacing-2) 0;background:transparent;border:none;color:var(--euclid-text-secondary);font-size:var(--euclid-text-size-sm);cursor:pointer;transition:color var(--euclid-transition-duration-fast)}.advanced-toggle:hover{color:var(--euclid-text-primary)}.advanced-panel{margin-top:var(--euclid-spacing-4);padding:var(--euclid-spacing-4);background:var(--euclid-surface-secondary);border-radius:var(--euclid-radius-lg)}.setting-item{display:flex;flex-direction:column;gap:var(--euclid-spacing-2)}.setting-label{font-size:var(--euclid-text-size-sm);font-weight:var(--euclid-font-weight-medium);color:var(--euclid-text-secondary)}.slippage-controls{display:flex;gap:var(--euclid-spacing-2);align-items:center}.slippage-btn{padding:var(--euclid-spacing-2) var(--euclid-spacing-3);border:2px solid var(--euclid-border);border-radius:var(--euclid-radius-md);background:var(--euclid-surface);color:var(--euclid-text-secondary);font-size:var(--euclid-text-size-sm);cursor:pointer;transition:all var(--euclid-transition-duration-fast)}.slippage-btn:hover{border-color:var(--euclid-border-hover);color:var(--euclid-text-primary)}.slippage-btn--active{border-color:var(--euclid-interactive-primary);background:var(--euclid-primary-50);color:var(--euclid-primary-700)}.slippage-input{padding:var(--euclid-spacing-2) var(--euclid-spacing-3);border:2px solid var(--euclid-border);border-radius:var(--euclid-radius-md);background:var(--euclid-surface);color:var(--euclid-text-primary);font-size:var(--euclid-text-size-sm);width:80px;text-align:center}.slippage-input:focus{outline:none;border-color:var(--euclid-border-focus);box-shadow:0 0 0 3px rgba(37, 99, 235, 0.1)}@media (max-width: 480px){.liquidity-card{padding:var(--euclid-spacing-4);gap:var(--euclid-spacing-4)}.liquidity-header{flex-direction:column;gap:var(--euclid-spacing-3);align-items:flex-start}.mode-toggle{width:100%}.mode-button{flex:1;text-align:center}.pool-stats{flex-direction:column;gap:var(--euclid-spacing-3)}.percentage-buttons{flex-wrap:wrap}.percentage-btn{min-width:calc(50% - var(--euclid-spacing-1))}.slippage-controls{flex-wrap:wrap;gap:var(--euclid-spacing-2)}.selected-pool,.selected-token,.lp-token-display{flex-direction:column;align-items:flex-start;gap:var(--euclid-spacing-2)}.pool-tokens{order:-1}.token-pair{gap:var(--euclid-spacing-2)}.token-logo--overlap{margin-left:0}.pool-info,.token-info,.lp-token-info{width:100%}}@media (prefers-reduced-motion: reduce){.mode-button,.pool-selector,.token-selector,.percentage-btn,.slippage-btn{transition:none}}.token-selector:focus-within,.pool-selector:focus-within{outline:2px solid var(--euclid-border-focus);outline-offset:2px}.mode-button:focus{outline:2px solid var(--euclid-border-focus);outline-offset:2px}.percentage-btn:focus,.slippage-btn:focus{outline:2px solid var(--euclid-border-focus);outline-offset:2px}.quote-info.loading{position:relative;pointer-events:none}.quote-info.loading::after{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);width:1.5rem;height:1.5rem;border:2px solid var(--euclid-border);border-top:2px solid var(--euclid-interactive-primary);border-radius:50%;animation:euclid-spin 1s linear infinite}@media (prefers-contrast: high){.liquidity-card,.selected-pool,.selected-token,.lp-token-display,.position-info,.quote-info,.advanced-panel{border-width:2px;border-color:var(--euclid-text-primary)}.mode-button--active,.percentage-btn--active,.slippage-btn--active{border-color:var(--euclid-text-primary);background:var(--euclid-text-primary);color:var(--euclid-surface)}}";const V=class{constructor(i){e(this,i);this.liquidityAdded=t(this,"liquidityAdded");this.liquidityRemoved=t(this,"liquidityRemoved");this.poolSelected=t(this,"poolSelected");this.quoteRequested=t(this,"quoteRequested");this.tokens=[];this.pools=[];this.positions=[];this.storePools=[];this.storeTokens=[];this.storeLoading=false;this.selectedStorePool=null;this.selectedPool=null;this.mode="add";this.tokenAAmount="";this.tokenBAmount="";this.lpTokenAmount="";this.loading=false;this.disabled=false;this.walletAddress="";this.cardTitle="Manage Liquidity";this.isPoolSelectorOpen=false;this.currentQuote=null;this.removeQuote=null;this.isQuoting=false;this.slippage=.5;this.isAdvancedOpen=false;this.lpPercentage=0;this.quoteTimer=null;this.handleModeChange=e=>{this.mode=e;this.resetAmounts();this.currentQuote=null;this.removeQuote=null};this.resetAmounts=()=>{this.tokenAAmount="";this.tokenBAmount="";this.lpTokenAmount="";this.lpPercentage=0};this.openPoolSelector=()=>{this.isPoolSelectorOpen=true};this.selectStorePool=e=>{this.selectedStorePool=e;this.isPoolSelectorOpen=false;this.resetAmounts();this.poolSelected.emit(e);console.log("🎯 Pool selected:",{poolId:e.pool_id,token1:e.token_1,token2:e.token_2,totalLiquidity:e.total_liquidity,apr:e.apr})};this.handleMaxClick=e=>{if(e==="tokenA"&&this.selectedPool?.tokenA.balance){this.tokenAAmount=this.selectedPool.tokenA.balance;this.calculateTokenBFromA()}else if(e==="tokenB"&&this.selectedPool?.tokenB.balance){this.tokenBAmount=this.selectedPool.tokenB.balance;this.calculateTokenAFromB()}else if(e==="lp"){const e=this.getUserPosition();if(e){this.lpTokenAmount=e.lpTokenBalance;this.startQuoteTimer()}}};this.handlePercentageClick=e=>{this.lpPercentage=e;const t=this.getUserPosition();if(t){const i=(parseFloat(t.lpTokenBalance)*e/100).toFixed(6);this.lpTokenAmount=i;this.startQuoteTimer()}};this.handleLiquidity=()=>{if(!this.isWalletConnectedForLiquidity()){const e=this.getFirstDisconnectedChain();r.openWalletModal(e);return}if(!this.selectedPool)return;const e={pool_id:this.selectedPool.address,id:this.selectedPool.address,token_1:this.selectedPool.tokenA.address,token_2:this.selectedPool.tokenB.address,token1:this.selectedPool.tokenA.address,token2:this.selectedPool.tokenB.address,total_liquidity:this.selectedPool.totalSupply};l.setSelectedPool(e);if(this.mode==="add"&&this.currentQuote){l.setToken1Amount(this.tokenAAmount);l.setToken2Amount(this.tokenBAmount);g(b.LIQUIDITY.ADD_REQUEST);this.liquidityAdded.emit({pool:this.selectedPool,tokenAAmount:this.tokenAAmount,tokenBAmount:this.tokenBAmount,expectedLpTokens:this.currentQuote.lpTokensReceived,slippage:this.slippage})}else if(this.mode==="remove"&&this.removeQuote){g(b.LIQUIDITY.REMOVE_REQUEST,{poolId:this.selectedPool.address,lpTokenAmount:this.lpTokenAmount});this.liquidityRemoved.emit({pool:this.selectedPool,lpTokenAmount:this.lpTokenAmount,expectedTokenA:this.removeQuote.tokenAReceived,expectedTokenB:this.removeQuote.tokenBReceived,slippage:this.slippage})}}}async componentWillLoad(){this.syncWithStore();h.onChange("pools",(()=>{this.syncWithStore()}));h.onChange("tokens",(()=>{this.syncWithStore()}))}componentDidLoad(){this.startQuoteTimer()}disconnectedCallback(){if(this.quoteTimer){clearTimeout(this.quoteTimer)}}syncWithStore(){this.storePools=h.state.pools.length>0?h.state.pools:[];this.storeTokens=h.state.tokens.length>0?h.state.tokens:[];this.storeLoading=h.state.loading;console.log("🔄 Liquidity card store sync:",{storePools:this.storePools.length,storeTokens:this.storeTokens.length,storeLoading:this.storeLoading})}handleInputChange(e){const t=e.target.id;if(t==="token-a-input"){this.tokenAAmount=e.detail.value;this.calculateTokenBFromA()}else if(t==="token-b-input"){this.tokenBAmount=e.detail.value;this.calculateTokenAFromB()}else if(t==="lp-token-input"){this.lpTokenAmount=e.detail.value;this.startQuoteTimer()}}handleModalClose(){this.isPoolSelectorOpen=false}calculateTokenBFromA(){if(!this.selectedPool||!this.tokenAAmount||parseFloat(this.tokenAAmount)<=0){this.tokenBAmount="";return}const e=this.selectedPool;const t=parseFloat(e.reserveA);const i=parseFloat(e.reserveB);const a=parseFloat(this.tokenAAmount);const s=a*i/t;this.tokenBAmount=s.toFixed(6);this.startQuoteTimer()}calculateTokenAFromB(){if(!this.selectedPool||!this.tokenBAmount||parseFloat(this.tokenBAmount)<=0){this.tokenAAmount="";return}const e=this.selectedPool;const t=parseFloat(e.reserveA);const i=parseFloat(e.reserveB);const a=parseFloat(this.tokenBAmount);const s=a*t/i;this.tokenAAmount=s.toFixed(6);this.startQuoteTimer()}startQuoteTimer(){if(this.quoteTimer){clearTimeout(this.quoteTimer)}if(this.shouldRequestQuote()){this.quoteTimer=setTimeout((()=>{this.requestQuote()}),800)}else{this.currentQuote=null;this.removeQuote=null}}shouldRequestQuote(){if(!this.selectedPool)return false;if(this.mode==="add"){return!!(this.tokenAAmount&&this.tokenBAmount&&parseFloat(this.tokenAAmount)>0&&parseFloat(this.tokenBAmount)>0)}else{return!!(this.lpTokenAmount&&parseFloat(this.lpTokenAmount)>0)}}async requestQuote(){if(!this.selectedPool)return;this.isQuoting=true;const e={pool_id:this.selectedPool.address,id:this.selectedPool.address,token_1:this.selectedPool.tokenA.address,token_2:this.selectedPool.tokenB.address,token1:this.selectedPool.tokenA.address,token2:this.selectedPool.tokenB.address,total_liquidity:this.selectedPool.totalSupply};this.quoteRequested.emit({pool:e,tokenAAmount:this.mode==="add"?this.tokenAAmount:undefined,tokenBAmount:this.mode==="add"?this.tokenBAmount:undefined,lpTokenAmount:this.mode==="remove"?this.lpTokenAmount:undefined,mode:this.mode});setTimeout((()=>{if(this.selectedPool){if(this.mode==="add"&&this.tokenAAmount&&this.tokenBAmount){const e=this.selectedPool;const t=parseFloat(e.totalSupply);const i=parseFloat(e.reserveA);const a=parseFloat(this.tokenAAmount);const s=t>0?a/i*t:Math.sqrt(parseFloat(this.tokenAAmount)*parseFloat(this.tokenBAmount));this.currentQuote={tokenAAmount:this.tokenAAmount,tokenBAmount:this.tokenBAmount,lpTokensReceived:s.toFixed(6),shareOfPool:s/(t+s)*100,priceImpact:Math.random()*.5,minimumLpReceived:(s*(1-this.slippage/100)).toFixed(6)}}else if(this.mode==="remove"&&this.lpTokenAmount){const e=this.selectedPool;const t=parseFloat(e.totalSupply);const i=parseFloat(this.lpTokenAmount);const a=i/t*100;const s=i/t*parseFloat(e.reserveA);const o=i/t*parseFloat(e.reserveB);this.removeQuote={lpTokenAmount:this.lpTokenAmount,tokenAReceived:s.toFixed(6),tokenBReceived:o.toFixed(6),shareRemoved:a,minimumTokenAReceived:(s*(1-this.slippage/100)).toFixed(6),minimumTokenBReceived:(o*(1-this.slippage/100)).toFixed(6)}}}this.isQuoting=false}),1e3)}getUserPosition(){if(!this.selectedPool)return null;return this.positions.find((e=>e.poolAddress===this.selectedPool.address))||null}getFirstDisconnectedChain(){if(!this.selectedPool)return"ethereum";const e=o.isWalletConnected(this.selectedPool.tokenA.chainUID);if(!e)return this.selectedPool.tokenA.chainUID;return this.selectedPool.tokenB.chainUID}canExecute(){if(!this.selectedPool||!this.walletAddress||this.loading||this.disabled||this.isQuoting){return false}if(this.mode==="add"){return!!(this.currentQuote&&this.tokenAAmount&&this.tokenBAmount)}else{return!!(this.removeQuote&&this.lpTokenAmount)}}getButtonText(){if(!this.isWalletConnectedForLiquidity()){const e=this.getRequiredChainName();return`Connect ${e}`}if(!this.selectedPool)return"Select Pool";if(this.mode==="add"){if(!this.tokenAAmount||!this.tokenBAmount)return"Enter Amounts";if(this.isQuoting)return"Getting Quote...";if(this.loading)return"Adding Liquidity...";return"Add Liquidity"}else{if(!this.lpTokenAmount)return"Enter LP Amount";if(this.isQuoting)return"Getting Quote...";if(this.loading)return"Removing Liquidity...";return"Remove Liquidity"}}isWalletConnectedForLiquidity(){if(!this.selectedPool)return false;const e=o.isWalletConnected(this.selectedPool.tokenA.chainUID);const t=o.isWalletConnected(this.selectedPool.tokenB.chainUID);return e&&t}getRequiredChainName(){if(!this.selectedPool)return"Wallet";const e=o.isWalletConnected(this.selectedPool.tokenA.chainUID);const t=o.isWalletConnected(this.selectedPool.tokenB.chainUID);if(!e&&!t){return"Wallets"}else if(!e){return this.getChainDisplayName(this.selectedPool.tokenA.chainUID)}else if(!t){return this.getChainDisplayName(this.selectedPool.tokenB.chainUID)}return"Wallet"}getChainDisplayName(e){const t={ethereum:"Ethereum",polygon:"Polygon",arbitrum:"Arbitrum",optimism:"Optimism","cosmoshub-4":"Cosmos Hub","osmosis-1":"Osmosis"};return t[e]||"Wallet"}render(){const e=this.getUserPosition();return i("div",{key:"cb2c7a632538419d53e2969293d2f6f1b26816db",class:"liquidity-card"},i("div",{key:"affbfc7658028762d7ba133a8f40fdf09980f2a1",class:"liquidity-header"},i("h3",{key:"600e4c95989e1cdd6366ecadcd2ce3011e66cc4b",class:"liquidity-title"},this.cardTitle),i("div",{key:"93b8fa73d20004f492ba0a7d92b7ba7fbec2dc23",class:"mode-toggle"},i("button",{key:"aa9eb0cbb94143f534bd3e0bf97e2318f0b5278e",class:{"mode-button":true,"mode-button--active":this.mode==="add"},onClick:()=>this.handleModeChange("add"),type:"button"},"Add"),i("button",{key:"db435a41daecfdf8955e4f1fe44439254b2f8ccd",class:{"mode-button":true,"mode-button--active":this.mode==="remove"},onClick:()=>this.handleModeChange("remove"),type:"button"},"Remove"))),i("div",{key:"98249623d4c805a1eef50d1dd7d224225f4977e4",class:"pool-section"},i("div",{key:"37c0fae2bb34a5ae73172a7305f3bdab91d03f3d",class:"section-header"},i("span",{key:"c2f3fece3108db78d5b40f5cb0007fb44173a4a6",class:"section-label"},"Pool")),i("div",{key:"2649f84c0147fcf3c220aa39d315568e51f757ab",class:"pool-selector",onClick:this.openPoolSelector},this.selectedStorePool?i("div",{class:"selected-pool"},i("div",{class:"pool-tokens"},i("div",{class:"token-pair"}),i("div",{class:"pool-info"},i("span",{class:"pool-name"},this.selectedStorePool.token_1.toUpperCase(),"/",this.selectedStorePool.token_2.toUpperCase()),i("span",{class:"pool-fee"},"Pool Fee"))),i("div",{class:"pool-stats"},i("div",{class:"stat"},i("span",{class:"stat-label"},"APR"),i("span",{class:"stat-value"},this.selectedStorePool.apr||"N/A")),i("div",{class:"stat"},i("span",{class:"stat-label"},"TVL"),i("span",{class:"stat-value"},"$",parseFloat(this.selectedStorePool.total_liquidity||"0").toLocaleString())))):i("div",{class:"select-pool-button"},i("span",null,"Select Pool"),i("svg",{class:"dropdown-arrow",viewBox:"0 0 24 24",fill:"currentColor"},i("path",{d:"M7 10l5 5 5-5z"}))))),this.mode==="remove"&&e&&i("div",{key:"f7cf870fd6a1a4e48c8492926c5e4168f34a74b8",class:"position-info"},i("div",{key:"a22d2dc6e47946a7b60a2fc40efece8b6f4fcc68",class:"position-header"},i("span",{key:"569f242cd193c58a8110b47e6810520466f0801a",class:"position-label"},"Your Position")),i("div",{key:"ac2912cb688c83e71cd82044719f5010282709c3",class:"position-details"},i("div",{key:"2118439be0a6e817c6b6bd5c5df3b13d9963c821",class:"position-row"},i("span",{key:"ad6021a9f60961dc061c52337edf81c17eb574cd",class:"position-item-label"},"LP Tokens"),i("span",{key:"d7b102a5a92930afa379b53bf2045636221b17cf",class:"position-item-value"},parseFloat(e.lpTokenBalance).toLocaleString())),i("div",{key:"7cdddf805f531d0ae3d4a74ca43d13f93eb435b3",class:"position-row"},i("span",{key:"b9a4aaf411a029076027fc2df0d64a49127398ca",class:"position-item-label"},"Pool Share"),i("span",{key:"9db6f1d59ec610aef0ef4217ffc2007dd76742b6",class:"position-item-value"},e.shareOfPool.toFixed(4),"%")),i("div",{key:"296b44dc5a615105ea5a1013925b336bc8eddd87",class:"position-row"},i("span",{key:"96c756fc13294e62078cffa3e04fa6e29e38515e",class:"position-item-label"},this.selectedPool?.tokenA.symbol),i("span",{key:"9b27e1b9329519333f2e938a1056117abbd29835",class:"position-item-value"},parseFloat(e.tokenAAmount).toLocaleString())),i("div",{key:"f58961e24e539b4abc2825463edece0bac7be7f5",class:"position-row"},i("span",{key:"8cad88656604f06f5fa71c0784fe760caa1b2d0e",class:"position-item-label"},this.selectedPool?.tokenB.symbol),i("span",{key:"2e669e5830e84f085315962d4eaaeddbcacb90d2",class:"position-item-value"},parseFloat(e.tokenBAmount).toLocaleString())))),this.mode==="add"?this.renderAddLiquidity():this.renderRemoveLiquidity(),(this.currentQuote||this.removeQuote)&&i("div",{key:"336d836e0ba569e51dd888b853f17bb73b442083",class:"quote-info"},this.mode==="add"&&this.currentQuote?i("div",null,i("div",{class:"quote-row"},i("span",{class:"quote-label"},"LP Tokens Received"),i("span",{class:"quote-value"},parseFloat(this.currentQuote.lpTokensReceived).toLocaleString())),i("div",{class:"quote-row"},i("span",{class:"quote-label"},"Pool Share"),i("span",{class:"quote-value"},this.currentQuote.shareOfPool.toFixed(4),"%")),this.currentQuote.priceImpact>.1&&i("div",{class:"quote-row"},i("span",{class:"quote-label"},"Price Impact"),i("span",{class:{"quote-value":true,"quote-value--warning":this.currentQuote.priceImpact>1,"quote-value--danger":this.currentQuote.priceImpact>3}},this.currentQuote.priceImpact.toFixed(3),"%"))):this.mode==="remove"&&this.removeQuote?i("div",null,i("div",{class:"quote-row"},i("span",{class:"quote-label"},"Pool Share Removed"),i("span",{class:"quote-value"},this.removeQuote.shareRemoved.toFixed(4),"%")),i("div",{class:"quote-row"},i("span",{class:"quote-label"},this.selectedPool?.tokenA.symbol," Received"),i("span",{class:"quote-value"},parseFloat(this.removeQuote.tokenAReceived).toLocaleString())),i("div",{class:"quote-row"},i("span",{class:"quote-label"},this.selectedPool?.tokenB.symbol," Received"),i("span",{class:"quote-value"},parseFloat(this.removeQuote.tokenBReceived).toLocaleString()))):null),i("div",{key:"834ccf1a9316677fef55f54d49dcb30babd6903a",class:"advanced-section"},i("button",{key:"528974fa2a4298725cddc02ea333abea04629d1c",class:"advanced-toggle",onClick:()=>this.isAdvancedOpen=!this.isAdvancedOpen,type:"button"},i("span",{key:"7ea3674d2aefdbd192b34d08fffe13b072e2d5f0"},"Advanced Settings"),i("svg",{key:"22243eec0560bfca9e3ee383ba72b6a1b6eb1f38",class:{"dropdown-arrow":true,"dropdown-arrow--open":this.isAdvancedOpen},viewBox:"0 0 24 24",fill:"currentColor"},i("path",{key:"b4f41491ff3287f4050035cf0846717cc3bfbefa",d:"M7 10l5 5 5-5z"}))),this.isAdvancedOpen&&i("div",{key:"5dc06973c7ffb326e6f8fe5908986913b177b7e5",class:"advanced-panel"},i("div",{key:"d009d3c942f977cc8f97f930522dc974f40a1938",class:"setting-item"},i("label",{key:"a212e69f10d0a57232087fa2d3f0f01dc7a61a62",class:"setting-label"},"Slippage Tolerance"),i("div",{key:"408f4f4625132de4d4d38520a3f7ea7508f70731",class:"slippage-controls"},[.1,.5,1].map((e=>i("button",{class:{"slippage-btn":true,"slippage-btn--active":this.slippage===e},onClick:()=>this.slippage=e,type:"button"},e,"%"))),i("input",{key:"8cdc5cc85acf7d8bab76afa7ebc95a645d067c12",class:"slippage-input",type:"number",min:"0",max:"50",step:"0.1",value:this.slippage,onInput:e=>this.slippage=parseFloat(e.target.value),placeholder:"Custom"}))))),i("euclid-button",{key:"0af7552eefb4a594927fc4791a6937febbdf3e27",variant:"primary",size:"lg","full-width":true,loading:this.loading,disabled:!this.canExecute(),onClick:this.handleLiquidity},this.getButtonText()),this.isPoolSelectorOpen&&i("div",{key:"eabac9fb5067459db0d5643b167fdb243d00ae90",class:"pool-selector-dropdown"},i("div",{key:"529ee500364ecbb1a3df3d92e1d955c237a5b906",class:"dropdown-header"},i("h4",{key:"fb5d39aa78b480ca509461b02df9edbb7abb3da6"},"Select Pool"),i("button",{key:"f98e3b852fb3d3f5db03e3816c7c1bade45dad61",class:"close-button",onClick:()=>this.isPoolSelectorOpen=false},"×")),i("div",{key:"391bb390132da6d7500197c108ce5d2991040bb4",class:"pool-list"},this.storePools.length>0?this.storePools.map((e=>i("div",{key:e.pool_id,class:"pool-item",onClick:()=>this.selectStorePool(e)},i("div",{class:"pool-tokens"},i("span",{class:"pool-name"},e.token_1.toUpperCase(),"/",e.token_2.toUpperCase())),i("div",{class:"pool-stats"},i("span",{class:"apr"},"APR: ",e.apr||"0.00%"),i("span",{class:"tvl"},"TVL: $",parseFloat(e.total_liquidity||"0").toLocaleString()))))):i("div",{class:"no-pools"},"No pools available"))))}renderAddLiquidity(){return i("div",{class:"liquidity-inputs"},i("div",{class:"token-input-section"},i("div",{class:"input-header"},i("span",{class:"input-label"},"First Token"),this.selectedPool?.tokenA.balance&&i("span",{class:"balance-label",onClick:()=>this.handleMaxClick("tokenA")},"Balance: ",parseFloat(this.selectedPool.tokenA.balance).toLocaleString())),i("euclid-token-input",{id:"token-a-input",value:this.tokenAAmount,placeholder:"0.0","show-max":!!this.selectedPool?.tokenA.balance,onMaxClick:()=>this.handleMaxClick("tokenA")},i("div",{slot:"token",class:"token-display"},this.selectedStorePool?i("div",{class:"selected-token"},i("div",{class:"token-info"},i("span",{class:"token-symbol"},this.selectedStorePool.token_1.toUpperCase()),i("span",{class:"token-name"},this.selectedStorePool.token_1))):i("div",{class:"no-pool-selected"},i("span",{class:"token-symbol"},"TOKEN"),i("span",{class:"token-name"},"Select pool first"))))),i("div",{class:"token-input-section"},i("div",{class:"input-header"},i("span",{class:"input-label"},"Second Token"),this.selectedPool?.tokenB.balance&&i("span",{class:"balance-label",onClick:()=>this.handleMaxClick("tokenB")},"Balance: ",parseFloat(this.selectedPool.tokenB.balance).toLocaleString())),i("euclid-token-input",{id:"token-b-input",value:this.tokenBAmount,placeholder:"0.0","show-max":!!this.selectedPool?.tokenB.balance,onMaxClick:()=>this.handleMaxClick("tokenB")},i("div",{slot:"token",class:"token-display"},this.selectedStorePool?i("div",{class:"selected-token"},i("div",{class:"token-info"},i("span",{class:"token-symbol"},this.selectedStorePool.token_2.toUpperCase()),i("span",{class:"token-name"},this.selectedStorePool.token_2))):i("div",{class:"no-pool-selected"},i("span",{class:"token-symbol"},"TOKEN"),i("span",{class:"token-name"},"Select pool first"))))))}renderRemoveLiquidity(){const e=this.getUserPosition();return i("div",{class:"remove-liquidity"},i("div",{class:"percentage-section"},i("div",{class:"percentage-label"},"Amount to Remove"),i("div",{class:"percentage-buttons"},[25,50,75,100].map((e=>i("button",{class:{"percentage-btn":true,"percentage-btn--active":this.lpPercentage===e},onClick:()=>this.handlePercentageClick(e),type:"button"},e,"%"))))),i("div",{class:"token-input-section"},i("div",{class:"input-header"},i("span",{class:"input-label"},"LP Tokens to Remove"),e&&i("span",{class:"balance-label",onClick:()=>this.handleMaxClick("lp")},"Balance: ",parseFloat(e.lpTokenBalance).toLocaleString())),i("euclid-token-input",{id:"lp-token-input",value:this.lpTokenAmount,placeholder:"0.0","show-max":!!e,onMaxClick:()=>this.handleMaxClick("lp")},i("div",{slot:"token",class:"lp-token-display"},this.selectedPool?i("div",{class:"lp-token-info"},i("div",{class:"token-pair"},this.selectedPool.tokenA.logoUrl&&i("img",{src:this.selectedPool.tokenA.logoUrl,alt:this.selectedPool.tokenA.symbol,class:"token-logo"}),this.selectedPool.tokenB.logoUrl&&i("img",{src:this.selectedPool.tokenB.logoUrl,alt:this.selectedPool.tokenB.symbol,class:"token-logo token-logo--overlap"})),i("span",{class:"lp-symbol"},this.selectedPool.lpTokenSymbol)):i("span",null,"Select Pool")))))}get element(){return s(this)}};V.style=Y;const R=class{constructor(t){e(this,t);this.isInitialized=false;this.api=T}async componentWillLoad(){await this.initialize()}async componentDidLoad(){}async initialize(){console.log("💧 Initializing Liquidity Controller...");const e=this.config?JSON.parse(this.config):f;console.log("Using config:",e);l.onChange("selectedPool",(()=>this.handlePoolChange()));this.isInitialized=true;console.log("✅ Liquidity Controller initialized")}handlePoolChange(){const{selectedPool:e}=l.state;if(e){console.log("🏊 Pool selected for liquidity operations:",e.id)}}async executeAddLiquidity(){try{const{selectedPool:e,token1:t,token2:i,token1Amount:a,token2Amount:s}=l.state;if(!e||!t||!i||!a||!s){return{success:false,error:"Missing required liquidity parameters"}}const r=o.getWallet(t.chainUID);const n=o.getWallet(i.chainUID);if(!r?.isConnected){return{success:false,error:`Wallet not connected for ${t.symbol}`}}if(!n?.isConnected){return{success:false,error:`Wallet not connected for ${i.symbol}`}}if(!o.hasSufficientBalance(t.chainUID,t.id,a)){return{success:false,error:`Insufficient ${t.symbol} balance`}}if(!o.hasSufficientBalance(i.chainUID,i.id,s)){return{success:false,error:`Insufficient ${i.symbol} balance`}}l.setAddingLiquidity(true);console.log("💧 Executing add liquidity...",{pool:e.id,token1:t.symbol,token2:i.symbol,amount1:a,amount2:s});const c=await this.api.buildAddLiquidityTransaction({slippage_tolerance_bps:50,timeout:(Math.floor(Date.now()/1e3)+1200).toString(),pair_info:{token_1:{token:t.id,amount:a,token_type:t.token_type||{native:{denom:t.id}}},token_2:{token:i.id,amount:s,token_type:i.token_type||{native:{denom:i.id}}}},sender:{address:r.address,chain_uid:t.chainUID}});if(c.success&&c.data){const e="pending";const t=o.getAllConnectedWallets();const i=t[0];const a=i.chainUID;o.addTransaction(a,{txHash:e,timestamp:Date.now(),type:"add_liquidity"});g(b.TRANSACTION.SUBMITTED,{txHash:e,chainUID:a,type:"add_liquidity"});console.log("✅ Add liquidity transaction submitted:",e);return{success:true,txHash:e}}else{return{success:false,error:c.error||"Add liquidity execution failed"}}}catch(e){const t=e instanceof Error?e.message:"Unknown error occurred";console.error("❌ Add liquidity execution error:",t);return{success:false,error:t}}finally{l.setAddingLiquidity(false)}}async executeRemoveLiquidity(e,t){try{const i=l.getPosition(e);if(!i){return{success:false,error:"Liquidity position not found"}}const a=h.state.pools;const s=a.find((t=>t.id===e));if(!s){return{success:false,error:"Pool not found"}}const r=h.state.tokens;const n=r.find((e=>e.address===s.token_1));if(!n){return{success:false,error:"Token metadata not found"}}const c=o.getWallet(n.chain_uid);if(!c?.isConnected){return{success:false,error:`Wallet not connected for ${n.chain_uid}`}}const d=o.getWalletBalance(n.chain_uid,`lp-${e}`);if(!d||BigInt(d.amount)<BigInt(t)){return{success:false,error:"Insufficient LP token balance"}}l.setRemovingLiquidity(true);console.log("💧 Executing remove liquidity...",{poolId:e,lpAmount:t});const u=await this.api.buildRemoveLiquidityTransaction({slippage_tolerance_bps:50,timeout:(Math.floor(Date.now()/1e3)+1200).toString(),lp_token_amount:t,sender:{address:c.address,chain_uid:n.chain_uid}});if(u.success&&u.data){const e=u.data;const{txHash:t}=e;o.addTransaction(n.chain_uid,{txHash:t,timestamp:Date.now(),type:"remove_liquidity"});g(b.TRANSACTION.SUBMITTED,{txHash:t,chainUID:n.chain_uid,type:"remove_liquidity"});console.log("✅ Remove liquidity transaction submitted:",t);return{success:true,txHash:t}}else{return{success:false,error:u.error||"Remove liquidity execution failed"}}}catch(e){const t=e instanceof Error?e.message:"Unknown error occurred";console.error("❌ Remove liquidity execution error:",t);return{success:false,error:t}}finally{l.setRemovingLiquidity(false)}}async handleAddLiquidityExecution(){console.log("💧 Add liquidity execution requested via event");const e=await y.request("add-liquidity-execution",(()=>this.executeAddLiquidity()),{ttl:1e3});if(e.success){g(b.LIQUIDITY.ADD_SUCCESS,{txHash:e.txHash})}else{g(b.LIQUIDITY.ADD_FAILED,{error:e.error})}}async handleLiquidityPositionsSubscribe(){console.log("🏊 Component subscribed to liquidity position data - triggering fetch if needed")}handleLiquidityPositionsUnsubscribe(){console.log("🏊 Component unsubscribed from liquidity position data")}async handleRemoveLiquidityExecution(e){console.log("💧 Remove liquidity execution requested via event");const{poolId:t,lpTokenAmount:i}=e.detail;const a=await this.executeRemoveLiquidity(t,i);if(a.success){g(b.LIQUIDITY.REMOVE_SUCCESS,{txHash:a.txHash})}else{g(b.LIQUIDITY.REMOVE_FAILED,{error:a.error})}}onInitializedChange(e){if(e){console.log("💧 Liquidity Controller ready for operations")}}render(){return null}static get watchers(){return{isInitialized:["onInitializedChange"]}}};const $=class{constructor(t){e(this,t);this.isInitialized=false;this.api=T}async componentWillLoad(){this.euclidConfig=this.config?JSON.parse(this.config):f;await this.initialize()}async componentDidLoad(){}disconnectedCallback(){x.unregister("market-token-metadata");x.unregister("market-pools-data")}async initialize(){console.log("📊 Initializing Market Data Controller...");await this.loadInitialData();this.setupCoreDataPolling();this.isInitialized=true;console.log("📊 Market Data Controller initialized")}async loadInitialData(){return y.request("market-initial-data",(async()=>{try{h.setLoading(true);console.log("📊 Loading initial market data...");console.log("🌐 Loading chains (once per session)...");const e=await this.api.getChains({showAllChains:false});if(e&&e.length>0){const t=e.map((e=>({...e,type:e.type?.toLowerCase()==="evm"?"EVM":"Cosmwasm"})));h.setChains(t);console.log("📡 Loaded chains:",e.length)}else{console.warn("No chains data received")}console.log("🪙 Loading token metadata...");const t=await this.api.getTokenMetadata();if(t&&t.length>0){h.setTokens(t);console.log("🪙 Loaded tokens:",t.length)}else{console.warn("No tokens data received")}console.log("🏊 Loading pools with liquidity...");const i=await this.api.getAllPools();if(i.success&&i.data){h.setPools(i.data);console.log("🏊 Loaded pools:",i.data.length)}else{console.warn("Failed to load pools:",i.error)}return{success:true}}catch(e){console.error("Failed to load initial market data:",e);throw e}finally{h.setLoading(false)}}),{ttl:this.euclidConfig.performance.cache.chains})}setupCoreDataPolling(){console.log("📊 Setting up optimized core data polling using configuration:",{activeInterval:this.euclidConfig.performance.polling.active.marketData,backgroundInterval:this.euclidConfig.performance.polling.background.marketData,cacheTTL:this.euclidConfig.performance.cache.marketData});x.register("market-token-metadata",(async()=>{if(!v.hasSubscriptions("marketData")&&!v.hasSubscriptions("tokenPrices")){console.log("⏭️ No token metadata subscriptions - skipping fetch");return}console.log("🪙 Refreshing token metadata (subscription-driven)...");await this.refreshTokenMetadata()}),{activeInterval:this.euclidConfig.performance.polling.active.marketData,backgroundInterval:this.euclidConfig.performance.polling.background.marketData,pauseOnHidden:this.euclidConfig.performance.pauseOnHidden});x.register("market-pools-data",(async()=>{if(!v.hasSubscriptions("marketData")&&!v.hasSubscriptions("liquidityPositions")){console.log("⏭️ No pools data subscriptions - skipping fetch");return}console.log("🏊 Refreshing pools data (subscription-driven)...");await this.refreshPoolsData()}),{activeInterval:this.euclidConfig.performance.polling.active.marketData,backgroundInterval:this.euclidConfig.performance.polling.background.marketData,pauseOnHidden:this.euclidConfig.performance.pauseOnHidden});console.log("📊 Optimized core data polling setup complete - will poll only when subscriptions exist")}async refreshTokenMetadata(){return y.request("token-metadata-refresh",(async()=>{try{const e=await this.api.getTokenMetadata();if(e&&e.length>0){h.setTokens(e);console.log("💰 Refreshed token metadata:",e.length)}return{success:true}}catch(e){console.error("❌ Failed to refresh token metadata:",e);throw e}}),{ttl:this.euclidConfig.performance.cache.tokens})}async refreshPoolsData(){return y.request("pools-data-refresh",(async()=>{try{const e=await this.api.getAllPools();if(e.success&&e.data){h.setPools(e.data);console.log("🏊 Refreshed pools data:",e.data.length)}return{success:true}}catch(e){console.error("❌ Failed to refresh pools data:",e);throw e}}),{ttl:this.euclidConfig.performance.cache.marketData})}async handleInitialDataLoad(){console.log("📊 Loading initial market data...");await this.loadInitialData()}async handleRefreshRequest(){console.log("� Manual market data refresh requested");await Promise.all([this.refreshTokenMetadata(),this.refreshPoolsData()])}async handleTokenDetailsRequest(e){const{tokenId:t}=e.detail;console.log("📋 Loading token details for:",t);try{console.log("📄 Token denoms not yet implemented for:",t);g(b.MARKET.TOKEN_DETAILS_SUCCESS,{tokenId:t,data:{denoms:[]}});console.log("📄 Token escrows not yet implemented for:",t);g(b.MARKET.ESCROWS_LOADED,{tokenId:t,data:{escrows:[]}})}catch(e){console.error("Failed to load token details:",e);g(b.MARKET.TOKEN_DETAILS_FAILED,{tokenId:t,error:e.message})}}async handleChainDetailsRequest(e){const{chainUID:t}=e.detail;console.log("🔗 Loading chain details for:",t);try{const e=h.getChain(t);if(e){g(b.MARKET.CHAIN_DETAILS_SUCCESS,{chainUID:t,data:{chain:e}})}else{await this.loadInitialData()}}catch(e){console.error("Failed to load chain details:",e);g(b.MARKET.CHAIN_DETAILS_FAILED,{chainUID:t,error:e.message})}}render(){return null}};const J=":host{display:contents}.modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;z-index:var(--euclid-z-modal-backdrop);background:var(--euclid-surface-overlay);display:flex;align-items:center;justify-content:center;padding:var(--euclid-space-4);animation:fadeIn var(--euclid-transition-base);isolation:isolate}.modal-container{background:var(--euclid-surface);border-radius:var(--euclid-radius-2xl);box-shadow:var(--euclid-shadow-2xl);border:var(--euclid-border-1) solid var(--euclid-border);max-width:var(--euclid-modal-max-width-base);width:100%;max-height:90vh;overflow:hidden;display:flex;flex-direction:column;animation:slideUp var(--euclid-transition-base);outline:none;position:relative}.modal-header{display:flex;justify-content:space-between;align-items:center;padding:var(--euclid-space-6);border-bottom:var(--euclid-border-1) solid var(--euclid-border)}.modal-title{margin:0;font-size:var(--euclid-text-lg);font-weight:var(--euclid-font-semibold);color:var(--euclid-text-primary)}.close-button{display:flex;align-items:center;justify-content:center;width:var(--euclid-space-8);height:var(--euclid-space-8);background:transparent;border:none;border-radius:var(--euclid-radius-lg);color:var(--euclid-text-tertiary);cursor:pointer;transition:all var(--euclid-transition-fast)}.close-button:hover{background:var(--euclid-surface-secondary);color:var(--euclid-text-secondary)}.close-button svg{width:var(--euclid-space-4);height:var(--euclid-space-4)}.modal-content{padding:var(--euclid-space-6);overflow-y:auto;flex:1;min-height:0;}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes slideUp{from{opacity:0;transform:translateY(var(--euclid-space-8))}to{opacity:1;transform:translateY(0)}}@media (max-width: 640px){.modal-overlay{padding:var(--euclid-space-2)}.modal-container{max-width:100%}.modal-header,.modal-content{padding:var(--euclid-space-4)}}@media (max-width: 480px){.modal-container{width:100%;height:100%;max-height:100vh;border-radius:0}.modal-header{padding:var(--euclid-space-3) var(--euclid-space-4)}.modal-title{font-size:var(--euclid-text-base)}.modal-content{padding:var(--euclid-space-3) var(--euclid-space-4)}}.close-button:focus-visible{outline:2px solid var(--euclid-border-focus);outline-offset:2px}@media (prefers-reduced-motion: reduce){.modal-overlay,.modal-container{animation:none}}";const G=class{constructor(t){e(this,t);this.appState=r.state;this.previousActiveElement=null;this.previousBodyOverflow="";this.previousBodyPaddingRight="";this.scrollBarWidth=0;this.handleOverlayClick=e=>{if(e.target===e.currentTarget){this.closeModal()}}}componentWillLoad(){console.log("🚀 Modal componentWillLoad");console.log("📊 Initial appState:",this.appState);console.log("📊 Initial store state:",r.state);this.scrollBarWidth=this.getScrollBarWidth();console.log("📏 Scrollbar width:",this.scrollBarWidth);r.onChange("walletModalOpen",(()=>{console.log("👛 Wallet modal state changed:",r.state.walletModalOpen);const e=this.appState.walletModalOpen||this.appState.tokenModalOpen;const t={...r.state};const i=t.walletModalOpen||t.tokenModalOpen;this.appState=t;console.log("👛 Wallet modal state transition:",{wasOpen:e,isNowOpen:i});this.handleModalStateChange(e,i)}));r.onChange("tokenModalOpen",(()=>{console.log("🪙 Token modal state changed:",r.state.tokenModalOpen);const e=this.appState.walletModalOpen||this.appState.tokenModalOpen;const t={...r.state};const i=t.walletModalOpen||t.tokenModalOpen;this.appState=t;console.log("🪙 Token modal state transition:",{wasOpen:e,isNowOpen:i});this.handleModalStateChange(e,i)}))}componentDidLoad(){console.log("🎬 componentDidLoad called");const e=this.appState.walletModalOpen||this.appState.tokenModalOpen;console.log("🎬 componentDidLoad isOpen:",e);if(e){console.log("🎬 componentDidLoad calling onModalOpen");this.onModalOpen()}}disconnectedCallback(){this.onModalClose()}handleKeyDown(e){const t=this.appState.walletModalOpen||this.appState.tokenModalOpen;if(!t)return;if(e.key==="Escape"){this.closeModal()}if(e.key==="Tab"){this.handleTabKey(e)}}closeModal(){r.closeWalletModal();r.closeTokenModal()}getScrollBarWidth(){if(typeof window==="undefined")return 0;const e=document.createElement("div");e.style.visibility="hidden";e.style.overflow="scroll";document.body.appendChild(e);const t=document.createElement("div");e.appendChild(t);const i=e.offsetWidth-t.offsetWidth;document.body.removeChild(e);return i}handleModalStateChange(e,t){console.log("🔄 handleModalStateChange:",{wasOpen:e,isNowOpen:t});if(!e&&t){console.log("▶️ Opening modal");this.onModalOpen()}else if(e&&!t){console.log("⏹️ Closing modal");this.onModalClose()}else{console.log("➡️ No state change needed")}}onModalOpen(){console.log("🔒 onModalOpen called");if(typeof window==="undefined"){console.log("❌ No window, returning");return}try{this.previousActiveElement=document.activeElement;console.log("💾 Stored active element:",this.previousActiveElement);const e=document.body;this.previousBodyOverflow=e.style.overflow||"";e.style.overflow="hidden";console.log("🔒 BODY SCROLL LOCKED!",{previousOverflow:this.previousBodyOverflow,newOverflow:e.style.overflow});requestAnimationFrame((()=>{const e=this.el.shadowRoot?.querySelector(".modal-container");if(e){e.focus();console.log("🎯 Modal focused")}}))}catch(e){console.error("❌ Error in onModalOpen:",e)}}onModalClose(){console.log("🔓 onModalClose called");if(typeof window==="undefined"){console.log("❌ No window, returning");return}try{const e=document.body;e.style.overflow=this.previousBodyOverflow;console.log("🔓 BODY SCROLL RESTORED!",{restoredOverflow:this.previousBodyOverflow,currentOverflow:e.style.overflow});if(this.previousActiveElement&&typeof this.previousActiveElement.focus==="function"){this.previousActiveElement.focus();console.log("🎯 Focus restored to:",this.previousActiveElement)}this.previousActiveElement=null}catch(e){console.error("❌ Error in onModalClose:",e)}}handleTabKey(e){const t=this.el.shadowRoot;if(!t)return;const i=t.querySelector(".modal-container");if(!i)return;const a=i.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(a.length===0)return;const s=a[0];const o=a[a.length-1];const r=t.activeElement||document.activeElement;if(e.shiftKey){if(r===s||!i.contains(r)){o?.focus();e.preventDefault()}}else{if(r===o||!i.contains(r)){s?.focus();e.preventDefault()}}}render(){const e=this.appState.walletModalOpen||this.appState.tokenModalOpen;console.log("🎭 Modal render called:",{isOpen:e,walletOpen:this.appState.walletModalOpen,tokenOpen:this.appState.tokenModalOpen});if(!e){console.log("🚫 Modal not open, returning null");if(document.body.style.overflow==="hidden"){console.log("🔓 FORCE restoring scroll on closed modal");document.body.style.overflow=this.previousBodyOverflow||""}return null}if(document.body.style.overflow!=="hidden"){console.log("🔒 FORCE locking scroll in render");this.previousBodyOverflow=document.body.style.overflow||"";document.body.style.overflow="hidden"}let t="";let a=null;if(this.appState.walletModalOpen){t="Connect Wallet";a=i("euclid-wallet-content",null);console.log("👛 Rendering wallet modal")}else if(this.appState.tokenModalOpen){t="Select Token";a=i("euclid-token-content",null);console.log("🪙 Rendering token modal")}return i("div",{class:"modal-overlay",onClick:this.handleOverlayClick,role:"dialog","aria-modal":"true","aria-hidden":"false"},i("div",{class:"modal-container",role:"document",tabindex:"-1","aria-labelledby":"modal-title","aria-describedby":"modal-content"},i("div",{class:"modal-header"},i("h2",{id:"modal-title",class:"modal-title"},t),i("button",{class:"close-button",onClick:()=>this.closeModal(),type:"button","aria-label":"Close modal"},i("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},i("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})))),i("div",{id:"modal-content",class:"modal-content"},a)))}get el(){return s(this)}};G.style=J;const H=":host{display:block;width:100%;font-family:var(--euclid-font-sans)}.portfolio{background:var(--euclid-surface);border:var(--euclid-border-1) solid var(--euclid-border);border-radius:var(--euclid-radius-xl);overflow:hidden;box-shadow:var(--euclid-shadow-base)}.portfolio-header{display:flex;flex-direction:column;gap:var(--euclid-space-4);padding:var(--euclid-space-6);border-bottom:var(--euclid-border-1) solid var(--euclid-border);background:var(--euclid-surface-secondary)}.portfolio-title{margin:0;font-size:var(--euclid-text-2xl);font-weight:var(--euclid-font-bold);color:var(--euclid-text-primary)}.portfolio-summary{display:grid;grid-template-columns:repeat(auto-fit, minmax(120px, 1fr));gap:var(--euclid-space-4)}.summary-item{display:flex;flex-direction:column;align-items:center;text-align:center;padding:var(--euclid-space-3);background:var(--euclid-surface);border-radius:var(--euclid-radius-lg);border:var(--euclid-border-1) solid var(--euclid-border)}.summary-item .label{font-size:var(--euclid-text-xs);font-weight:var(--euclid-font-medium);color:var(--euclid-text-muted);text-transform:uppercase;letter-spacing:0.5px;margin-bottom:var(--euclid-space-1)}.summary-item .value{font-size:var(--euclid-text-lg);font-weight:var(--euclid-font-bold);color:var(--euclid-text-primary)}.portfolio-tabs{display:flex;border-bottom:var(--euclid-border-1) solid var(--euclid-border);background:var(--euclid-surface-secondary)}.tab-btn{padding:var(--euclid-space-4) var(--euclid-space-6);background:transparent;border:none;border-bottom:2px solid transparent;color:var(--euclid-text-secondary);font-size:var(--euclid-text-sm);font-weight:var(--euclid-font-medium);cursor:pointer;transition:var(--euclid-transition-base)}.tab-btn:hover{background:var(--euclid-interactive-secondary-hover);color:var(--euclid-text-primary)}.tab-btn--active{color:var(--euclid-interactive-primary);border-bottom-color:var(--euclid-interactive-primary);background:var(--euclid-surface);font-weight:var(--euclid-font-semibold)}.portfolio-content{padding:var(--euclid-space-6)}.overview-tab{display:flex;flex-direction:column;gap:var(--euclid-space-8)}.stats-grid{display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:var(--euclid-space-5)}.stat-card{padding:var(--euclid-space-5);background:var(--euclid-surface-secondary);border:var(--euclid-border-1) solid var(--euclid-border);border-radius:var(--euclid-radius-xl);display:flex;flex-direction:column;gap:var(--euclid-space-2);transition:var(--euclid-transition-base)}.stat-card:hover{border-color:var(--euclid-border-hover);box-shadow:var(--euclid-shadow-md)}.stat-label{font-size:var(--euclid-text-xs);color:var(--euclid-text-muted);font-weight:var(--euclid-font-medium);text-transform:uppercase;letter-spacing:0.5px}.stat-value{font-size:var(--euclid-text-2xl);font-weight:var(--euclid-font-bold);color:var(--euclid-text-primary)}.portfolio-analytics{padding:var(--euclid-space-8) var(--euclid-space-6);background:var(--euclid-surface-secondary);border-radius:var(--euclid-radius-xl);text-align:center}.portfolio-analytics h3{margin:0 0 var(--euclid-space-4) 0;font-size:var(--euclid-text-lg);font-weight:var(--euclid-font-semibold);color:var(--euclid-text-primary)}.portfolio-analytics p{margin:0;color:var(--euclid-text-secondary)}.wallets-tab{display:flex;flex-direction:column;gap:var(--euclid-space-5)}.wallets-header{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:var(--euclid-space-4)}.wallets-header h3{margin:0;font-size:var(--euclid-text-lg);font-weight:var(--euclid-font-semibold);color:var(--euclid-text-primary)}.wallet-list{display:flex;flex-direction:column;gap:var(--euclid-space-4)}.empty-portfolio,.empty-wallets{display:flex;flex-direction:column;align-items:center;padding:var(--euclid-space-12) var(--euclid-space-6);text-align:center}.empty-icon{font-size:3rem;margin-bottom:var(--euclid-space-4);opacity:0.5}.empty-portfolio h3,.empty-wallets h4{margin:0 0 var(--euclid-space-2) 0;font-size:var(--euclid-text-lg);font-weight:var(--euclid-font-semibold);color:var(--euclid-text-primary)}.empty-portfolio p,.empty-wallets p{margin:0 0 var(--euclid-space-6) 0;font-size:var(--euclid-text-base);color:var(--euclid-text-secondary);max-width:400px}@media (max-width: 768px){.portfolio-header{padding:var(--euclid-space-4)}.portfolio-content{padding:var(--euclid-space-4)}.stats-grid{grid-template-columns:repeat(2, 1fr);gap:var(--euclid-space-3)}.wallets-header{flex-direction:column;align-items:flex-start}}@media (max-width: 640px){.portfolio-summary{grid-template-columns:repeat(2, 1fr);gap:var(--euclid-space-2)}.stats-grid{grid-template-columns:1fr}}";const Z=class{constructor(i){e(this,i);this.portfolioUpdated=t(this,"portfolioUpdated");this.cardTitle="Portfolio";this.walletAddress="";this.customChainUID="osmosis-1";this.includeCustomWallets=true;this.autoRefresh=true;this.refreshIntervalMs=6e4;this.refreshTrigger=0;this.activeTab="overview";this.subscriptionId=null;this.handleConnectWallet=()=>{r.openWalletModal()}}componentDidLoad(){this.subscriptionId=v.subscribe("euclid-portfolio","balances");D((()=>{this.refreshTrigger=Date.now()}));this.refreshTrigger=Date.now()}disconnectedCallback(){if(this.subscriptionId){v.unsubscribe(this.subscriptionId);this.subscriptionId=null}}handleWalletConnected(){this.refreshTrigger=Date.now()}handleWalletDisconnected(){this.refreshTrigger=Date.now()}getWallets(){const e=k();if(this.includeCustomWallets&&this.walletAddress){return M(e,this.walletAddress,this.customChainUID)}return e}formatAddress(e){return`${e.slice(0,6)}...${e.slice(-4)}`}renderOverviewTab(){const e=this.getWallets();if(e.length===0){return i("div",{class:"overview-tab"},i("div",{class:"empty-portfolio"},i("div",{class:"empty-icon"},"�"),i("h3",null,"No Portfolio Data"),i("p",null,"Connect a wallet to start tracking your portfolio and see detailed analytics."),i("euclid-button",{variant:"primary",onClick:this.handleConnectWallet},"+ Add Wallet")))}return i("div",{class:"overview-tab"},i("div",{class:"stats-grid"},i("div",{class:"stat-card"},i("div",{class:"stat-label"},"Total Value"),i("div",{class:"stat-value"},"$0.00")),i("div",{class:"stat-card"},i("div",{class:"stat-label"},"24h Change"),i("div",{class:"stat-value"},"$0.00")),i("div",{class:"stat-card"},i("div",{class:"stat-label"},"Total Chains"),i("div",{class:"stat-value"},new Set(e.map((e=>e.chainUID))).size)),i("div",{class:"stat-card"},i("div",{class:"stat-label"},"Total Tokens"),i("div",{class:"stat-value"},"0"))),i("div",{class:"portfolio-analytics"},i("h3",null,"Portfolio Analytics"),i("p",null,"Advanced portfolio analytics and charts will be available here soon.")))}renderWalletsTab(){const e=this.getWallets();return i("div",{class:"wallets-tab"},i("div",{class:"wallets-header"},i("h3",null,"Connected Wallets (",e.length,")"),i("euclid-button",{variant:"primary",onClick:this.handleConnectWallet},"+ Add Wallet")),i("div",{class:"wallets-list"},e.length===0?i("div",{class:"empty-wallets"},i("div",{class:"empty-icon"},"💼"),i("h4",null,"No connected wallets"),i("p",null,"Connect a wallet to start managing your multi-chain portfolio"),i("euclid-button",{variant:"primary",onClick:this.handleConnectWallet},"+ Add Wallet")):i("div",{class:"wallet-list"},e.map((e=>i("euclid-wallet",{key:e.id,wallet:{id:e.id,address:e.address,chainUID:e.chainUID,chainName:e.chainName,chainLogo:e.chainLogo,chainType:e.chainType,walletType:e.walletType,provider:e.provider,isConnected:e.isConnected,label:e.label},clickable:false,showConnectionStatus:true,showChainInfo:true}))))))}render(){const e=this.getWallets();this.portfolioUpdated.emit(e);return i("div",{key:"171990829f2ebab6c476efcfcb8112df79f698ae",class:"portfolio"},i("div",{key:"41c54a0fa2137c3a9ce074813aa3c8559959de07",class:"portfolio-header"},i("h2",{key:"1b4e5b716f71c033a5e9e78977177a1031a34d24",class:"portfolio-title"},this.cardTitle),i("div",{key:"73172877ca70a1d608c12305c2474f022efce009",class:"portfolio-summary"},i("div",{key:"7f0a6fd291bea8b5800ac68be8848333d5417294",class:"summary-item"},i("span",{key:"8b5eb5077953b82cfcf38978b18aa28b9a895b16",class:"label"},"Wallets:"),i("span",{key:"2d051961e6bbe1cefb2230ea53d10766f508a63f",class:"value"},e.length)),i("div",{key:"5c0e95fe8663232bc906c1f20def9b5a03c0aa8f",class:"summary-item"},i("span",{key:"997b7ea6b3ec6728ca6567513b92d6ebb9456945",class:"label"},"Chains:"),i("span",{key:"71ea1b6ae15a92ee9dc910ec15839df48a17dff7",class:"value"},new Set(e.map((e=>e.chainUID))).size)))),i("div",{key:"08ffd4730d6abccab3e5875c0ca497723b6ceb78",class:"portfolio-tabs"},i("button",{key:"6949fc18d8d3350e2f5cdf5f7c337ed8e3f4da20",class:{"tab-btn":true,"tab-btn--active":this.activeTab==="overview"},onClick:()=>this.activeTab="overview",type:"button"},"Overview"),i("button",{key:"fb92894fecd6866102afbc89dd763229e52ce51f",class:{"tab-btn":true,"tab-btn--active":this.activeTab==="wallets"},onClick:()=>this.activeTab="wallets",type:"button"},"Wallets (",e.length,")")),i("div",{key:"ac044692ae397cbaf78b57a90d4868fefff27531",class:"portfolio-content"},this.activeTab==="overview"&&this.renderOverviewTab(),this.activeTab==="wallets"&&this.renderWalletsTab()))}get element(){return s(this)}};Z.style=H;const K=":host{display:contents}.swap-card{background:var(--euclid-surface);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-2xl);padding:var(--euclid-spacing-6);max-width:420px;width:100%;box-shadow:var(--euclid-shadow-xl);display:flex;flex-direction:column;gap:var(--euclid-spacing-4)}.swap-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--euclid-spacing-2)}.swap-title{font-size:var(--euclid-text-size-xl);font-weight:var(--euclid-font-weight-semibold);color:var(--euclid-text-primary);margin:0}.settings-button{display:flex;align-items:center;justify-content:center;width:2.5rem;height:2.5rem;background:var(--euclid-surface-secondary);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-lg);color:var(--euclid-text-secondary);cursor:pointer;transition:all var(--euclid-transition-duration-fast)}.settings-button:hover{background:var(--euclid-surface-tertiary);color:var(--euclid-text-primary);border-color:var(--euclid-border-hover)}.settings-button:focus{outline:2px solid var(--euclid-border-focus);outline-offset:2px}.settings-button svg{width:1.25rem;height:1.25rem}.settings-panel{background:var(--euclid-surface-secondary);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-lg);padding:var(--euclid-spacing-4);margin-bottom:var(--euclid-spacing-2)}.setting-item{margin-bottom:var(--euclid-spacing-4)}.setting-item:last-child{margin-bottom:0}.setting-label{display:block;font-size:var(--euclid-text-size-sm);font-weight:var(--euclid-font-weight-medium);color:var(--euclid-text-secondary);margin-bottom:var(--euclid-spacing-2)}.slippage-buttons{display:flex;gap:var(--euclid-spacing-2);align-items:center}.slippage-btn{padding:var(--euclid-spacing-2) var(--euclid-spacing-3);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-md);background:var(--euclid-surface);color:var(--euclid-text-secondary);font-size:var(--euclid-text-size-sm);cursor:pointer;transition:all var(--euclid-transition-duration-fast)}.slippage-btn:hover{border-color:var(--euclid-interactive-primary);color:var(--euclid-interactive-primary)}.slippage-btn--active{background:var(--euclid-interactive-primary);color:var(--euclid-white);border-color:var(--euclid-interactive-primary)}.slippage-input{padding:var(--euclid-spacing-2) var(--euclid-spacing-3);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-md);background:var(--euclid-surface);color:var(--euclid-text-primary);font-size:var(--euclid-text-size-sm);width:80px;text-align:center}.slippage-input:focus{outline:none;border-color:var(--euclid-border-focus);box-shadow:0 0 0 2px rgba(37, 99, 235, 0.25)}.deadline-input{display:flex;align-items:center;gap:var(--euclid-spacing-2)}.deadline-input input{padding:var(--euclid-spacing-2) var(--euclid-spacing-3);border:1px solid var(--euclid-border);border-radius:var(--euclid-radius-md);background:var(--euclid-surface);color:var(--euclid-text-primary);font-size:var(--euclid-text-size-sm);width:100px}.deadline-input input:focus{outline:none;border-color:var(--euclid-border-focus);box-shadow:0 0 0 2px rgba(37, 99, 235, 0.25)}.deadline-input span{font-size:var(--euclid-text-size-sm);color:var(--euclid-text-secondary)}.token-input-section{position:relative}.input-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--euclid-spacing-2)}.input-label{font-size:var(--euclid-text-size-sm);color:var(--euclid-text-secondary)}.balance-label{font-size:var(--euclid-text-size-sm);color:var(--euclid-text-muted);cursor:pointer;transition:color var(--euclid-transition-duration-fast)}.balance-label:hover{color:var(--euclid-text-secondary)}.token-selector{cursor:pointer}.token-selector:hover{opacity:0.8}.selected-token{display:flex;align-items:center;gap:var(--euclid-spacing-3);padding:var(--euclid-spacing-4);border:2px solid var(--euclid-border);border-radius:var(--euclid-radius-xl);background:var(--euclid-surface)}.select-token-button{display:flex;align-items:center;justify-content:center;gap:var(--euclid-spacing-2);padding:var(--euclid-spacing-4) var(--euclid-spacing-6);border:2px dashed var(--euclid-border);border-radius:var(--euclid-radius-xl);background:var(--euclid-surface-secondary);color:var(--euclid-text-secondary);font-size:var(--euclid-text-size-base);font-weight:var(--euclid-font-weight-medium);cursor:pointer;transition:all var(--euclid-transition-duration-fast)}.select-token-button:hover{border-color:var(--euclid-border-hover)}.token-logo{width:2rem;height:2rem;border-radius:50%;background:var(--euclid-surface-secondary)}.token-info{display:flex;flex-direction:column;gap:var(--euclid-spacing-1);flex:1}.token-symbol{font-size:var(--euclid-text-size-base);font-weight:var(--euclid-font-weight-semibold);color:var(--euclid-text-primary)}.token-name{font-size:var(--euclid-text-size-sm);color:var(--euclid-text-secondary)}.dropdown-arrow{color:var(--euclid-text-muted);transition:transform var(--euclid-transition-duration-fast)}.token-selector:hover .dropdown-arrow{color:var(--euclid-text-secondary)}.swap-direction{display:flex;justify-content:center;margin:var(--euclid-spacing-2) 0;position:relative}.swap-button{display:flex;align-items:center;justify-content:center;width:2.5rem;height:2.5rem;background:var(--euclid-surface);border:2px solid var(--euclid-border);border-radius:50%;color:var(--euclid-text-secondary);cursor:pointer;transition:all var(--euclid-transition-duration-fast);z-index:10}.swap-button:hover{background:var(--euclid-surface-secondary);border-color:var(--euclid-border-hover);color:var(--euclid-text-primary);transform:rotate(180deg)}.swap-button:focus{outline:2px solid var(--euclid-border-focus);outline-offset:2px}.swap-button svg{width:1.25rem;height:1.25rem}.quote-info{padding:var(--euclid-spacing-4);background:var(--euclid-surface-secondary);border-radius:var(--euclid-radius-xl)}.quote-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--euclid-spacing-2)}.quote-row:last-child{margin-bottom:0}.quote-label{font-size:var(--euclid-text-size-sm);color:var(--euclid-text-secondary)}.quote-value{font-size:var(--euclid-text-size-sm);font-weight:var(--euclid-font-weight-medium);color:var(--euclid-text-primary)}.quote-value--warning{color:var(--euclid-warning-600)}.quote-value--danger{color:var(--euclid-danger-600)}@media (max-width: 480px){.swap-card{padding:var(--euclid-spacing-4);gap:var(--euclid-spacing-3)}.swap-header{margin-bottom:var(--euclid-spacing-2)}.settings-panel{padding:var(--euclid-spacing-3)}.slippage-buttons{flex-wrap:wrap}.deadline-input{flex-direction:column;align-items:flex-start;gap:var(--euclid-spacing-1)}.deadline-input input{width:100%}.selected-token{flex-direction:column;align-items:flex-start;gap:var(--euclid-spacing-2)}.token-info{width:100%}.quote-info{padding:var(--euclid-spacing-3)}}@media (prefers-reduced-motion: reduce){.settings-button,.slippage-btn,.token-selector,.swap-button,.dropdown-arrow{transition:none}.swap-button:hover{transform:none}}.token-selector:focus-within{outline:2px solid var(--euclid-border-focus);outline-offset:2px}.quote-info.loading{position:relative;pointer-events:none}.quote-info.loading::after{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);width:1.5rem;height:1.5rem;border:2px solid var(--euclid-border);border-top:2px solid var(--euclid-interactive-primary);border-radius:50%;animation:euclid-spin 1s linear infinite}@media (prefers-contrast: high){.swap-card,.settings-panel,.selected-token,.quote-info{border-width:2px;border-color:var(--euclid-text-primary)}.slippage-btn--active{border-color:var(--euclid-text-primary);background:var(--euclid-text-primary)}}";const X=class{constructor(i){e(this,i);this.swapInitiated=t(this,"swapInitiated");this.tokenSelect=t(this,"tokenSelect");this.quoteRequested=t(this,"quoteRequested");this.settingsChanged=t(this,"settingsChanged");this.tokens=[];this.storeTokens=[];this.storeLoading=false;this.inputToken=null;this.outputToken=null;this.inputAmount="";this.loading=false;this.disabled=false;this.walletAddress="";this.showAdvanced=false;this.cardTitle="Swap Tokens";this.outputAmount="";this.isSettingsOpen=false;this.tokenSelectorType="input";this.currentQuote=null;this.isQuoting=false;this.swapSettings={slippage:.5,deadline:20,infiniteApproval:false};this.quoteTimer=null;this.handleSwapTokens=()=>{const e=this.inputToken;const t=this.inputAmount;this.inputToken=this.outputToken;this.outputToken=e;this.inputAmount=this.outputAmount;this.outputAmount=t;this.startQuoteTimer()};this.handleMaxClick=()=>{if(this.inputToken?.balance){this.inputAmount=this.inputToken.balance;this.startQuoteTimer()}};this.openTokenSelector=e=>{console.log("🔧 Opening token selector for:",e);this.tokenSelectorType=e;r.openTokenModal(e)};this.toggleSettings=()=>{this.isSettingsOpen=!this.isSettingsOpen};this.handleSlippageChange=e=>{this.swapSettings={...this.swapSettings,slippage:e};this.settingsChanged.emit(this.swapSettings);this.startQuoteTimer()};this.handleSwap=()=>{if(!this.inputToken||!this.isWalletConnectedForSwap()){r.openWalletModal(this.inputToken?.chainUID);return}if(!this.outputToken||!this.currentQuote)return;g(b.SWAP.EXECUTE_REQUEST);this.swapInitiated.emit({inputToken:this.inputToken,outputToken:this.outputToken,inputAmount:this.inputAmount,outputAmount:this.outputAmount,settings:this.swapSettings,quote:this.currentQuote})}}componentWillLoad(){this.syncWithStore()}componentDidLoad(){h.onChange("tokens",(()=>{this.syncWithStore()}));this.startQuoteTimer()}syncWithStore(){this.storeTokens=h.state.tokens.length>0?h.state.tokens:[];this.storeLoading=h.state.loading}getAvailableTokens(){const e=this.storeTokens.length>0?this.storeTokens:this.tokens;return e.map((e=>{if("tokenId"in e&&"displayName"in e&&"coinDecimal"in e){return{id:e.tokenId,symbol:e.symbol||e.displayName.toUpperCase(),name:e.displayName,address:e.address||e.tokenId,chainUID:e.chainUID||e.chain_uid||e.chain_uids?.[0]||"",decimals:e.coinDecimal,logoUrl:e.logo||e.image||undefined,balance:undefined,price:e.price?parseFloat(e.price):undefined}}else{return e}}))}getAvailableChains(){const e=this.getAvailableTokens();const t=new Map;e.forEach((e=>{if(!t.has(e.chainUID)){t.set(e.chainUID,{chain_uid:e.chainUID,display_name:this.getChainDisplayName(e.chainUID)})}}));return Array.from(t.values())}disconnectedCallback(){if(this.quoteTimer){clearTimeout(this.quoteTimer)}}handleInputChange(e){if(e.target===this.element.querySelector("#input-amount")){this.inputAmount=e.detail.value;this.startQuoteTimer()}}handleTokenModalSelect(e){if(!e.detail||!e.detail.token||!e.detail.selectorType){return}console.log("🔧 Swap - received token selection:",e.detail);const{token:t,selectorType:i}=e.detail;const a={id:t.tokenId||t.id,symbol:t.symbol,name:t.name||t.displayName,address:t.address||t.tokenId,chainUID:t.chainUID||t.chain_uid,decimals:t.decimals||t.coinDecimal,logoUrl:t.logoUrl||t.logo,balance:t.balance,price:t.price};if(i==="input"){if(this.outputToken&&a.address===this.outputToken.address){this.outputToken=this.inputToken}this.inputToken=a}else{if(this.inputToken&&a.address===this.inputToken.address){this.inputToken=this.outputToken}this.outputToken=a}this.tokenSelect.emit({type:i,token:a});this.startQuoteTimer()}startQuoteTimer(){if(this.quoteTimer){clearTimeout(this.quoteTimer)}if(this.inputToken&&this.outputToken&&this.inputAmount&&parseFloat(this.inputAmount)>0){this.quoteTimer=setTimeout((()=>{this.requestQuote()}),800)}else{this.outputAmount="";this.currentQuote=null}}async requestQuote(){if(!this.inputToken||!this.outputToken||!this.inputAmount)return;this.isQuoting=true;this.quoteRequested.emit({inputToken:this.inputToken,outputToken:this.outputToken,inputAmount:this.inputAmount});setTimeout((()=>{if(this.inputToken&&this.outputToken&&this.inputAmount){const e=1.2+Math.random()*.3;const t=(parseFloat(this.inputAmount)*e).toFixed(6);this.currentQuote={inputAmount:this.inputAmount,outputAmount:t,exchangeRate:e,priceImpact:Math.random()*2,minimumReceived:(parseFloat(t)*(1-this.swapSettings.slippage/100)).toFixed(6),gasEstimate:(.001+Math.random()*.002).toFixed(4),route:[{protocol:"Euclid Protocol",poolAddress:"0x123...abc",fee:.3,inputToken:this.inputToken.symbol,outputToken:this.outputToken.symbol}]};this.outputAmount=t}this.isQuoting=false}),1e3)}canSwap(){if(!this.inputToken||!this.isWalletConnectedForSwap()){return true}return!!(this.inputToken&&this.outputToken&&this.inputAmount&&parseFloat(this.inputAmount)>0&&this.currentQuote&&!this.isQuoting&&!this.loading&&!this.disabled)}getSwapButtonText(){if(!this.inputToken||!this.isWalletConnectedForSwap()){const e=this.inputToken?.chainUID?this.getChainDisplayName(this.inputToken.chainUID):"Wallet";return`Connect ${e}`}if(!this.inputToken)return"Select Input Token";if(!this.outputToken)return"Select Output Token";if(!this.inputAmount||parseFloat(this.inputAmount)<=0)return"Enter Amount";if(this.isQuoting)return"Getting Quote...";if(this.loading)return"Swapping...";if(!this.currentQuote)return"Unable to Quote";return`Swap ${this.inputToken.symbol} for ${this.outputToken.symbol}`}isWalletConnectedForSwap(){if(!this.inputToken)return false;return o.isWalletConnected(this.inputToken.chainUID)}getChainDisplayName(e){const t={ethereum:"Ethereum",polygon:"Polygon",arbitrum:"Arbitrum",optimism:"Optimism","cosmoshub-4":"Cosmos Hub","osmosis-1":"Osmosis"};return t[e]||"Wallet"}render(){return i("div",{key:"83fc4251541b78fcfd54be4a8ca7a5304702090c",class:"swap-card"},i("div",{key:"2b7f9d4d0b56a41326e7f13a68a6a1eaa0ad5823",class:"swap-header"},i("h3",{key:"44a80e0c63ec8325826e12b60bbb5f7badfb4651",class:"swap-title"},this.cardTitle),i("button",{key:"bb2542d1d66271f63c44e7118d68c1c4560c79ed",class:"settings-button",onClick:this.toggleSettings,type:"button","aria-label":"Swap settings"},i("svg",{key:"74e2b55254fa3e4f49341f06a704c5b0f8016598",viewBox:"0 0 24 24",fill:"currentColor"},i("path",{key:"6b4687ebe445e9b56acff92ff2409c59cb69cbcd",d:"M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.82,11.69,4.82,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"})))),this.isSettingsOpen&&i("div",{key:"dcbbfc9c6e5a0ca94d89d854404431c9a8e253d7",class:"settings-panel"},i("div",{key:"b9ab018f005767956e1fa4dc03211def58ffbeb9",class:"setting-item"},i("label",{key:"303fb8d727f9581c2feda3884b0b01970943cd44",class:"setting-label"},"Slippage Tolerance"),i("div",{key:"312512cae96153603f17bc52715286619202483b",class:"slippage-buttons"},[.1,.5,1].map((e=>i("button",{class:{"slippage-btn":true,"slippage-btn--active":this.swapSettings.slippage===e},onClick:()=>this.handleSlippageChange(e),type:"button"},e,"%"))),i("input",{key:"656a3c626e8203b81a166b8b18770433c8a15bde",class:"slippage-input",type:"number",min:"0",max:"50",step:"0.1",value:this.swapSettings.slippage,onInput:e=>this.handleSlippageChange(parseFloat(e.target.value)),placeholder:"Custom"}))),i("div",{key:"37f7fb996c18e28a77fdc30f81a863f97b774fe7",class:"setting-item"},i("label",{key:"0a7530711a0f33ed029ea3c50c4f0c60ced75ec2",class:"setting-label"},"Transaction Deadline"),i("div",{key:"798bb71ff99c05c0f73b8f94f4c0d16b9b1b1449",class:"deadline-input"},i("input",{key:"8de8fd47513f6352a31013f114f1b38ff021ba23",type:"number",min:"1",max:"4320",value:this.swapSettings.deadline,onInput:e=>this.swapSettings={...this.swapSettings,deadline:parseInt(e.target.value)}}),i("span",{key:"253b47e465eb0733aeb026def73b969d0f43075d"},"minutes")))),i("div",{key:"4ecdff7bffba0a2c86d7ac777d35e1e883d7669a",class:"token-input-section"},i("div",{key:"855acbc8a22a400e60f9a178295ec3da255fc150",class:"input-header"},i("span",{key:"3ed8caaa4fc0d8593a5b4996652e32bee0fe4e12",class:"input-label"},"From"),this.inputToken?.balance&&i("span",{key:"1f1bc7af319c183ddb81f14b21e37ecb4dbf6c6d",class:"balance-label"},"Balance: ",parseFloat(this.inputToken.balance).toLocaleString())),i("euclid-token-input",{key:"714835f1fe67d4c4536510c33a4a701195379d1d",id:"input-amount",value:this.inputAmount,placeholder:"0.0","show-max":!!this.inputToken?.balance,"token-selectable":false,onMaxClick:this.handleMaxClick},i("div",{key:"2035cb9d015048c13f37763b418b79f9f74c4e5a",slot:"token",class:"token-selector",onClick:e=>{e.preventDefault();e.stopPropagation();this.openTokenSelector("input")}},this.inputToken?i("div",{class:"selected-token"},this.inputToken.logoUrl&&i("img",{src:this.inputToken.logoUrl,alt:this.inputToken.symbol,class:"token-logo"}),i("div",{class:"token-info"},i("span",{class:"token-symbol"},this.inputToken.symbol),i("span",{class:"token-name"},this.inputToken.name)),i("svg",{class:"dropdown-arrow",viewBox:"0 0 24 24",fill:"currentColor"},i("path",{d:"M7 10l5 5 5-5z"}))):i("div",{class:"select-token-button"},i("span",null,"Select Token"),i("svg",{class:"dropdown-arrow",viewBox:"0 0 24 24",fill:"currentColor"},i("path",{d:"M7 10l5 5 5-5z"})))))),i("div",{key:"4a34a59bbe85179b5ea6437b8a51613d4d1593c4",class:"swap-direction"},i("button",{key:"87abc4c576fa65a77c0a071c5dea86b1055c866a",class:"swap-button",onClick:this.handleSwapTokens,type:"button","aria-label":"Swap token directions"},i("svg",{key:"29f6a6e84cab1148483fd9d4d5b826d1ce1addc6",viewBox:"0 0 24 24",fill:"currentColor"},i("path",{key:"9438c250bf850570a351ddbd35080330a48b3486",d:"M16 17.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3L5 6.99h3V14h2V6.99h3L9 3z"})))),i("div",{key:"4e04ca2d6cfcdbf0e829f6e7a4f5ca960e91ab61",class:"token-input-section"},i("div",{key:"96741fa0835624852d2a825f2d0c84c15c34b623",class:"input-header"},i("span",{key:"30160c813db619e0f018a9181d33884f766e5bee",class:"input-label"},"To"),this.outputToken?.balance&&i("span",{key:"3faeab1fc9e18eca537b92ef08fd708027a438bd",class:"balance-label"},"Balance: ",parseFloat(this.outputToken.balance).toLocaleString())),i("euclid-token-input",{key:"9e543d1a5a8e4f0961488781492a730dc6ad7358",id:"output-amount",value:this.outputAmount,placeholder:"0.0",disabled:true,loading:this.isQuoting,"token-selectable":false},i("div",{key:"dd600ad7c8a4d1e8b788a83d9a970d115ce10b07",slot:"token",class:"token-selector",onClick:e=>{e.preventDefault();e.stopPropagation();this.openTokenSelector("output")}},this.outputToken?i("div",{class:"selected-token"},this.outputToken.logoUrl&&i("img",{src:this.outputToken.logoUrl,alt:this.outputToken.symbol,class:"token-logo"}),i("div",{class:"token-info"},i("span",{class:"token-symbol"},this.outputToken.symbol),i("span",{class:"token-name"},this.outputToken.name)),i("svg",{class:"dropdown-arrow",viewBox:"0 0 24 24",fill:"currentColor"},i("path",{d:"M7 10l5 5 5-5z"}))):i("div",{class:"select-token-button"},i("span",null,"Select Token"),i("svg",{class:"dropdown-arrow",viewBox:"0 0 24 24",fill:"currentColor"},i("path",{d:"M7 10l5 5 5-5z"})))))),this.currentQuote&&i("div",{key:"7ee2e573475bf150dea3927dea17a66352ff4a71",class:"quote-info"},i("div",{key:"120455f69a2a752b41875dcda6efda409c636427",class:"quote-row"},i("span",{key:"8dbbb007bab04b1ac3bf43b70e4731f602c10c9e",class:"quote-label"},"Rate"),i("span",{key:"e4beb2f56d594f451a17e84787f2e3777a399779",class:"quote-value"},"1 ",this.inputToken?.symbol," = ",this.currentQuote.exchangeRate.toFixed(6)," ",this.outputToken?.symbol)),this.currentQuote.priceImpact>.1&&i("div",{key:"8e4438e0d89d145badc724da3edadcad69fd573c",class:"quote-row"},i("span",{key:"f5fbfa8577d602745769aa2431ed9692c3c994ca",class:"quote-label"},"Price Impact"),i("span",{key:"ceb363e5e088235e919edbf5697f8af6287c6132",class:{"quote-value":true,"quote-value--warning":this.currentQuote.priceImpact>3,"quote-value--danger":this.currentQuote.priceImpact>15}},this.currentQuote.priceImpact.toFixed(2),"%")),i("div",{key:"d68f55451a1dfabe9a49d6843a457d82eb812212",class:"quote-row"},i("span",{key:"5584226437c677b4561b1ddcd4d2a41ed5fc4c39",class:"quote-label"},"Minimum Received"),i("span",{key:"03ed46a718ef28b0e20a9230c50a04cb795c124d",class:"quote-value"},this.currentQuote.minimumReceived," ",this.outputToken?.symbol)),i("div",{key:"64935a8abf4bc4c69f5a03d5df85cebfe3b6a49d",class:"quote-row"},i("span",{key:"b6fc1798f336d3440bd8312f650621dc91bbc33d",class:"quote-label"},"Network Fee"),i("span",{key:"e762547bdbc404653b62fc3c106bfa116872bcfb",class:"quote-value"},this.currentQuote.gasEstimate," ETH"))),i("euclid-button",{key:"3457c35ac992b5d294250ecbdeacb2827f3f3ed8",variant:"primary",size:"lg","full-width":true,loading:this.loading,disabled:!this.canSwap(),onClick:this.handleSwap},this.getSwapButtonText()))}get element(){return s(this)}};X.style=K;var ee;class te{get keplr(){return window.keplr}isInstalled(){return!!window.keplr}async connect(e){try{if(!this.isInstalled()){return{success:false,error:"Keplr wallet not installed"}}if(e.type==="Cosmwasm"){try{await this.keplr.experimentalSuggestChain({chainId:e.chain_id,chainName:e.display_name,rpc:"https://rpc.cosmos.network",rest:"https://api.cosmos.network",bip44:{coinType:118},bech32Config:{bech32PrefixAccAddr:this.getAddressPrefix(e.chain_id),bech32PrefixAccPub:this.getAddressPrefix(e.chain_id)+"pub",bech32PrefixValAddr:this.getAddressPrefix(e.chain_id)+"valoper",bech32PrefixValPub:this.getAddressPrefix(e.chain_id)+"valoperpub",bech32PrefixConsAddr:this.getAddressPrefix(e.chain_id)+"valcons",bech32PrefixConsPub:this.getAddressPrefix(e.chain_id)+"valconspub"},currencies:[{coinDenom:"ATOM",coinMinimalDenom:"uatom",coinDecimals:6}],feeCurrencies:[{coinDenom:"ATOM",coinMinimalDenom:"uatom",coinDecimals:6}],stakeCurrency:{coinDenom:"ATOM",coinMinimalDenom:"uatom",coinDecimals:6}})}catch(e){console.warn("Failed to suggest chain to Keplr:",e)}}await this.keplr.enable(e.chain_id);const t=this.keplr.getOfflineSigner(e.chain_id);const i=await t.getAccounts();if(i.length===0){return{success:false,error:"No accounts found"}}return{success:true,address:i[0].address,chainId:e.chain_id}}catch(e){return{success:false,error:e instanceof Error?e.message:"Failed to connect to Keplr"}}}async disconnect(e){console.log("Keplr disconnect requested for:",e)}async getAddress(e){try{if(!this.isInstalled())return null;const t=await this.keplr.getKey(e);return t.bech32Address}catch{return null}}async switchChain(e){try{await this.keplr.enable(e.chain_id);return true}catch{return false}}getAddressPrefix(e){const t={"cosmoshub-4":"cosmos","osmosis-1":"osmo","juno-1":"juno","stargaze-1":"stars"};return t[e]||"cosmos"}}class ie{get ethereum(){return window.ethereum}isInstalled(){return!!window.ethereum&&window.ethereum.isMetaMask}async connect(e){try{if(!this.isInstalled()){return{success:false,error:"MetaMask not installed"}}if(e.type!=="EVM"){return{success:false,error:"MetaMask only supports EVM chains"}}const t=await this.ethereum.request({method:"eth_requestAccounts"});if(!Array.isArray(t)||t.length===0){return{success:false,error:"No accounts found"}}const i=await this.switchChain(e);if(!i){return{success:false,error:"Failed to switch network"}}return{success:true,address:t[0],chainId:e.chain_id}}catch(e){return{success:false,error:e instanceof Error?e.message:"Failed to connect to MetaMask"}}}async disconnect(e){}async getAddress(e){try{if(!this.isInstalled())return null;const e=await this.ethereum.request({method:"eth_accounts"});return Array.isArray(e)&&e.length>0?e[0]:null}catch{return null}}async switchChain(e){try{const t=`0x${parseInt(e.chain_id).toString(16)}`;try{await this.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:t}]});return true}catch(i){if(i.code===4902){await this.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:t,chainName:e.display_name,rpcUrls:["https://rpc.example.com"],nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},blockExplorerUrls:e.explorer_url?[e.explorer_url]:[]}]});return true}throw i}}catch{return false}}}class ae{get cosmostation(){return window.cosmostation}isInstalled(){return!!window.cosmostation}async connect(e){try{if(!this.isInstalled()){return{success:false,error:"Cosmostation wallet not installed"}}if(e.type!=="Cosmwasm"){return{success:false,error:"Cosmostation only supports Cosmos chains"}}const t=await this.cosmostation.cosmos.request({method:"cos_requestAccount",params:{chainName:e.chain_id}});return{success:true,address:t.address,chainId:e.chain_id}}catch(e){return{success:false,error:e instanceof Error?e.message:"Failed to connect to Cosmostation"}}}async disconnect(e){console.log("Cosmostation disconnect requested for:",e)}async getAddress(e){try{if(!this.isInstalled())return null;const t=await this.cosmostation.cosmos.request({method:"cos_account",params:{chainName:e}});return t?.address||null}catch{return null}}async switchChain(e){return true}}class se{get phantom(){return window.phantom?.ethereum}get phantomSolana(){return window.phantom?.solana}isInstalled(){return!!(this.phantom||this.phantomSolana?.isPhantom)}async connect(e){try{if(!this.isInstalled()){return{success:false,error:"Phantom wallet not installed"}}if(e.type!=="EVM"){return{success:false,error:"Phantom only supports EVM chains"}}if(!this.phantom){return{success:false,error:"Phantom Ethereum provider not available. Please enable Ethereum support in Phantom."}}const t=await this.phantom.request({method:"eth_requestAccounts"});if(!Array.isArray(t)||t.length===0){return{success:false,error:"No accounts found"}}return{success:true,address:t[0],chainId:e.chain_id}}catch(e){return{success:false,error:e instanceof Error?e.message:"Failed to connect to Phantom"}}}async disconnect(e){}async getAddress(e){try{if(!this.isInstalled())return null;const e=await this.phantom.request({method:"eth_accounts"});return Array.isArray(e)&&e.length>0?e[0]:null}catch{return null}}async switchChain(e){try{const t=`0x${parseInt(e.chain_id).toString(16)}`;await this.phantom.request({method:"wallet_switchEthereumChain",params:[{chainId:t}]});return true}catch{return false}}}class oe{static getAdapter(e){let t=e;if(e==="cosmostation"){t="cosmostation"}else if(e==="walletconnect"){t="metamask"}else if(e==="custom"){t="metamask"}else if(e==="other"){t="metamask"}return this.adapters.get(t)||null}static getAvailableWallets(){return Array.from(this.adapters.entries()).map((([e,t])=>({type:e,installed:t.isInstalled()})))}static async connectWallet(e,t){const i=this.getAdapter(e);if(!i){return{success:false,error:`Adapter not found for ${e}`}}return i.connect(t)}static async disconnectWallet(e,t){const i=this.getAdapter(e);if(i){await i.disconnect(t)}}}ee=oe;oe.adapters=new Map;(()=>{ee.adapters.set("keplr",new te);ee.adapters.set("metamask",new ie);ee.adapters.set("phantom",new se);ee.adapters.set("cosmostation",new ae)})();const re=class{constructor(t){e(this,t);this.isInitialized=false;this.routePollingActive=false}async componentWillLoad(){await this.initialize()}async componentDidLoad(){}disconnectedCallback(){this.stopRoutePolling();x.unregister("swap-routes")}async initialize(){console.log("🔄 Initializing Swap Controller...");c.onChange("fromToken",(()=>this.handleTokenChange()));c.onChange("toToken",(()=>this.handleTokenChange()));c.onChange("fromAmount",(()=>this.handleAmountChange()));this.isInitialized=true;console.log("✅ Swap Controller initialized")}handleTokenChange(){c.setRoutes([]);c.setSelectedRoute(undefined);this.stopRoutePolling();if(c.state.fromToken&&c.state.toToken&&c.state.fromAmount){this.startRoutePolling()}}handleAmountChange(){const{fromToken:e,toToken:t,fromAmount:i}=c.state;if(e&&t&&i&&parseFloat(i)>0){this.debounceRouteFetch()}else{this.stopRoutePolling();c.setRoutes([])}}debounceRouteFetch(){if(this.debounceTimeout){clearTimeout(this.debounceTimeout)}this.debounceTimeout=window.setTimeout((()=>{this.startRoutePolling()}),500)}startRoutePolling(){if(this.routePollingActive)return;console.log("🔄 Starting route polling...");this.routePollingActive=true;this.fetchRoutes();x.register("swap-routes",(async()=>{await this.fetchRoutes()}),{activeInterval:d.ROUTE_REFRESH_INTERVAL,backgroundInterval:d.ROUTE_REFRESH_INTERVAL*3,pauseOnHidden:false})}stopRoutePolling(){if(!this.routePollingActive)return;console.log("⏹️ Stopping route polling...");this.routePollingActive=false;x.unregister("swap-routes");if(this.routePollingInterval){clearInterval(this.routePollingInterval)}}async fetchRoutes(){const{fromToken:e,toToken:t,fromAmount:i}=c.state;if(!e||!t||!i||parseFloat(i)<=0){return}const a=`routes-${e.id}-${t.id}-${i}`;return y.request(a,(async()=>{try{c.setLoadingRoutes(true);console.log("🛣️ Fetching swap routes:",{from:e.symbol,to:t.symbol,amount:i});const a=await u.getRoutesWrapped({amount_in:i,token_in:e.id,token_out:t.id,external:true});if(a.success&&a.data){const e=a.data.paths||[];c.setRoutes(e);if(e.length>0&&!c.state.selectedRoute){c.setSelectedRoute(e[0])}console.log(`✅ Found ${e.length} swap routes`);return{success:true,routeCount:e.length}}else{console.warn("⚠️ Failed to fetch routes:",a.error);c.setRoutes([]);return{success:false,error:a.error}}}catch(e){console.error("❌ Error fetching routes:",e);c.setRoutes([]);throw e}finally{c.setLoadingRoutes(false)}}),{ttl:5e3})}getUserAddressForChain(e){const t=o.getWallet(e);return t?.address}async executeSwap(){try{const{fromToken:e,toToken:t,fromAmount:i,selectedRoute:a,slippage:s}=c.state;if(!e||!t||!i||!a){return{success:false,error:"Missing required swap parameters"}}const r=o.getWallet(e.chainUID);if(!r?.isConnected){return{success:false,error:`Wallet not connected for ${e.chainUID}`}}if(!o.hasSufficientBalance(e.chainUID,e.id,i)){return{success:false,error:"Insufficient balance"}}c.setSwapping(true);console.log("🔄 Executing swap...",{from:e.symbol,to:t.symbol,amount:i,route:a.id});const n=oe.getAdapter(r.type);if(!n){return{success:false,error:`Wallet adapter not found for ${r.type}`}}const l=await u.createSwapTransactionWrapped({amount_in:i,asset_in:{token:e.id,token_type:{native:{denom:e.id}}},slippage:s.toString(),minimum_receive:this.calculateMinimumReceived(a.outputAmount,s),sender:{address:r.address,chain_uid:e.chain_uid||e.chainUID},swap_path:{path:a.path||[]},timeout:(Math.floor(Date.now()/1e3)+1200).toString()});if(l.success&&l.data){const t=`swap_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;o.addTransaction(e.chainUID,{txHash:t,timestamp:Date.now(),type:"swap"});g(b.TRANSACTION.SUBMITTED,{txHash:t,chainUID:e.chainUID,type:"swap"});console.log("✅ Swap transaction submitted:",t);return{success:true,txHash:t}}else{return{success:false,error:l.error||"Swap execution failed"}}}catch(e){const t=e instanceof Error?e.message:"Unknown error occurred";console.error("❌ Swap execution error:",t);return{success:false,error:t}}finally{c.setSwapping(false)}}calculateMinimumReceived(e,t){try{const i=BigInt(e);const a=BigInt(Math.floor((100-t)*100));const s=i*a/BigInt(1e4);return s.toString()}catch{return e}}async handleSwapExecution(){console.log("🔄 Swap execution requested via event");const e=await this.executeSwap();if(e.success){g(b.SWAP.EXECUTE_SUCCESS,{txHash:e.txHash})}else{g(b.SWAP.EXECUTE_FAILED,{error:e.error})}}handleRouteRefresh(){console.log("🔄 Manual route refresh requested");this.fetchRoutes()}handleStopPolling(){this.stopRoutePolling()}handleStartPolling(){this.startRoutePolling()}onInitializedChange(e){if(e){console.log("📊 Swap Controller ready for route polling")}}render(){return null}static get watchers(){return{isInitialized:["onInitializedChange"]}}};const ne=":host{display:block;width:100%}.token-content{width:100%}";const le=class{constructor(i){e(this,i);this.tokenSelect=t(this,"tokenSelect");this.handleTokenSelected=e=>{const t=e.detail.item;const i=this.convertTokenMetadataToTokenInfo(t);const a=r.state.tokenSelectorType||"input";this.tokenSelect.emit({token:i,selectorType:a});r.closeTokenModal()}}convertTokenMetadataToTokenInfo(e){return{tokenId:e.tokenId,symbol:e.symbol||e.displayName.toUpperCase(),name:e.displayName,decimals:e.coinDecimal,logoUrl:e.logo||e.image,balance:"0",displayName:e.displayName,coinDecimal:e.coinDecimal,chain_uid:e.chain_uid||e.chain_uids?.[0]||"",chainUID:e.chainUID||e.chain_uid||e.chain_uids?.[0]||"",address:e.address||e.tokenId,logo:e.logo||e.image,price:e.price?parseFloat(e.price):undefined,priceUsd:e.price}}render(){return i("div",{key:"dffc95590d2e6f0a1771c5cebbca824609fdbc27",class:"token-content"},i("euclid-data-list",{key:"1feb65e7b2e789df6740d2981a726a4cf519081c",dataType:"tokens",displayMode:"list-item",itemsPerPage:20,infiniteScroll:true,useParentScroll:true,searchable:true,sortable:true,showStats:false,onItemSelected:this.handleTokenSelected}))}};le.style=ne;const ce=":host{display:block;width:100%}.token-input-wrapper{width:100%}.token-input-label{display:block;font-size:var(--euclid-text-sm);font-weight:var(--euclid-font-medium);color:var(--euclid-text-secondary);margin-bottom:var(--euclid-space-2)}.token-input{position:relative;background:var(--euclid-surface);border:2px solid var(--euclid-border);border-radius:var(--euclid-radius-xl);transition:all var(--euclid-transition-fast);overflow:hidden}.token-input:hover:not(.token-input--disabled){border-color:var(--euclid-border-hover)}.token-input--focused{border-color:var(--euclid-interactive-primary);box-shadow:0 0 0 3px rgba(37, 99, 235, 0.1)}.token-input--disabled{background:var(--euclid-surface-secondary);border-color:var(--euclid-border);opacity:0.6;cursor:not-allowed}.token-input--error{border-color:var(--euclid-danger-500);box-shadow:0 0 0 3px rgba(239, 68, 68, 0.1)}.token-input--loading{pointer-events:none}.token-input-main{display:flex;align-items:center;min-height:3.5rem;padding:var(--euclid-space-3) var(--euclid-space-4)}.input-section{flex:1;position:relative;display:flex;align-items:center}.amount-input{width:100%;background:transparent;border:none;outline:none;font-size:var(--euclid-text-lg);font-weight:var(--euclid-font-medium);color:var(--euclid-text-primary);padding:0;margin:0}.amount-input::placeholder{color:var(--euclid-text-muted);font-weight:var(--euclid-font-normal)}.amount-input:disabled{cursor:not-allowed}.loading-spinner{position:absolute;right:0;display:flex;align-items:center;justify-content:center;width:1.5rem;height:1.5rem}.spinner{width:1rem;height:1rem;border:2px solid var(--euclid-border);border-top:2px solid var(--euclid-interactive-primary);border-radius:50%;animation:euclid-spin 1s linear infinite}.token-selector{display:flex;align-items:center;margin-left:var(--euclid-space-4);padding:var(--euclid-space-2) var(--euclid-space-3);border-radius:var(--euclid-radius-lg);background:var(--euclid-surface-secondary);border:1px solid var(--euclid-border);transition:all var(--euclid-transition-fast);min-width:120px;justify-content:center}.token-selector--clickable{cursor:pointer}.token-selector--clickable:hover:not(.token-selector--empty){background:var(--euclid-surface-secondary);transform:translateY(-1px)}.token-selector--empty{border-style:dashed;color:var(--euclid-text-muted)}.token-selector--clickable.token-selector--empty:hover{background:var(--euclid-surface-secondary);border-color:var(--euclid-interactive-primary);color:var(--euclid-interactive-primary)}.token-info{display:flex;align-items:center;gap:var(--euclid-space-2);font-weight:var(--euclid-font-medium);color:var(--euclid-text-primary)}.token-logo{width:var(--euclid-space-6);height:var(--euclid-space-6);border-radius:50%;background:var(--euclid-surface-secondary)}.token-symbol{font-size:var(--euclid-text-base);font-weight:var(--euclid-font-semibold)}.select-token{display:flex;align-items:center;gap:var(--euclid-space-2);font-size:var(--euclid-text-sm);font-weight:var(--euclid-font-medium)}.chevron-icon{width:1rem;height:1rem;transition:transform var(--euclid-transition-fast);color:var(--euclid-text-muted)}.token-selector--clickable:hover .chevron-icon{color:var(--euclid-interactive-primary);transform:translateY(1px)}.token-input-footer{display:flex;align-items:center;justify-content:space-between;padding:var(--euclid-space-2) var(--euclid-space-4);background:var(--euclid-surface-secondary);border-top:1px solid var(--euclid-border)}.balance-section{display:flex;align-items:center;gap:var(--euclid-space-1);font-size:var(--euclid-text-sm)}.balance-label{color:var(--euclid-text-secondary);font-weight:var(--euclid-font-normal)}.balance-value{color:var(--euclid-text-primary);font-weight:var(--euclid-font-medium)}.max-button{padding:var(--euclid-space-1) var(--euclid-space-3);background:var(--euclid-interactive-primary);color:var(--euclid-white);border:none;border-radius:var(--euclid-radius-lg);font-size:var(--euclid-text-sm);font-weight:var(--euclid-font-semibold);cursor:pointer;transition:all var(--euclid-transition-fast)}.max-button:hover:not(:disabled){background:var(--euclid-interactive-primary-hover);transform:translateY(-1px)}.max-button:active:not(:disabled){transform:translateY(0)}.max-button:disabled{background:var(--euclid-text-muted);cursor:not-allowed;transform:none}.error-message{margin-top:var(--euclid-space-2);font-size:var(--euclid-text-sm);color:var(--euclid-danger-500);font-weight:var(--euclid-font-medium)}@media (max-width: 640px){.token-input-main{min-height:3rem;flex-direction:column;align-items:stretch;gap:var(--euclid-space-3)}.input-section{order:2}.token-selector{order:1;margin-left:0;justify-content:flex-start}}@media (prefers-reduced-motion: reduce){.token-selector,.max-button,.spinner,.chevron-icon{animation:none !important;transition:none !important}}.token-selector--clickable:focus-visible,.max-button:focus-visible{outline:2px solid var(--euclid-interactive-primary);outline-offset:2px}.amount-input:focus-visible{outline:none}@media (prefers-color-scheme: dark){:host{--gray-100:#212529;--gray-200:#343a40;--gray-300:#495057;--gray-400:#6c757d;--gray-500:#adb5bd;--gray-600:#ced4da;--gray-700:#dee2e6;--gray-800:#e9ecef;--gray-900:#f8f9fa;--white-color:#212529;--dark-color:#f8f9fa}}.token-input-wrapper{width:100%}.token-input-label{display:block;font-size:var(--font-size-sm);font-weight:var(--font-weight-medium);color:var(--gray-700);margin-bottom:0.5rem}.token-input{position:relative;background:var(--white-color);border:2px solid var(--gray-300);border-radius:var(--border-radius-lg);transition:all var(--transition-fast);overflow:hidden}.token-input:hover:not(.token-input--disabled){border-color:var(--gray-400)}.token-input--focused{border-color:var(--primary-color);box-shadow:0 0 0 3px rgba(0, 123, 255, 0.1)}.token-input--disabled{background:var(--gray-100);border-color:var(--gray-200);opacity:0.6;cursor:not-allowed}.token-input--error{border-color:var(--danger-color);box-shadow:0 0 0 3px rgba(220, 53, 69, 0.1)}.token-input--loading{pointer-events:none}.token-input-main{display:flex;align-items:center;min-height:3.5rem;padding:0.75rem 1rem}.input-section{flex:1;position:relative;display:flex;align-items:center}.amount-input{width:100%;background:transparent;border:none;outline:none;font-size:var(--font-size-lg);font-weight:var(--font-weight-medium);color:var(--gray-900);padding:0;margin:0}.amount-input::placeholder{color:var(--gray-400);font-weight:var(--font-weight-normal)}.amount-input:disabled{cursor:not-allowed}.loading-spinner{position:absolute;right:0;display:flex;align-items:center;justify-content:center;width:1.5rem;height:1.5rem}.spinner{width:1rem;height:1rem;border:2px solid var(--gray-300);border-top:2px solid var(--primary-color);border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.token-selector{display:flex;align-items:center;margin-left:1rem;padding:0.5rem 0.75rem;border-radius:var(--border-radius);background:var(--gray-100);border:1px solid var(--gray-200);transition:all var(--transition-fast);min-width:120px;justify-content:center}.token-selector--clickable{cursor:pointer}.token-selector--clickable:hover:not(.token-selector--empty){background:var(--gray-200);transform:translateY(-1px)}.token-selector--empty{border-style:dashed;color:var(--gray-500)}.token-selector--clickable.token-selector--empty:hover{background:var(--gray-200);border-color:var(--primary-color);color:var(--primary-color)}.token-info{display:flex;align-items:center;gap:0.5rem;font-weight:var(--font-weight-medium);color:var(--gray-900)}.token-logo{width:1.5rem;height:1.5rem;border-radius:50%;background:var(--gray-200)}.token-symbol{font-size:var(--font-size-base);font-weight:var(--font-weight-semibold)}.select-token{display:flex;align-items:center;gap:0.5rem;font-size:var(--font-size-sm);font-weight:var(--font-weight-medium)}.chevron-icon{width:1rem;height:1rem;transition:transform var(--transition-fast);color:var(--gray-500)}.token-selector--clickable:hover .chevron-icon{color:var(--primary-color);transform:translateY(1px)}.token-input-footer{display:flex;align-items:center;justify-content:space-between;padding:0.5rem 1rem;background:var(--gray-50);border-top:1px solid var(--gray-200)}@media (prefers-color-scheme: dark){.token-input-footer{background:var(--gray-200)}}.balance-section{display:flex;align-items:center;gap:0.25rem;font-size:var(--font-size-sm)}.balance-label{color:var(--gray-600);font-weight:var(--font-weight-normal)}.balance-value{color:var(--gray-900);font-weight:var(--font-weight-medium)}.max-button{padding:0.25rem 0.75rem;background:var(--primary-color);color:var(--white-color);border:none;border-radius:var(--border-radius);font-size:var(--font-size-sm);font-weight:var(--font-weight-semibold);cursor:pointer;transition:all var(--transition-fast)}.max-button:hover:not(:disabled){background:var(--primary-color-dark);transform:translateY(-1px)}.max-button:active:not(:disabled){transform:translateY(0)}.max-button:disabled{background:var(--gray-400);cursor:not-allowed;transform:none}.error-message{margin-top:0.5rem;font-size:var(--font-size-sm);color:var(--danger-color);font-weight:var(--font-weight-medium)}@media (max-width: 640px){.token-input-main{flex-direction:column;align-items:stretch;gap:0.75rem;padding:1rem}.input-section{order:2}.token-selector{order:1;margin-left:0;justify-content:space-between;min-width:auto}.token-input-footer{flex-direction:column;gap:0.5rem;align-items:stretch}.balance-section{justify-content:center}.max-button{align-self:stretch}}@media (prefers-contrast: high){.token-input{border-width:3px}.token-input--focused{box-shadow:0 0 0 4px rgba(0, 123, 255, 0.3)}.token-input--error{box-shadow:0 0 0 4px rgba(220, 53, 69, 0.3)}}@media (prefers-reduced-motion: reduce){*{animation-duration:0.01ms !important;animation-iteration-count:1 !important;transition-duration:0.01ms !important}.spinner{animation:none}}.token-selector--clickable:focus-visible,.max-button:focus-visible{outline:2px solid var(--primary-color);outline-offset:2px}.amount-input:focus-visible{outline:none;}";const de=class{constructor(i){e(this,i);this.valueChange=t(this,"valueChange");this.tokenSelect=t(this,"tokenSelect");this.maxClick=t(this,"maxClick");this.value="";this.placeholder="0.0";this.disabled=false;this.showBalance=true;this.showMax=true;this.loading=false;this.tokenSelectable=true;this.focused=false;this.hasError=false;this.handleInputChange=e=>{const t=e.target;let i=t.value;i=i.replace(/[^0-9.]/g,"");const a=i.split(".");if(a.length>2){i=a[0]+"."+a.slice(1).join("")}if(this.token?.decimals&&a.length===2){const e=a[1];if(e.length>this.token.decimals){i=a[0]+"."+e.slice(0,this.token.decimals)}}this.value=i;t.value=i;this.valueChange.emit(i)};this.handleInputFocus=()=>{this.focused=true};this.handleInputBlur=()=>{this.focused=false};this.handleTokenClick=()=>{if(this.tokenSelectable&&!this.disabled){this.tokenSelect.emit()}};this.handleMaxClick=()=>{if(this.token?.balance&&!this.disabled){this.value=this.token.balance;if(this.inputRef){this.inputRef.value=this.token.balance}this.valueChange.emit(this.token.balance);this.maxClick.emit()}}}onValueChange(e){this.validateInput(e)}onErrorChange(e){this.hasError=!!e}onTokenChange(){this.updateUserBalance()}componentWillLoad(){this.setupStoreSubscriptions();this.updateUserBalance()}disconnectedCallback(){}setupStoreSubscriptions(){o.onChange("balances",(()=>{this.updateUserBalance()}))}updateUserBalance(){if(this.token?.symbol){const e=o.getAllConnectedWallets();if(e.length>0){const t=e[0].chainUID;const i=o.getWalletBalance(t,this.token.symbol);this.userBalance=i?.amount||"0"}else{this.userBalance="0"}}}validateInput(e){this.hasError=false;if(!e)return;const t=parseFloat(e);if(isNaN(t)||t<0){this.hasError=true;return}if(this.token?.balance&&this.showBalance){const e=parseFloat(this.token.balance);if(t>e){this.hasError=true;return}}}formatBalance(e){const t=parseFloat(e);if(isNaN(t))return"0";if(t<.001)return"<0.001";if(t<1)return t.toFixed(6);if(t<1e3)return t.toFixed(3);if(t<1e6)return(t/1e3).toFixed(2)+"K";return(t/1e6).toFixed(2)+"M"}render(){const e={"token-input":true,"token-input--focused":this.focused,"token-input--disabled":this.disabled,"token-input--error":this.hasError||!!this.error,"token-input--loading":this.loading};const t={"token-selector":true,"token-selector--clickable":this.tokenSelectable&&!this.disabled,"token-selector--empty":!this.token};return i("div",{key:"5d813a64c5bfa605b26ea495fbf370da5a648a7a",class:"token-input-wrapper"},this.label&&i("label",{key:"49c8b80599b2a7d70eebf2b7e92a17355dca77e8",class:"token-input-label"},this.label),i("div",{key:"bcf78bfe8e01cb9c4bf9555b85601cceffa2967a",class:e},i("div",{key:"95e15e8caf8abbd69cffd3eff74c048e3b91f9e0",class:"token-input-main"},i("div",{key:"02e72dc1013a9e4dd65e8d1679c674615e4cad6c",class:"input-section"},i("input",{key:"ba9d3a391a78c1756bac93c98b5fccd92ca4b738",ref:e=>this.inputRef=e,type:"text",inputMode:"decimal",placeholder:this.placeholder,value:this.value,disabled:this.disabled,onInput:this.handleInputChange,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,class:"amount-input"}),this.loading&&i("div",{key:"abc1b979f0832c6be26ab04ea68d234dfb962a2f",class:"loading-spinner"},i("div",{key:"70cab42c8fc92e1d2b506cf1af0a1ebe9ab688cd",class:"spinner"}))),i("div",{key:"dd78f08eb5704bb86e7d2795599f40c840309fa6",class:t,onClick:this.tokenSelectable&&!this.disabled?this.handleTokenClick:undefined},i("slot",{key:"74d83e2d0afa7ffc098dd21ee1062b50696607b6",name:"token"},this.token?i("div",{class:"token-info"},this.token.logoUrl&&i("img",{src:this.token.logoUrl,alt:this.token.symbol,class:"token-logo"}),i("span",{class:"token-symbol"},this.token.symbol),this.tokenSelectable&&!this.disabled&&i("svg",{class:"chevron-icon",viewBox:"0 0 20 20",fill:"currentColor"},i("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"}))):i("div",{class:"select-token"},i("span",null,"Select Token"),this.tokenSelectable&&!this.disabled&&i("svg",{class:"chevron-icon",viewBox:"0 0 20 20",fill:"currentColor"},i("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})))))),(this.showBalance||this.showMax)&&this.token&&i("div",{key:"b95dacd45688be2787d980d73c3e117752e493e2",class:"token-input-footer"},this.showBalance&&(this.userBalance||this.token.balance)&&i("div",{key:"45e4af9fe5625dce939214456ecae55c93cc108f",class:"balance-section"},i("span",{key:"dc5534a4a8920ccd6f2a473cacdb6f99a32deffa",class:"balance-label"},"Balance:"),i("span",{key:"a9abe39e7fccbfdf3209c9160f27f702a0374739",class:"balance-value"},this.formatBalance(this.userBalance||this.token.balance||"0")," ",this.token.symbol)),this.showMax&&this.token.balance&&i("button",{key:"4fd5e04d1888416854c28531aef420a27743a5dd",class:"max-button",onClick:this.handleMaxClick,disabled:this.disabled,type:"button"},"MAX"))),(this.error||this.hasError)&&i("div",{key:"23747247981f78ea5ea4e20f796fa204ae180146",class:"error-message"},this.error||"Invalid amount"))}static get watchers(){return{value:["onValueChange"],error:["onErrorChange"],token:["onTokenChange"]}}};de.style=ce;const ue=class{constructor(t){e(this,t);this.isInitialized=false;this.trackingTransactions=new Map}async componentWillLoad(){await this.initialize()}async componentDidLoad(){}disconnectedCallback(){this.stopTracking();x.unregister("tx-tracker")}async initialize(){console.log("🔍 Initializing Transaction Tracker Controller...");this.startTracking();this.isInitialized=true;console.log("✅ Transaction Tracker Controller initialized")}startTracking(){x.register("tx-tracker",(async()=>{await this.checkPendingTransactions()}),{activeInterval:1e4,backgroundInterval:3e4,pauseOnHidden:false})}stopTracking(){x.unregister("tx-tracker");if(this.trackingInterval){clearInterval(this.trackingInterval)}}async trackTransaction(e,t,i){console.log("🔍 Starting to track transaction:",{txHash:e,chainUID:t,type:i});this.trackingTransactions.set(e,{chainUID:t,type:i,pollCount:0});await this.checkTransactionStatus(e,t,i)}async checkPendingTransactions(){const e=Array.from(this.trackingTransactions.entries()).map((([e,{chainUID:t,type:i,pollCount:a}])=>this.checkTransactionStatus(e,t,i,a)));await Promise.allSettled(e)}async checkTransactionStatus(e,t,i,a=0){const s=`tx-status-${e}-${t}`;await y.request(s,(async()=>{try{console.log(`🔍 Checking transaction status: ${e}`);const s=await u.trackTransactionWrapped(e,t);if(s.success&&s.data){const{status:r}=s.data;o.updateTransactionStatus(t,e,r);if(r==="confirmed"||r==="failed"){this.trackingTransactions.delete(e);g(b.TRANSACTION.FINALIZED,{txHash:e,chainUID:t,type:i,status:r});console.log(`✅ Transaction finalized: ${e} - Status: ${r}`);if(r==="confirmed"){this.refreshUserDataAfterSuccess(t,i)}}else{const s=a+1;if(s>=120){console.warn(`⚠️ Transaction tracking timeout: ${e}`);this.trackingTransactions.delete(e);o.updateTransactionStatus(t,e,"failed");g(b.TRANSACTION.TIMEOUT,{txHash:e,chainUID:t,type:i})}else{this.trackingTransactions.set(e,{chainUID:t,type:i,pollCount:s})}}}else{console.warn(`⚠️ Failed to check transaction status: ${e}`,s.error)}return{success:true}}catch(t){console.error(`❌ Error checking transaction status: ${e}`,t);throw t}}),{ttl:5e3})}refreshUserDataAfterSuccess(e,t){g(b.USER.REFRESH_DATA);if(t==="add_liquidity"||t==="remove_liquidity"){g(b.LIQUIDITY.POSITIONS_REFRESH)}g(b.USER.BALANCES_REFRESH,{chainUID:e})}getTrackingStats(){const e={totalTracking:this.trackingTransactions.size,byType:{},byChain:{}};this.trackingTransactions.forEach((({chainUID:t,type:i})=>{e.byType[i]=(e.byType[i]||0)+1;e.byChain[t]=(e.byChain[t]||0)+1}));return e}async checkTransactionManually(e,t){try{const i=await u.trackTransactionWrapped(e,t);if(i.success&&i.data){return{success:true,status:i.data.status}}else{return{success:false,error:i.error||"Failed to check transaction status"}}}catch(e){return{success:false,error:e instanceof Error?e.message:"Unknown error"}}}async handleTransactionSubmitted(e){const{txHash:t,chainUID:i,type:a}=e.detail;console.log("🔍 Transaction submitted, starting tracking:",e.detail);await this.trackTransaction(t,i,a)}async handleTrackTransactionRequest(e){const{txHash:t,chainUID:i,type:a}=e.detail;console.log("🔍 Manual transaction tracking requested:",e.detail);await this.trackTransaction(t,i,a)}handleStopTrackingTransaction(e){const{txHash:t}=e.detail;console.log("⏹️ Stopping transaction tracking:",t);this.trackingTransactions.delete(t)}handleGetTrackingStats(){const e=this.getTrackingStats();g(b.TRANSACTION.STATS_RESPONSE,e)}onInitializedChange(e){if(e){console.log("🔍 Transaction Tracker Controller ready")}}render(){return null}static get watchers(){return{isInitialized:["onInitializedChange"]}}};const he=class{constructor(t){e(this,t);this.isInitialized=false;this.isLoading=false;this.error=null;this.retryCount=0;this.maxRetries=3;this.walletChangeTimeout=null}async componentWillLoad(){this.euclidConfig=this.config?JSON.parse(this.config):f;await this.initialize()}async componentDidLoad(){}disconnectedCallback(){x.unregister("subscription-balances");x.unregister("subscription-liquidityPositions");x.unregister("subscription-transactions");this.clearPeriodicRefresh();o.dispose?.()}async initialize(){console.log("👤 Initializing User Data Controller...");o.onChange("wallets",(async e=>{if(this.walletChangeTimeout){clearTimeout(this.walletChangeTimeout)}this.walletChangeTimeout=window.setTimeout((async()=>{const t=Object.values(e).filter((e=>e.isConnected));if(t.length>0){await this.handleWalletConnection(t)}else{this.handleWalletDisconnection()}this.walletChangeTimeout=null}),200)}));const e=o.getAllConnectedWallets();if(e.length>0){await this.handleWalletConnection(e)}this.isInitialized=true;console.log("✅ User Data Controller initialized")}async handleWalletConnection(e){try{this.isLoading=true;this.error=null;console.log("🔗 Wallets connected, loading user data...");await Promise.all([this.loadUserBalances(),this.loadLiquidityPositions(),this.loadUserTransactions()]);this.setupPeriodicRefresh();this.retryCount=0}catch(e){console.error("❌ Failed to load user data:",e);await this.handleLoadError(e)}finally{this.isLoading=false}}handleWalletDisconnection(){if(o.state.isConnected||o.getAllConnectedWallets().length>0){console.log("🔌 Wallets disconnected, clearing user data...");this.clearPeriodicRefresh();this.retryCount=0;o.clear()}}async loadUserBalances(){if(!v.hasSubscriptions("balances")){console.log("💰 Skipping balance fetch - no active subscriptions");return}const e=o.getAllConnectedWallets();return y.request("user-balances-fetch",(async()=>{const t="user-balances";w.startLoading(t,"Loading balances...",{showProgress:true});try{const i=e.map((async(i,a)=>{console.log(`💰 Loading balances for ${i.chainUID}:${i.address.slice(0,8)}...`);const s=(a+1)/e.length*100;w.updateProgress(t,s,`Loading ${i.chainUID} balances...`);try{const e=await T.getBalances(i.address,i.chainUID);if(e.balances&&e.balances.length>0){const t=e.balances.map((e=>({amount:e.amount,token_id:e.denom,token:e.denom,balance:e.amount,chain_uid:e.chain_uid,token_type:{native:{denom:e.denom}}})));o.updateWalletBalances(i.chainUID,t);return t}return[]}catch(e){console.warn(`⚠️ Failed to load balance for ${i.chainUID}:`,e.message);return[]}}));const a=await Promise.all(i);const s=a.flat().length;w.stopLoading(t);console.log(`✅ Updated ${s} balances for ${e.length} connected wallets`);return{success:true,balancesCount:s}}catch(e){w.stopLoading(t,e.message);throw e}}),{ttl:15e3})}async loadLiquidityPositions(){if(!v.hasSubscriptions("liquidityPositions")){console.log("🏊 Skipping liquidity positions fetch - no active subscriptions");return}const e=o.getAllConnectedWallets();return y.request("user-liquidity-positions",(async()=>{const t="liquidity-positions";w.startLoading(t,"Loading liquidity positions...",{showProgress:true});try{const i=e.map((async(i,a)=>{console.log(`🏊 Loading liquidity positions for ${i.chainUID}:${i.address.slice(0,8)}...`);const s=(a+1)/e.length*100;w.updateProgress(t,s,`Loading ${i.chainUID} positions...`);try{console.log("Liquidity positions loading - implementation pending");return[]}catch(e){console.warn(`⚠️ Failed to load liquidity positions for ${i.chainUID}:`,e.message);return[]}}));const a=await Promise.all(i);const s=a.flat().length;w.stopLoading(t);console.log(`✅ Updated ${s} liquidity positions for ${e.length} connected wallets`);return{success:true,positionsCount:s}}catch(e){w.stopLoading(t,e.message);throw e}}),{ttl:2e4})}async loadUserTransactions(){if(!v.hasSubscriptions("transactions")){console.log("📊 Skipping transactions fetch - no active subscriptions");return}const e=o.getAllConnectedWallets();for(const t of e){try{console.log(`📊 Loading transactions for ${t.chainUID}:${t.address.slice(0,8)}...`);console.log("Transactions loading - implementation pending")}catch(e){console.warn(`⚠️ Failed to load transactions for ${t.chainUID}:`,e.message)}}}calculatePoolShare(e,t){try{const i=parseFloat(e);const a=parseFloat(String(t.totalSupply||t.liquidity||"0"));if(a===0)return 0;return i/a*100}catch{return 0}}calculateTokenAmount(e,t){try{const i=parseFloat(String(t.reserve||t.balance||"0"));const a=i*e/100;return a.toString()}catch{return"0"}}calculatePositionValue(e,t){try{const i=parseFloat(String(t.tvl||t.liquidity||"0"));const a=i*e/100;return a.toString()}catch{return"0"}}setupPeriodicRefresh(){this.clearPeriodicRefresh();this.refreshTimer=window.setInterval((async()=>{const e=o.getAllConnectedWallets();if(e.length>0){console.log("🔄 Refreshing wallet data...");await this.refreshUserData()}}),this.euclidConfig.refreshIntervals.balances);console.log(`👤 User data refresh interval set to ${this.euclidConfig.refreshIntervals.balances}ms`)}clearPeriodicRefresh(){if(this.refreshTimer){clearInterval(this.refreshTimer);this.refreshTimer=null}}async refreshUserData(){const e=o.getAllConnectedWallets();if(e.length===0)return;try{this.isLoading=true;await Promise.all([this.loadUserBalances(),this.loadLiquidityPositions()]);console.log("Portfolio value calculation - implementation pending");this.retryCount=0}catch(e){console.warn("⚠️ Failed to refresh user data:",e);await this.handleLoadError(e)}finally{this.isLoading=false}}async handleLoadError(e){this.retryCount++;if(this.retryCount<this.maxRetries){console.log(`🔄 Retrying user data load (${this.retryCount}/${this.maxRetries})...`);const e=Math.pow(2,this.retryCount)*1e3;setTimeout((()=>{this.refreshUserData()}),e)}else{console.error("❌ Max retries reached for user data loading");this.error=e.message||"Failed to load user data"}}async handleRefreshRequest(){console.log("🔄 Manual user data refresh requested");await this.refreshUserData()}async handleBalancesSubscribe(){console.log("💰 Component subscribed to balance data - triggering fetch");await this.loadUserBalances()}handleBalancesUnsubscribe(){console.log("💰 Component unsubscribed from balance data")}async handleLiquidityPositionsSubscribe(){console.log("🏊 Component subscribed to liquidity position data - triggering fetch");await this.loadLiquidityPositions()}handleLiquidityPositionsUnsubscribe(){console.log("🏊 Component unsubscribed from liquidity position data")}handleClearRequest(){console.log("🗑️ User data clear requested");o.clear();this.clearPeriodicRefresh()}onInitializedChange(e){if(e){g(b.USER.CONTROLLER_READY,{timestamp:Date.now()})}}render(){return null}static get watchers(){return{isInitialized:["onInitializedChange"]}}};const pe=":host{display:block}.wallet-card{display:flex;align-items:center;gap:12px;padding:16px;border-radius:8px;background:var(--euclid-secondary-900, #ffffff);transition:all 0.2s ease;position:relative;box-shadow:0 1px 3px rgba(0, 0, 0, 0.1)}.wallet-card.clickable{cursor:pointer}.wallet-card.clickable:hover{box-shadow:0 4px 12px rgba(0, 0, 0, 0.15);transform:translateY(-1px)}.wallet-chain-logo{flex-shrink:0;width:40px;height:40px;border-radius:50%;overflow:hidden;display:flex;align-items:center;justify-content:center;background:var(--euclid-muted-bg, #f8fafc)}.wallet-chain-logo img{width:100%;height:100%;object-fit:cover}.wallet-info{flex:1;min-width:0}.wallet-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:4px}.wallet-provider{display:flex;align-items:center;gap:8px}.provider-name{font-weight:600;color:var(--euclid-text-primary, #1e293b);font-size:14px}.connection-indicator{font-size:11px;font-weight:500;padding:2px 6px;border-radius:12px;text-transform:uppercase;letter-spacing:0.025em}.connection-indicator.connected{background:var(--euclid-success-bg, #dcfce7);color:var(--euclid-success-color, #16a34a)}.connection-indicator.saved{background:var(--euclid-muted-bg, #f1f5f9);color:var(--euclid-text-secondary, #64748b)}.wallet-address{font-family:var(--euclid-mono-font, 'JetBrains Mono', monospace);font-size:13px;color:var(--euclid-text-secondary, #64748b);margin-bottom:6px}.wallet-chain-info{display:flex;align-items:center;gap:8px;font-size:12px}.chain-name{color:var(--euclid-text-primary, #1e293b);font-weight:500}.chain-type{color:var(--euclid-text-secondary, #64748b);background:var(--euclid-muted-bg, #f1f5f9);padding:2px 6px;border-radius:4px;text-transform:uppercase;font-size:10px;font-weight:600;letter-spacing:0.025em}.wallet-label{font-size:12px;color:var(--euclid-text-secondary, #64748b);margin-top:4px;font-style:italic}.connection-dot{position:absolute;top:8px;right:8px;width:8px;height:8px;border-radius:50%;background:var(--euclid-success-color, #10b981);box-shadow:0 0 0 2px var(--euclid-surface-color, #ffffff)}@media (prefers-color-scheme: dark){.wallet-card{background:var(--euclid-surface-dark, #1e293b);box-shadow:0 1px 3px rgba(0, 0, 0, 0.3)}.provider-name{color:var(--euclid-text-primary-dark, #f1f5f9)}.wallet-address{color:var(--euclid-text-secondary-dark, #94a3b8)}.chain-name{color:var(--euclid-text-primary-dark, #f1f5f9)}.chain-type{background:var(--euclid-muted-bg-dark, #374151);color:var(--euclid-text-secondary-dark, #94a3b8)}.wallet-label{color:var(--euclid-text-secondary-dark, #94a3b8)}.connection-dot{box-shadow:0 0 0 2px var(--euclid-surface-dark, #1e293b)}}";const fe=class{constructor(i){e(this,i);this.walletClick=t(this,"walletClick");this.clickable=true;this.showConnectionStatus=true;this.showChainInfo=true;this.handleClick=()=>{if(this.clickable){this.walletClick.emit(this.wallet)}}}formatAddress(e){return`${e.slice(0,6)}...${e.slice(-4)}`}render(){const{wallet:e}=this;return i("div",{key:"4b25f4f66fe1e94ffed1f4c00cff25121481f4e7",class:{"wallet-card":true,clickable:this.clickable,connected:e.isConnected},onClick:this.handleClick},i("div",{key:"484ea619f138764d4598a7df552f0f1e020762c5",class:"wallet-chain-logo"},i("img",{key:"99bf40a0d58728079e5703aaaea2760e4dd56705",src:e.chainLogo,alt:e.chainName})),i("div",{key:"e797d9703e2ab105552a924bfa946d0fdbc2a526",class:"wallet-info"},i("div",{key:"e02cd14cd56574df7bb9283749ed56a733740a6b",class:"wallet-header"},i("div",{key:"67611d7abb5663c895cb8fd3b7c5d885fe7311c6",class:"wallet-provider"},i("span",{key:"747f2f9e4b7eb44896ead71c28fcce9c260c3729",class:"provider-name"},e.provider),this.showConnectionStatus&&i("div",{key:"bb9443c3095dc2f58279389061eed65e36b49572",class:{"connection-indicator":true,connected:e.isConnected,saved:!e.isConnected}},e.isConnected?"Connected":"Saved"))),i("div",{key:"910e9228be870f6232b9be20e26b118fcd3e84c6",class:"wallet-address"},this.formatAddress(e.address)),this.showChainInfo&&i("div",{key:"26dd26caf158126959e0c489a7e236a90ccebce2",class:"wallet-chain-info"},i("span",{key:"d5c15d743910cc98f6ba50fa9a9a0275de5c3ea6",class:"chain-name"},e.chainName),i("span",{key:"834ac4e5be605891b9c6007ce1a5373a0a71a3a0",class:"chain-type"},e.chainType)),e.label&&i("div",{key:"e1ae5576deefaf1f48a72cca7e2e0e6603ede79e",class:"wallet-label"},e.label)),this.showConnectionStatus&&e.isConnected&&i("div",{key:"64b85b0785049ef921e70c480fc773888849b27c",class:"connection-dot"}))}};fe.style=pe;const me="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMjkuNC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogOS4wMyBCdWlsZCAwKSAgLS0+CjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiCgkgdmlld0JveD0iMCAwIDE0MiAxMzYuODc4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxNDIgMTM2Ljg3ODsiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cGF0aCBzdHlsZT0iZmlsbDojRkY1QzE2OyIgZD0iTTEzMi42ODIsMTMyLjE5MmwtMzAuNTgzLTkuMTA2bC0yMy4wNjMsMTMuNzg3bC0xNi4wOTItMC4wMDdsLTIzLjA3Ny0xMy43OGwtMzAuNTY5LDkuMTA2TDAsMTAwLjgwMQoJbDkuMjk5LTM0LjgzOUwwLDM2LjUwN0w5LjI5OSwwbDQ3Ljc2NiwyOC41MzhoMjcuODVMMTMyLjY4MiwwbDkuMjk5LDM2LjUwN2wtOS4yOTksMjkuNDU1bDkuMjk5LDM0LjgzOUwxMzIuNjgyLDEzMi4xOTIKCUwxMzIuNjgyLDEzMi4xOTJ6Ii8+CjxwYXRoIHN0eWxlPSJmaWxsOiNGRjVDMTY7IiBkPSJNOS4zMDUsMGw0Ny43NjcsMjguNTU4bC0xLjg5OSwxOS41OTlMOS4zMDUsMHogTTM5Ljg3NSwxMDAuODE0bDIxLjAxNywxNi4wMWwtMjEuMDE3LDYuMjYxCglDMzkuODc1LDEyMy4wODUsMzkuODc1LDEwMC44MTQsMzkuODc1LDEwMC44MTR6IE01OS4yMTIsNzQuMzQ1bC00LjAzOS0yNi4xNzRMMjkuMzE3LDY1Ljk3bC0wLjAxNC0wLjAwN3YwLjAxM2wwLjA4LDE4LjMyMQoJbDEwLjQ4NS05Ljk1MUw1OS4yMTIsNzQuMzQ1TDU5LjIxMiw3NC4zNDV6IE0xMzIuNjgyLDBMODQuOTE1LDI4LjU1OGwxLjg5MywxOS41OTlMMTMyLjY4MiwweiBNMTAyLjExMywxMDAuODE0bC0yMS4wMTgsMTYuMDEKCWwyMS4wMTgsNi4yNjFWMTAwLjgxNHogTTExMi42NzgsNjUuOTc1aDAuMDA3SDExMi42Nzh2LTAuMDEzbC0wLjAwNiwwLjAwN0w4Ni44MTUsNDguMTcxbC00LjAzOSwyNi4xNzRoMTkuMzM2bDEwLjQ5Miw5Ljk1CglDMTEyLjYwNCw4NC4yOTUsMTEyLjY3OCw2NS45NzUsMTEyLjY3OCw2NS45NzV6Ii8+CjxwYXRoIHN0eWxlPSJmaWxsOiNFMzQ4MDc7IiBkPSJNMzkuODY4LDEyMy4wODVsLTMwLjU2OSw5LjEwNkwwLDEwMC44MTRoMzkuODY4QzM5Ljg2OCwxMDAuODE0LDM5Ljg2OCwxMjMuMDg1LDM5Ljg2OCwxMjMuMDg1egoJIE01OS4yMDUsNzQuMzM4bDUuODM5LDM3Ljg0bC04LjA5My0yMS4wNEwyOS4zNyw4NC4yOTVsMTAuNDkxLTkuOTU2aDE5LjM0NEw1OS4yMDUsNzQuMzM4eiBNMTAyLjExMiwxMjMuMDg1bDMwLjU3LDkuMTA2CglsOS4yOTktMzEuMzc4aC0zOS44NjlDMTAyLjExMiwxMDAuODE0LDEwMi4xMTIsMTIzLjA4NSwxMDIuMTEyLDEyMy4wODV6IE04Mi43NzYsNzQuMzM4bC01LjgzOSwzNy44NGw4LjA5Mi0yMS4wNGwyNy41ODMtNi44NDMKCWwtMTAuNDk4LTkuOTU2SDgyLjc3NlY3NC4zMzh6Ii8+CjxwYXRoIHN0eWxlPSJmaWxsOiNGRjhENUQ7IiBkPSJNMCwxMDAuODAxbDkuMjk5LTM0LjgzOWgxOS45OTdsMC4wNzMsMTguMzI3bDI3LjU4NCw2Ljg0M2w4LjA5MiwyMS4wMzlsLTQuMTYsNC42MzNsLTIxLjAxNy0xNi4wMUgwCglWMTAwLjgwMXogTTE0MS45ODEsMTAwLjgwMWwtOS4yOTktMzQuODM5aC0xOS45OThsLTAuMDczLDE4LjMyN2wtMjcuNTgyLDYuODQzbC04LjA5MywyMS4wMzlsNC4xNTksNC42MzNsMjEuMDE4LTE2LjAxaDM5Ljg2OAoJVjEwMC44MDF6IE04NC45MTUsMjguNTM4aC0yNy44NWwtMS44OTEsMTkuNTk5bDkuODcyLDY0LjAxM2gxMS44OTFsOS44NzgtNjQuMDEzTDg0LjkxNSwyOC41Mzh6Ii8+CjxwYXRoIHN0eWxlPSJmaWxsOiM2NjE4MDA7IiBkPSJNOS4yOTksMEwwLDM2LjUwN2w5LjI5OSwyOS40NTVoMTkuOTk3bDI1Ljg3LTE3LjgwNEw5LjI5OSwweiBNNTMuNDI2LDgxLjkzOGgtOS4wNTlsLTQuOTMyLDQuODM1CglsMTcuNTI0LDQuMzQ0bC0zLjUzMy05LjE4NlY4MS45Mzh6IE0xMzIuNjgyLDBsOS4yOTksMzYuNTA3bC05LjI5OSwyOS40NTVoLTE5Ljk5OEw4Ni44MTUsNDguMTU4TDEzMi42ODIsMHogTTg4LjU2OCw4MS45MzhoOS4wNzIKCWw0LjkzMiw0Ljg0MWwtMTcuNTQ0LDQuMzUzbDMuNTQtOS4yMDFWODEuOTM4eiBNNzkuMDI5LDEyNC4zODVsMi4wNjctNy41NjdsLTQuMTYtNC42MzNoLTExLjlsLTQuMTU5LDQuNjMzbDIuMDY2LDcuNTY3Ii8+CjxwYXRoIHN0eWxlPSJmaWxsOiNDMEM0Q0Q7IiBkPSJNNzkuMDI5LDEyNC4zODR2MTIuNDk1SDYyLjk0NXYtMTIuNDk1TDc5LjAyOSwxMjQuMzg0TDc5LjAyOSwxMjQuMzg0eiIvPgo8cGF0aCBzdHlsZT0iZmlsbDojRTdFQkY2OyIgZD0iTTM5Ljg3NSwxMjMuMDcybDIzLjA4MywxMy44di0xMi40OTVsLTIuMDY3LTcuNTY2QzYwLjg5MSwxMTYuODExLDM5Ljg3NSwxMjMuMDcyLDM5Ljg3NSwxMjMuMDcyegoJIE0xMDIuMTEzLDEyMy4wNzJsLTIzLjA4NCwxMy44di0xMi40OTVsMi4wNjctNy41NjZDODEuMDk2LDExNi44MTEsMTAyLjExMywxMjMuMDcyLDEwMi4xMTMsMTIzLjA3MnoiLz4KPC9zdmc+Cg==";const ge="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMSIgdmlld0JveD0iMCAwIDEwMCAxMDEiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF80MDhfMjA0KSI+CjxwYXRoIGQ9Ik0wIDUwLjVDMCAzMi45OTg0IDAgMjQuMjQ3NSAzLjQwNjA1IDE3LjU2MjhDNi40MDIwOSAxMS42ODI3IDExLjE4MjcgNi45MDIwOSAxNy4wNjI4IDMuOTA2MDVDMjMuNzQ3NSAwLjUgMzIuNDk4NCAwLjUgNTAgMC41QzY3LjUwMTYgMC41IDc2LjI1MjUgMC41IDgyLjkzNzIgMy45MDYwNUM4OC44MTczIDYuOTAyMDkgOTMuNTk3OSAxMS42ODI3IDk2LjU5NCAxNy41NjI4QzEwMCAyNC4yNDc1IDEwMCAzMi45OTg0IDEwMCA1MC41QzEwMCA2OC4wMDE2IDEwMCA3Ni43NTI1IDk2LjU5NCA4My40MzcyQzkzLjU5NzkgODkuMzE3MyA4OC44MTczIDk0LjA5NzkgODIuOTM3MiA5Ny4wOTRDNzYuMjUyNSAxMDAuNSA2Ny41MDE2IDEwMC41IDUwIDEwMC41QzMyLjQ5ODQgMTAwLjUgMjMuNzQ3NSAxMDAuNSAxNy4wNjI4IDk3LjA5NEMxMS4xODI3IDk0LjA5NzkgNi40MDIwOSA4OS4zMTczIDMuNDA2MDUgODMuNDM3MkMwIDc2Ljc1MjUgMCA2OC4wMDE2IDAgNTAuNVoiIGZpbGw9IiMxNEFGRUIiLz4KPHBhdGggZD0iTTUyLjA4MzggMzIuNzk3OUM1Mi42NTEyIDM4LjU5NzQgNTIuOTM0OCA0MS40OTczIDU0LjQ1NDkgNDMuNjIzN0M1NS4xMDYyIDQ0LjUzNDkgNTUuOTA5NSA0NS4zMjc1IDU2LjgyOTUgNDUuOTY2M0M1OC45NzY1IDQ3LjQ1NzEgNjEuODggNDcuNzAxMyA2Ny42ODY1IDQ4LjE4OTZMNzAuMTQxNiA0OC4zOTU4VjUyLjYwMDNMNjcuNjg2NSA1Mi44MDY0QzYxLjg4IDUzLjI5NDcgNTguOTc2NSA1My41MzkgNTYuODI5NSA1NS4wMjk4QzU1LjkwOTUgNTUuNjY4NiA1NS4xMDYyIDU2LjQ2MSA1NC40NTQ5IDU3LjM3MjJDNTIuOTM0OCA1OS40OTg2IDUyLjY1MTIgNjIuMzk4NiA1Mi4wODM4IDY4LjE5ODFINDcuOTE2MkM0Ny4zNDg4IDYyLjM5ODYgNDcuMDY1MiA1OS40OTg2IDQ1LjU0NTEgNTcuMzcyMkM0NC44OTM4IDU2LjQ2MSA0NC4wOTA1IDU1LjY2ODYgNDMuMTcwNSA1NS4wMjk4QzQxLjAyMzUgNTMuNTM5IDM4LjEyIDUzLjI5NDcgMzIuMzEzNSA1Mi44MDY0TDI5Ljg1ODQgNTIuNjAwM1Y0OC4zOTU4TDMyLjMxMzUgNDguMTg5NkMzOC4xMiA0Ny43MDEzIDQxLjAyMzUgNDcuNDU3MSA0My4xNzA1IDQ1Ljk2NjNDNDQuMDkwNSA0NS4zMjc1IDQ0Ljg5MzggNDQuNTM0OSA0NS41NDUxIDQzLjYyMzdDNDcuMDY1MiA0MS40OTczIDQ3LjM0ODggMzguNTk3NCA0Ny45MTYyIDMyLjc5NzlINTIuMDgzOFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNTAgMTEuNDM1NUM4Mi4xNjggMTEuNDM1NSA4OS4wNjI1IDE4LjMzMDEgODkuMDYyNSA1MC40OThDODkuMDYyNSA4Mi42NjYgODIuMTY4IDg5LjU2MDUgNTAgODkuNTYwNUMxNy44MzIgODkuNTYwNSAxMC45Mzc1IDgyLjY2NiAxMC45Mzc1IDUwLjQ5OEMxMC45Mzc1IDE4LjMzMDEgMTcuODMyIDExLjQzNTUgNTAgMTEuNDM1NVpNNzUuNTI5OSAyNC45MzU0QzY2LjA2OTMgMTUuNDc1IDQ2Ljk2MjggMTkuMjQzIDMyLjg1NDEgMzMuMzUxNkMxOC43NDU0IDQ3LjQ2MDMgMTQuOTc3NCA2Ni41NjczIDI0LjQzOCA3Ni4wMjc5QzMzLjg5ODYgODUuNDg4MyA1My4wMDUgODEuNzIwNCA2Ny4xMTM3IDY3LjYxMTdDODEuMjIyNCA1My41MDMgODQuOTkwNCAzNC4zOTYgNzUuNTI5OSAyNC45MzU0WiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF80MDhfMjA0Ij4KPHJlY3Qgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDEiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==";const be="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTkzIiBoZWlnaHQ9IjQ5MyIgdmlld0JveD0iMCAwIDU5MyA0OTMiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik03MC4wNTQ2IDQ5M0MxNDUuNjA0IDQ5MyAyMDIuMzggNDI3LjI5NyAyMzYuMjYzIDM3NS4zNzhDMjMyLjE0MiAzODYuODY1IDIyOS44NTIgMzk4LjM1MSAyMjkuODUyIDQwOS4zNzhDMjI5Ljg1MiA0MzkuNzAzIDI0Ny4yNTIgNDYxLjI5NyAyODEuNTkyIDQ2MS4yOTdDMzI4Ljc1MyA0NjEuMjk3IDM3OS4xMTkgNDE5Ljk0NiA0MDUuMjE4IDM3NS4zNzhDNDAzLjM4NiAzODEuODExIDQwMi40NzEgMzg3Ljc4NCA0MDIuNDcxIDM5My4yOTdDNDAyLjQ3MSA0MTQuNDMyIDQxNC4zNzUgNDI3Ljc1NyA0MzguNjQzIDQyNy43NTdDNTE1LjEwOCA0MjcuNzU3IDU5Mi4wMyAyOTIuMjE2IDU5Mi4wMyAxNzMuNjc2QzU5Mi4wMyA4MS4zMjQzIDU0NS4zMjcgMCA0MjguMTEyIDBDMjIyLjA2OSAwIDAgMjUxLjc4NCAwIDQxNC40MzJDMCA0NzguMjk3IDM0LjM0MDUgNDkzIDcwLjA1NDYgNDkzWk0zNTcuMTQxIDE2My41NjhDMzU3LjE0MSAxNDAuNTk1IDM2OS45NjIgMTI0LjUxNCAzODguNzM0IDEyNC41MTRDNDA3LjA0OSAxMjQuNTE0IDQxOS44NyAxNDAuNTk1IDQxOS44NyAxNjMuNTY4QzQxOS44NyAxODYuNTQxIDQwNy4wNDkgMjAzLjA4MSAzODguNzM0IDIwMy4wODFDMzY5Ljk2MiAyMDMuMDgxIDM1Ny4xNDEgMTg2LjU0MSAzNTcuMTQxIDE2My41NjhaTTQ1NS4xMjYgMTYzLjU2OEM0NTUuMTI2IDE0MC41OTUgNDY3Ljk0NyAxMjQuNTE0IDQ4Ni43MTkgMTI0LjUxNEM1MDUuMDM0IDEyNC41MTQgNTE3Ljg1NSAxNDAuNTk1IDUxNy44NTUgMTYzLjU2OEM1MTcuODU1IDE4Ni41NDEgNTA1LjAzNCAyMDMuMDgxIDQ4Ni43MTkgMjAzLjA4MUM0NjcuOTQ3IDIwMy4wODEgNDU1LjEyNiAxODYuNTQxIDQ1NS4xMjYgMTYzLjU2OFoiIGZpbGw9IiNBQjlGRjIiLz4KPC9zdmc+Cg==";const ve="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDI0IiBoZWlnaHQ9IjEwMjQiIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPgogIDxnIGlkPSLqt7jro7lfMzc4NiIgZGF0YS1uYW1lPSLqt7jro7kgMzc4NiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI3OTQgMTY3KSI+CiAgICA8cmVjdCBpZD0i7IKs6rCB7ZiVXzIwMjkiIGRhdGEtbmFtZT0i7IKs6rCB7ZiVIDIwMjkiIHdpZHRoPSIxMDI0IiBoZWlnaHQ9IjEwMjQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI3OTQgLTE2NykiIGZpbGw9Im5vbmUiLz4KICAgIDxnIGlkPSLqt7jro7lfMzc4NSIgZGF0YS1uYW1lPSLqt7jro7kgMzc4NSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjg3Mi40OTEgLTUxLjEzNCkiPgogICAgICA8cGF0aCBpZD0i7Yyo7IqkXzE4NjgiIGRhdGEtbmFtZT0i7Yyo7IqkIDE4NjgiIGQ9Ik01NDkuNTI4LDBIMjIxLjJBNDYuNyw0Ni43LDAsMCwwLDE4MC44MywyMy4zTDE2LjY2NCwzMDcuNjJhNDYuNDUzLDQ2LjQ1MywwLDAsMCwwLDQ2LjZMMTgwLjgzLDYzOC41NDJsODAuNzMtNDYuNkwxMTAuOTI3LDMzMC45MjEsMjQ4LjE0NCw5My4ySDUyMi43bDE1MC43NSwyNjEuMDE4LDgwLjczLTQ2LjZMNTg5Ljg5MiwyMy4zQTQ2LjU2MSw0Ni41NjEsMCwwLDAsNTQ5LjUyOCwwWiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTExLjk2MikiIGZpbGw9IiM5YzZjZmYiLz4KICAgICAgPHBhdGggaWQ9Iu2MqOyKpF8xODY5IiBkYXRhLW5hbWU9Iu2MqOyKpCAxODY5IiBkPSJNNTczLjIyOCwxMy4xM2wtODAuNzMsNDYuNkw2NDMuMjQ5LDMyMC43NSw1MDYuMDMyLDU1OC40NjhIMjMxLjQ4TDgwLjczLDI5Ny40NDksMCwzNDQuMDUxLDE2NC4xNjYsNjI4LjM3MWE0Ni42LDQ2LjYsMCwwLDAsNDAuMzY1LDIzLjNINTMyLjg2NGE0Ni43LDQ2LjcsMCwwLDAsNDAuMzY1LTIzLjNMNzM3LjM5NSwzNDQuMDUxYTQ2LjQ1Myw0Ni40NTMsMCwwLDAsMC00Ni42WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAxNDEuMzg2KSIgZmlsbD0iIzA1ZDJkZCIvPgogICAgPC9nPgogIDwvZz4KPC9zdmc+Cg==";const ye="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjMzMiIgdmlld0JveD0iMCAwIDQ4MCAzMzIiIHdpZHRoPSI0ODAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTEyNi42MTMgOTMuOTg0MmM2Mi42MjItNjEuMzEyMyAxNjQuMTUyLTYxLjMxMjMgMjI2Ljc3NSAwbDcuNTM2IDcuMzc4OGMzLjEzMSAzLjA2NiAzLjEzMSA4LjAzNiAwIDExLjEwMmwtMjUuNzgxIDI1LjI0MmMtMS41NjYgMS41MzMtNC4xMDQgMS41MzMtNS42NyAwbC0xMC4zNzEtMTAuMTU0Yy00My42ODctNDIuNzczNC0xMTQuNTE3LTQyLjc3MzQtMTU4LjIwNCAwbC0xMS4xMDcgMTAuODc0Yy0xLjU2NSAxLjUzMy00LjEwMyAxLjUzMy01LjY2OSAwbC0yNS43ODEtMjUuMjQyYy0zLjEzMi0zLjA2Ni0zLjEzMi04LjAzNiAwLTExLjEwMnptMjgwLjA5MyA1Mi4yMDM4IDIyLjk0NiAyMi40NjVjMy4xMzEgMy4wNjYgMy4xMzEgOC4wMzYgMCAxMS4xMDJsLTEwMy40NjMgMTAxLjMwMWMtMy4xMzEgMy4wNjUtOC4yMDggMy4wNjUtMTEuMzM5IDBsLTczLjQzMi03MS44OTZjLS43ODMtLjc2Ny0yLjA1Mi0uNzY3LTIuODM1IDBsLTczLjQzIDcxLjg5NmMtMy4xMzEgMy4wNjUtOC4yMDggMy4wNjUtMTEuMzM5IDBsLTEwMy40NjU3LTEwMS4zMDJjLTMuMTMxMS0zLjA2Ni0zLjEzMTEtOC4wMzYgMC0xMS4xMDJsMjIuOTQ1Ni0yMi40NjZjMy4xMzExLTMuMDY1IDguMjA3Ny0zLjA2NSAxMS4zMzg4IDBsNzMuNDMzMyA3MS44OTdjLjc4Mi43NjcgMi4wNTEuNzY3IDIuODM0IDBsNzMuNDI5LTcxLjg5N2MzLjEzMS0zLjA2NSA4LjIwOC0zLjA2NSAxMS4zMzkgMGw3My40MzMgNzEuODk3Yy43ODMuNzY3IDIuMDUyLjc2NyAyLjgzNSAwbDczLjQzMS03MS44OTVjMy4xMzItMy4wNjYgOC4yMDgtMy4wNjYgMTEuMzM5IDB6IiBmaWxsPSIjMzM5NmZmIi8+PC9zdmc+";const xe={metamask:{name:"MetaMask",logo:me,description:"Connect using MetaMask wallet",supportedChains:["EVM"]},keplr:{name:"Keplr",logo:ge,description:"Connect using Keplr wallet",supportedChains:["Cosmos","CosmWasm"]},phantom:{name:"Phantom",logo:be,description:"Connect using Phantom wallet",supportedChains:["EVM","Solana"]},cosmostation:{name:"Cosmostation",logo:ve,description:"Connect using Cosmostation wallet",supportedChains:["Cosmos","CosmWasm"]},walletconnect:{name:"WalletConnect",logo:ye,description:"Connect using WalletConnect",supportedChains:["EVM","Cosmos"]}};const we=":host{display:block}.wallet-content{width:100%}.step-header{margin-bottom:var(--euclid-spacing-5);text-align:center}.step-header h3{margin:0 0 var(--euclid-spacing-2) 0;font-size:var(--euclid-text-size-lg);font-weight:var(--euclid-font-weight-semibold);color:var(--euclid-text-primary)}.step-header p{margin:0;color:var(--euclid-text-secondary);font-size:var(--euclid-text-size-sm)}.back-button{background:none;border:none;color:var(--euclid-text-secondary);cursor:pointer;font-size:var(--euclid-text-size-sm);padding:var(--euclid-spacing-2);margin-bottom:var(--euclid-spacing-3);border-radius:var(--euclid-radius-sm);transition:all var(--euclid-transition-duration-fast)}.back-button:hover{color:var(--euclid-text-primary);background:var(--euclid-surface-secondary)}.wallet-content euclid-data-list{max-height:400px}.wallet-grid{display:grid;grid-template-columns:repeat(auto-fill, minmax(160px, 1fr));gap:var(--euclid-spacing-3)}.wallet-card{display:flex;flex-direction:column;align-items:center;padding:var(--euclid-spacing-4);border:2px solid var(--euclid-border);border-radius:var(--euclid-radius-lg);background:var(--euclid-surface);cursor:pointer;transition:all var(--euclid-transition-duration-fast);text-align:center}.wallet-card:hover:not(.wallet-card--not-installed){border-color:var(--euclid-border-hover);background:var(--euclid-surface-secondary);transform:translateY(-1px)}.wallet-card--not-installed{opacity:0.6}.wallet-card--not-installed:hover{border-color:var(--euclid-warning-300);background:var(--euclid-warning-50);transform:translateY(-1px)}.wallet-icon{width:3rem;height:3rem;border-radius:var(--euclid-radius-lg);display:flex;align-items:center;justify-content:center;margin-bottom:var(--euclid-spacing-3);background:var(--euclid-surface-secondary)}.wallet-logo{width:2rem;height:2rem;object-fit:contain}.wallet-emoji{font-size:1.5rem}.wallet-info{display:flex;flex-direction:column;gap:var(--euclid-spacing-1);width:100%}.wallet-name{font-size:var(--euclid-text-size-sm);font-weight:var(--euclid-font-weight-medium);color:var(--euclid-text-primary)}.wallet-description{font-size:var(--euclid-text-size-xs);color:var(--euclid-text-secondary);line-height:1.3}.install-badge{display:inline-block;font-size:var(--euclid-text-size-xs);padding:var(--euclid-spacing-1) var(--euclid-spacing-2);border-radius:var(--euclid-radius-sm);background:var(--euclid-warning-100);color:var(--euclid-warning-700);margin-top:var(--euclid-spacing-2);font-weight:var(--euclid-font-weight-medium)}@media (max-width: 640px){.wallet-grid{grid-template-columns:repeat(2, 1fr);gap:var(--euclid-spacing-2)}.wallet-card{padding:var(--euclid-spacing-3)}.wallet-icon{width:2.5rem;height:2.5rem}}@media (max-width: 480px){.wallet-grid{grid-template-columns:1fr}.step-header{margin-bottom:var(--euclid-spacing-4)}.step-header h3{font-size:var(--euclid-text-size-base)}}.no-wallets{text-align:center;padding:var(--euclid-spacing-6);color:var(--euclid-text-secondary)}.no-wallets p{margin:0 0 var(--euclid-spacing-2) 0;font-size:var(--euclid-text-size-sm)}.wallet-card:focus-visible,.chain-card:focus-visible{outline:2px solid var(--euclid-border-focus);outline-offset:2px}.back-button:focus-visible{outline:2px solid var(--euclid-border-focus);outline-offset:2px}";const ke=class{constructor(t){e(this,t);this.walletProviders=[];this.selectedChain=null;this.step="chains";this.handleChainSelect=e=>{console.log("🌐 Chain selected:",e.display_name,e.chain_uid);this.selectedChain=e;this.step="wallets"};this.handleChainSelected=e=>{const t=e.detail.item;this.handleChainSelect(t)};this.handleBackToChains=()=>{this.step="chains";this.selectedChain=null};this.handleWalletConnect=async e=>{console.log("🔗 Wallet clicked:",e);if(!e.installed){console.log("❌ Wallet not installed, opening install URL");this.openInstallUrl(e.id);return}if(!this.selectedChain){console.error("❌ No chain selected");return}console.log("📡 Dispatching wallet connection request:",{chainUID:this.selectedChain.chain_uid,walletType:e.id});g(b.WALLET.CONNECT_REQUEST,{chainUID:this.selectedChain.chain_uid,walletType:e.id});r.closeWalletModal()}}componentWillLoad(){this.detectWallets();this.initializeWithChainFilter()}initializeWithChainFilter(){const e=r.state.walletModalFilter;if(e){const t=h.state.chains.find((t=>t.chain_uid===e));if(t){console.log("🎯 Wallet modal opened with chain filter:",t.display_name);this.selectedChain=t;this.step="wallets"}else{console.warn("⚠️ Chain filter provided but chain not found:",e);this.step="chains"}}else{this.step="chains"}}detectWallets(){const e=oe.getAvailableWallets();this.walletProviders=e.map((e=>{const t=xe[e.type]||{name:e.type,logo:"",description:`Connect using ${e.type} wallet`};return{id:e.type,name:t.name,icon:t.logo,installed:e.installed,description:t.description}}));console.log("🔍 Detected wallets:",this.walletProviders)}openInstallUrl(e){const t={metamask:"https://metamask.io/download/",keplr:"https://www.keplr.app/download",phantom:"https://phantom.app/download",walletconnect:"https://walletconnect.com/"};const i=t[e];if(i){window.open(i,"_blank")}}getCompatibleWallets(){if(!this.selectedChain)return[];const e=this.selectedChain.type.toLowerCase();const t=e==="evm";const i=e==="cosmwasm";return this.walletProviders.filter((e=>{if(t){return["metamask","phantom","walletconnect"].includes(e.id)}else if(i){return["keplr","cosmostation","walletconnect"].includes(e.id)}return false}))}render(){if(this.step==="chains"){return this.renderChainSelection()}else{return this.renderWalletSelection()}}renderChainSelection(){return i("div",{class:"wallet-content"},i("div",{class:"step-header"},i("h3",null,"Select Blockchain Network"),i("p",null,"Choose the blockchain network you want to connect to")),i("euclid-data-list",{dataType:"chains",displayMode:"compact",itemsPerPage:20,infiniteScroll:true,useParentScroll:true,searchable:true,sortable:false,showStats:false,filterable:false,showEndMessage:false,onItemSelected:this.handleChainSelected}))}renderWalletSelection(){const e=this.getCompatibleWallets();return i("div",{class:"wallet-content"},i("div",{class:"step-header"},i("button",{class:"back-button",onClick:this.handleBackToChains},"← Back to Chains"),i("h3",null,"Connect Wallet to ",this.selectedChain?.display_name),i("p",null,"Choose a compatible wallet for this ",this.selectedChain?.type.toUpperCase()," network")),i("div",{class:"wallet-grid"},e.map((e=>i("button",{key:e.id,class:{"wallet-card":true,"wallet-card--not-installed":!e.installed},onClick:()=>this.handleWalletConnect(e),type:"button"},i("div",{class:"wallet-icon"},e.icon?i("img",{src:e.icon,alt:e.name,class:"wallet-logo"}):i("span",{class:"wallet-emoji"},"🔗")),i("div",{class:"wallet-info"},i("div",{class:"wallet-name"},e.name),i("div",{class:"wallet-description"},e.description),!e.installed&&i("span",{class:"install-badge"},"Install Required")))))),e.length===0&&i("div",{class:"no-wallets"},i("p",null,"No compatible wallets found for ",this.selectedChain?.type.toUpperCase()," networks."),i("p",null,"Please install a compatible wallet extension.")))}};ke.style=we;const Me=class{constructor(t){e(this,t);this.isInitialized=false}async componentWillLoad(){this.euclidConfig=this.config?JSON.parse(this.config):f}async componentDidLoad(){await this.initialize()}async initialize(){console.log("🔗 Initializing Wallet Controller...");await o.initialize();await this.detectAvailableWallets();this.setupWalletEventListeners();this.isInitialized=true;console.log("✅ Wallet Controller initialized")}async detectAvailableWallets(){const e=[];if(window.keplr){e.push("keplr")}if(window.ethereum?.isMetaMask){e.push("metamask")}if(window.cosmostation){e.push("cosmostation")}console.log("🔍 Available wallets detected:",e);return e}setupWalletEventListeners(){if(window.ethereum){const e=window.ethereum;if(e.on){e.on("accountsChanged",(e=>{console.log("MetaMask accounts changed:",e);this.handleEvmAccountChange(e)}));e.on("chainChanged",(e=>{console.log("MetaMask chain changed:",e);this.handleEvmChainChange(e)}))}}window.addEventListener("keplr_keystorechange",(()=>{console.log("Keplr keystore changed");this.handleKeplrKeystoreChange()}))}async handleEvmAccountChange(e){if(e.length===0){this.disconnectEvmWallets()}}handleEvmChainChange(e){console.log("Chain changed to:",e)}handleKeplrKeystoreChange(){}disconnectEvmWallets(){const e=["ethereum","bsc","polygon","arbitrum","base","manta","sepolia"];e.forEach((e=>{o.removeWallet(e)}))}async handleWalletConnectionRequest(e){const{chainUID:t,walletType:i}=e.detail;console.log("🎯 Wallet controller received connection request:",{chainUID:t,walletType:i});try{console.log("🔄 Attempting to connect wallet...");await this.connectWallet(t,i);console.log("✅ Wallet connection successful!")}catch(e){console.error("❌ Failed to connect wallet:",e);g(b.WALLET.CONNECT_FAILED,{chainUID:t,walletType:i,error:e instanceof Error?e.message:"Unknown error"})}}handleWalletDisconnectionRequest(e){const{chainUID:t}=e.detail;console.log("🔌 Wallet disconnection requested:",t);o.disconnectWallet(t);g(b.WALLET.DISCONNECT_SUCCESS,{chainUID:t})}async connectWallet(e,t){console.log("🔗 connectWallet called with:",{chainUID:e,walletType:t});let i=h.getChain(e);if(!i){console.warn(`Chain ${e} not found in store, using fallback configuration`);i=this.getFallbackChainConfig(e,t);if(!i){throw new Error(`Chain configuration not found for ${e} and no fallback available`)}}console.log("🔗 Using chain config:",i);const a=["keplr","metamask","cosmostation","walletconnect","phantom"];if(!a.includes(t)){throw new Error(`Unsupported wallet type: ${t}`)}console.log("✅ Wallet type validation passed");console.log("🔗 Calling WalletAdapterFactory.connectWallet...");const s=await oe.connectWallet(t,i);console.log("🔗 Wallet adapter result:",s);if(s.success&&s.address){console.log("✅ Connection successful, adding to store...");o.addWallet(e,{address:s.address,name:t,walletType:t,type:t,isConnected:true,balances:[]});console.log("📡 Emitting connection success event...");g(b.WALLET.CONNECT_SUCCESS,{chainUID:e,walletType:t,address:s.address})}else{console.error("❌ Wallet connection failed:",s.error);throw new Error(s.error||"Failed to connect wallet")}}getFallbackChainConfig(e,t){const i={ethereum:{chain_uid:"ethereum",chain_id:"1",display_name:"Ethereum",type:"EVM",explorer_url:"https://etherscan.io",factory_address:"",token_factory_address:"",logo:""},bsc:{chain_uid:"bsc",chain_id:"56",display_name:"BNB Smart Chain",type:"EVM",explorer_url:"https://bscscan.com",factory_address:"",token_factory_address:"",logo:""},polygon:{chain_uid:"polygon",chain_id:"137",display_name:"Polygon",type:"EVM",explorer_url:"https://polygonscan.com",factory_address:"",token_factory_address:"",logo:""},arbitrum:{chain_uid:"arbitrum",chain_id:"42161",display_name:"Arbitrum One",type:"EVM",explorer_url:"https://arbiscan.io",factory_address:"",token_factory_address:"",logo:""},"cosmoshub-4":{chain_uid:"cosmoshub-4",chain_id:"cosmoshub-4",display_name:"Cosmos Hub",type:"Cosmwasm",explorer_url:"https://mintscan.io/cosmos",factory_address:"",token_factory_address:"",logo:""},"osmosis-1":{chain_uid:"osmosis-1",chain_id:"osmosis-1",display_name:"Osmosis",type:"Cosmwasm",explorer_url:"https://mintscan.io/osmosis",factory_address:"",token_factory_address:"",logo:""}};const a=i[e];if(!a){return null}const s=["metamask","phantom","walletconnect"].includes(t);const o=["keplr","cosmostation"].includes(t);if(a.type==="EVM"&&!s){return null}if(a.type==="Cosmwasm"&&!o){return null}return a}render(){return null}};export{I as euclid_address_book,j as euclid_api_tester,S as euclid_button,A as euclid_config_provider,E as euclid_core_provider,B as euclid_data_list,Q as euclid_demo_playground,V as euclid_liquidity_card,R as euclid_liquidity_controller,$ as euclid_market_data_controller,G as euclid_modal,Z as euclid_portfolio,X as euclid_swap_card,re as euclid_swap_controller,le as euclid_token_content,de as euclid_token_input,ue as euclid_tx_tracker_controller,he as euclid_user_data_controller,fe as euclid_wallet,ke as euclid_wallet_content,Me as euclid_wallet_controller};
//# sourceMappingURL=p-f85619fe.entry.js.map