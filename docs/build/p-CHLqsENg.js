import{a as t,f as e}from"./p-KvMX95QM.js";const n=(t,e,n)=>{const s=t.get(e);if(!s){t.set(e,[n])}else if(!s.includes(n)){s.push(n)}};const s=(t,e)=>{let n;return(...s)=>{if(n){clearTimeout(n)}n=setTimeout((()=>{n=0;t(...s)}),e)}};const o=t=>!("isConnected"in t)||t.isConnected;const r=s((t=>{for(let e of t.keys()){t.set(e,t.get(e).filter(o))}}),2e3);const c=()=>{if(typeof t!=="function"){return{}}const s=new Map;return{dispose:()=>s.clear(),get:e=>{const o=t();if(o){n(s,e,o)}},set:t=>{const n=s.get(t);if(n){s.set(t,n.filter(e))}r(s)},reset:()=>{s.forEach((t=>t.forEach(e)));r(s)}}};const i=t=>typeof t==="function"?t():t;const f=(t,e=(t,e)=>t!==e)=>{const n=i(t);let s=new Map(Object.entries(n??{}));const o={dispose:[],get:[],set:[],reset:[]};const r=new Map;const c=()=>{s=new Map(Object.entries(i(t)??{}));o.reset.forEach((t=>t()))};const f=()=>{o.dispose.forEach((t=>t()));c()};const a=t=>{o.get.forEach((e=>e(t)));return s.get(t)};const p=(t,n)=>{const r=s.get(t);if(e(n,r,t)){s.set(t,n);o.set.forEach((e=>e(t,n,r)))}};const d=typeof Proxy==="undefined"?{}:new Proxy(n,{get(t,e){return a(e)},ownKeys(t){return Array.from(s.keys())},getOwnPropertyDescriptor(){return{enumerable:true,configurable:true}},has(t,e){return s.has(e)},set(t,e,n){p(e,n);return true}});const l=(t,e)=>{o[t].push(e);return()=>{u(o[t],e)}};const g=(e,n)=>{const s=(t,s)=>{if(t===e){n(s)}};const o=()=>n(i(t)[e]);const c=l("set",s);const f=l("reset",o);r.set(n,{setHandler:s,resetHandler:o,propName:e});return()=>{c();f();r.delete(n)}};const y=(...t)=>{const e=t.reduce(((t,e)=>{if(e.set){t.push(l("set",e.set))}if(e.get){t.push(l("get",e.get))}if(e.reset){t.push(l("reset",e.reset))}if(e.dispose){t.push(l("dispose",e.dispose))}return t}),[]);return()=>e.forEach((t=>t()))};const m=t=>{const e=s.get(t);o.set.forEach((n=>n(t,e,e)))};const w=(t,e)=>{const n=r.get(e);if(n&&n.propName===t){u(o.set,n.setHandler);u(o.reset,n.resetHandler);r.delete(e)}};return{state:d,get:a,set:p,on:l,onChange:g,use:y,dispose:f,reset:c,forceUpdate:m,removeListener:w}};const u=(t,e)=>{const n=t.indexOf(e);if(n>=0){t[n]=t[t.length-1];t.length--}};const a=(t,e)=>{const n=f(t,e);n.use(c());return n};export{a as c};
//# sourceMappingURL=p-CHLqsENg.js.map